{"ast":null,"code":"import { _ as __assign, d as __spreadArray } from './LocalizationContext-f9cc3a84.js';\nvar SUPPORTED_MIMES = {\n  IMAGE: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/svg+xml', 'image/webp' // not supported in IE\n  ],\n\n  VIDEO: ['video/mpeg', 'video/ogg', 'video/webm', 'video/mp4'],\n  AUDIO: ['audio/aac', 'audio/midi', 'audio/x-midi', 'audio/mpeg', 'audio/ogg', 'audio/opus', 'audio/wav', 'audio/webm', 'audio/3gpp', 'audio/3gpp2', 'audio/mp3']\n};\nvar UIKitMessageTypes = {\n  ADMIN: \"ADMIN\",\n  TEXT: \"TEXT\",\n  FILE: \"FILE\",\n  THUMBNAIL: \"THUMBNAIL\",\n  OG: \"OG\",\n  UNKNOWN: \"UNKNOWN\"\n};\nvar UIKitFileTypes = {\n  IMAGE: \"IMAGE\",\n  AUDIO: \"AUDIO\",\n  VIDEO: \"VIDEO\",\n  GIF: \"GIF\",\n  OTHERS: \"OTHERS\"\n};\nvar SendingMessageStatus = {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending'\n};\nvar OutgoingMessageStates = {\n  NONE: 'NONE',\n  PENDING: 'PENDING',\n  SENT: 'SENT',\n  FAILED: 'FAILED',\n  DELIVERED: 'DELIVERED',\n  READ: 'READ'\n};\nvar isTextuallyNull = function isTextuallyNull(text) {\n  if (text === '' || text === null) {\n    return true;\n  }\n  return false;\n};\nvar isImage = function isImage(type) {\n  return SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;\n};\nvar isVideo = function isVideo(type) {\n  return SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;\n};\nvar isGif = function isGif(type) {\n  return type === 'image/gif';\n};\nvar isSupportedFileView = function isSupportedFileView(type) {\n  return isImage(type) || isVideo(type);\n};\nvar isAudio = function isAudio(type) {\n  return SUPPORTED_MIMES.AUDIO.indexOf(type) >= 0;\n};\nvar getUIKitFileTypes = function getUIKitFileTypes() {\n  return __assign({}, UIKitFileTypes);\n};\nvar getUIKitFileType = function getUIKitFileType(type) {\n  if (isGif(type)) return UIKitFileTypes.GIF;\n  if (isImage(type)) return UIKitFileTypes.IMAGE;\n  if (isVideo(type)) return UIKitFileTypes.VIDEO;\n  if (isAudio(type)) return UIKitFileTypes.AUDIO;\n  return UIKitFileTypes.OTHERS;\n};\nvar getOutgoingMessageStates = function getOutgoingMessageStates() {\n  return __assign({}, OutgoingMessageStates);\n};\nvar getOutgoingMessageState = function getOutgoingMessageState(channel, message) {\n  var _a;\n  if (message.sendingStatus === 'pending') return OutgoingMessageStates.PENDING;\n  if (message.sendingStatus === 'failed') return OutgoingMessageStates.FAILED;\n  if ((_a = channel === null || channel === void 0 ? void 0 : channel.isGroupChannel) === null || _a === void 0 ? void 0 : _a.call(channel)) {\n    /* GroupChannel only */\n    if (channel.getUnreadMemberCount(message) === 0) {\n      return OutgoingMessageStates.READ;\n    } else if (channel.getUndeliveredMemberCount(message) === 0) {\n      return OutgoingMessageStates.DELIVERED;\n    }\n  }\n  if (message.sendingStatus === 'succeeded') return OutgoingMessageStates.SENT;\n  return OutgoingMessageStates.NONE;\n};\nvar isSentMessage = function isSentMessage(channel, message) {\n  return getOutgoingMessageState(channel, message) === OutgoingMessageStates.SENT || getOutgoingMessageState(channel, message) === OutgoingMessageStates.DELIVERED || getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ;\n};\nvar isFailedMessage = function isFailedMessage(channel, message) {\n  return getOutgoingMessageState(channel, message) === OutgoingMessageStates.FAILED;\n};\nvar isPendingMessage = function isPendingMessage(channel, message) {\n  return getOutgoingMessageState(channel, message) === OutgoingMessageStates.PENDING;\n};\nvar isSentStatus = function isSentStatus(state) {\n  return state === OutgoingMessageStates.SENT || state === OutgoingMessageStates.DELIVERED || state === OutgoingMessageStates.READ;\n};\nvar isAdminMessage = function isAdminMessage(message) {\n  var _a;\n  return message && (((_a = message.isAdminMessage) === null || _a === void 0 ? void 0 : _a.call(message)) || message['messageType'] && message.messageType === 'admin');\n};\nvar isUserMessage = function isUserMessage(message) {\n  var _a;\n  return message && (((_a = message.isUserMessage) === null || _a === void 0 ? void 0 : _a.call(message)) || message['messageType'] && message.messageType === 'user');\n};\nvar isFileMessage = function isFileMessage(message) {\n  var _a;\n  return message && (((_a = message.isFileMessage) === null || _a === void 0 ? void 0 : _a.call(message)) || message['messageType'] && message.messageType === 'file');\n};\nvar isOGMessage = function isOGMessage(message) {\n  var _a;\n  return !!(message && isUserMessage(message) && (message === null || message === void 0 ? void 0 : message.ogMetaData) && ((_a = message === null || message === void 0 ? void 0 : message.ogMetaData) === null || _a === void 0 ? void 0 : _a.url));\n};\nvar isTextMessage = function isTextMessage(message) {\n  return isUserMessage(message) && !isOGMessage(message);\n};\nvar isThumbnailMessage = function isThumbnailMessage(message) {\n  return message && isFileMessage(message) && isSupportedFileView(message.type);\n};\nvar isImageMessage = function isImageMessage(message) {\n  return message && isThumbnailMessage(message) && isImage(message.type);\n};\nvar isVideoMessage = function isVideoMessage(message) {\n  return message && isThumbnailMessage(message) && isVideo(message.type);\n};\nvar isGifMessage = function isGifMessage(message) {\n  return message && isThumbnailMessage(message) && isGif(message.type);\n};\nvar isAudioMessage = function isAudioMessage(message) {\n  return message && isFileMessage(message) && isAudio(message.type);\n};\nvar isEditedMessage = function isEditedMessage(message) {\n  return isUserMessage(message) && (message === null || message === void 0 ? void 0 : message.updatedAt) > 0;\n};\nvar getUIKitMessageTypes = function getUIKitMessageTypes() {\n  return __assign({}, UIKitMessageTypes);\n};\nvar getUIKitMessageType = function getUIKitMessageType(message) {\n  if (isAdminMessage(message)) return UIKitMessageTypes.ADMIN;\n  if (isUserMessage(message)) {\n    return isOGMessage(message) ? UIKitMessageTypes.OG : UIKitMessageTypes.TEXT;\n  }\n  if (isFileMessage(message)) {\n    return isThumbnailMessage(message) ? UIKitMessageTypes.THUMBNAIL : UIKitMessageTypes.FILE;\n  }\n  return UIKitMessageTypes.UNKNOWN;\n};\nvar getSendingMessageStatus = function getSendingMessageStatus() {\n  return __assign({}, SendingMessageStatus);\n};\nvar reducer = function reducer(accumulator, currentValue) {\n  if (Array.isArray(currentValue)) {\n    return __spreadArray(__spreadArray([], accumulator, true), currentValue, true);\n  } else {\n    accumulator.push(currentValue);\n    return accumulator;\n  }\n};\nvar getClassName = function getClassName(classNames) {\n  return Array.isArray(classNames) ? classNames.reduce(reducer, []).join(' ') : classNames;\n};\nvar isReactedBy = function isReactedBy(userId, reaction) {\n  return reaction.userIds.some(function (reactorUserId) {\n    return reactorUserId === userId;\n  });\n};\nvar getEmojiTooltipString = function getEmojiTooltipString(reaction, userId, memberNicknamesMap, stringSet) {\n  var you = '';\n  if (isReactedBy(userId, reaction)) {\n    you = reaction.userIds.length === 1 ? stringSet.TOOLTIP__YOU : stringSet.TOOLTIP__AND_YOU;\n  }\n  return \"\" + reaction.userIds.filter(function (reactorUserId) {\n    return reactorUserId !== userId;\n  }).map(function (reactorUserId) {\n    return memberNicknamesMap.get(reactorUserId) || stringSet.TOOLTIP__UNKNOWN_USER;\n  }).join(', ') + you;\n};\nvar URL_REG = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\nvar isUrl = function isUrl(text) {\n  return URL_REG.test(text);\n};\nvar truncateString = function truncateString(fullStr, strLen) {\n  if (!strLen) strLen = 40;\n  if (fullStr === null || fullStr === undefined) return '';\n  if (fullStr.length <= strLen) return fullStr;\n  var separator = '...';\n  var sepLen = separator.length;\n  var charsToShow = strLen - sepLen;\n  var frontChars = Math.ceil(charsToShow / 2);\n  var backChars = Math.floor(charsToShow / 2);\n  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);\n};\nvar copyToClipboard = function copyToClipboard(text) {\n  // @ts-ignore: Unreachable code error\n  if (window.clipboardData && window.clipboardData.setData) {\n    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n    // @ts-ignore: Unreachable code error\n    return window.clipboardData.setData('Text', text);\n  }\n  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n    var textarea = document.createElement('textarea');\n    textarea.textContent = text;\n    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.\n\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand('copy'); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n  return false;\n};\nvar getEmojiListAll = function getEmojiListAll(emojiContainer) {\n  var _a;\n  return (_a = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories) === null || _a === void 0 ? void 0 : _a.map(function (emojiCategory) {\n    return emojiCategory.emojis;\n  }).reduce(function (prevArr, currArr) {\n    return prevArr.concat(currArr);\n  }, []);\n};\nvar getEmojiMapAll = function getEmojiMapAll(emojiContainer) {\n  var _a;\n  var emojiMap = new Map();\n  (_a = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories) === null || _a === void 0 ? void 0 : _a.forEach(function (category) {\n    var _a;\n    (_a = category === null || category === void 0 ? void 0 : category.emojis) === null || _a === void 0 ? void 0 : _a.forEach(function (emoji) {\n      if (emoji && emoji.key) {\n        emojiMap.set(emoji.key, emoji);\n      }\n    });\n  });\n  return emojiMap;\n};\nvar getUserName = function getUserName(user) {\n  return (user === null || user === void 0 ? void 0 : user.friendName) || (user === null || user === void 0 ? void 0 : user.nickname) || (user === null || user === void 0 ? void 0 : user.userId);\n};\nvar getSenderName = function getSenderName(message) {\n  return message.sender && getUserName(message.sender);\n};\nvar hasSameMembers = function hasSameMembers(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (a == null || b == null) {\n    return false;\n  }\n  if (a.length !== b.length) {\n    return false;\n  }\n  var sortedA = __spreadArray([], a, true).sort();\n  var sortedB = __spreadArray([], b, true).sort();\n  for (var i = 0; i < sortedA.length; ++i) {\n    if (sortedA[i] !== sortedB[i]) {\n      return false;\n    }\n  }\n  return true;\n};\nvar isFriend = function isFriend(user) {\n  return !!(user.friendDiscoveryKey || user.friendName);\n};\nvar filterMessageListParams = function filterMessageListParams(params, message) {\n  var _a, _b, _c;\n  if ((params === null || params === void 0 ? void 0 : params.messageType) && params.messageType !== message.messageType) {\n    return false;\n  }\n  if (((_a = params === null || params === void 0 ? void 0 : params.customTypes) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n    var customTypes = params.customTypes.filter(function (item) {\n      return item !== '*';\n    }); // Because Chat SDK inserts '*' when customTypes is empty\n\n    if (customTypes.length > 0 && !customTypes.includes(message.customType)) {\n      return false;\n    }\n  }\n  if ((params === null || params === void 0 ? void 0 : params.senderUserIds) && ((_b = params === null || params === void 0 ? void 0 : params.senderUserIds) === null || _b === void 0 ? void 0 : _b.length) > 0) {\n    if ((message === null || message === void 0 ? void 0 : message.isUserMessage()) || message.isFileMessage()) {\n      var messageSender = message.sender || message['_sender'];\n      if (!((_c = params === null || params === void 0 ? void 0 : params.senderUserIds) === null || _c === void 0 ? void 0 : _c.includes(messageSender === null || messageSender === void 0 ? void 0 : messageSender.userId))) {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }\n  if (!(params === null || params === void 0 ? void 0 : params.includeParentMessageInfo) && ((message === null || message === void 0 ? void 0 : message.parentMessageId) || (message === null || message === void 0 ? void 0 : message.parentMessage))) {\n    return false;\n  }\n  return true;\n};\nvar filterChannelListParams = function filterChannelListParams(params, channel, currentUserId) {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  if (!(params === null || params === void 0 ? void 0 : params.includeEmpty) && (channel === null || channel === void 0 ? void 0 : channel.lastMessage) && channel.lastMessage === null) {\n    return false;\n  }\n  if (((_a = params === null || params === void 0 ? void 0 : params._searchFilter) === null || _a === void 0 ? void 0 : _a.search_query) && ((_b = params._searchFilter.search_fields) === null || _b === void 0 ? void 0 : _b.length) > 0) {\n    var searchFilter = params._searchFilter;\n    var searchQuery_1 = searchFilter.search_query;\n    var searchFields = searchFilter.search_fields;\n    if (searchQuery_1 && searchFields && searchFields.length > 0) {\n      if (!searchFields.some(function (searchField) {\n        switch (searchField) {\n          case 'channel_name':\n            {\n              return channel.name.toLowerCase().includes(searchQuery_1.toLowerCase());\n            }\n          case 'member_nickname':\n            {\n              return channel.members.some(function (member) {\n                return member.nickname.toLowerCase().includes(searchQuery_1.toLowerCase());\n              });\n            }\n          default:\n            {\n              return true;\n            }\n        }\n      })) {\n        return false;\n      }\n    }\n  }\n  if (((_d = (_c = params === null || params === void 0 ? void 0 : params._userIdsFilter) === null || _c === void 0 ? void 0 : _c.userIds) === null || _d === void 0 ? void 0 : _d.length) > 0) {\n    var userIdsFilter = params._userIdsFilter;\n    var includeMode = userIdsFilter.includeMode,\n      queryType = userIdsFilter.queryType;\n    var userIds = userIdsFilter.userIds;\n    var memberIds_1 = channel.members.map(function (member) {\n      return member.userId;\n    });\n    if (!includeMode) {\n      // exact match\n      if (!userIds.includes(currentUserId)) {\n        userIds.push(currentUserId); // add the caller's userId if not added already.\n      }\n\n      if (channel.members.length > userIds.length) {\n        return false; // userIds may contain one or more non-member(s).\n      }\n\n      if (!hasSameMembers(userIds, memberIds_1)) {\n        return false;\n      }\n    } else if (userIds.length > 0) {\n      // inclusive\n      switch (queryType) {\n        case 'AND':\n          {\n            if (userIds.some(function (userId) {\n              return !memberIds_1.includes(userId);\n            })) {\n              return false;\n            }\n            break;\n          }\n        case 'OR':\n          {\n            if (userIds.every(function (userId) {\n              return !memberIds_1.includes(userId);\n            })) {\n              return false;\n            }\n            break;\n          }\n      }\n    }\n  }\n  if ((params === null || params === void 0 ? void 0 : params.includeEmpty) === false && (channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null) {\n    return false;\n  }\n  if ((params === null || params === void 0 ? void 0 : params.includeFrozen) === false && (channel === null || channel === void 0 ? void 0 : channel.isFrozen) === true) {\n    return false;\n  }\n  if (((_e = params === null || params === void 0 ? void 0 : params.customTypesFilter) === null || _e === void 0 ? void 0 : _e.length) > 0 && !params.customTypesFilter.includes(channel === null || channel === void 0 ? void 0 : channel.customType)) {\n    return false;\n  }\n  if ((params === null || params === void 0 ? void 0 : params.customTypeStartsWithFilter) && !new RegExp(\"^\" + params.customTypeStartsWithFilter).test(channel === null || channel === void 0 ? void 0 : channel.customType)) {\n    return false;\n  }\n  if ((params === null || params === void 0 ? void 0 : params.channelNameContainsFilter) && !((_f = channel === null || channel === void 0 ? void 0 : channel.name) === null || _f === void 0 ? void 0 : _f.toLowerCase().includes(params.channelNameContainsFilter.toLowerCase()))) {\n    return false;\n  }\n  if (params === null || params === void 0 ? void 0 : params.nicknameContainsFilter) {\n    var lowerCasedSubString_1 = params.nicknameContainsFilter.toLowerCase();\n    if ((_g = channel === null || channel === void 0 ? void 0 : channel.members) === null || _g === void 0 ? void 0 : _g.every(function (member) {\n      return !member.nickname.toLowerCase().includes(lowerCasedSubString_1);\n    })) {\n      return false;\n    }\n  }\n  if (((_h = params === null || params === void 0 ? void 0 : params.channelUrlsFilter) === null || _h === void 0 ? void 0 : _h.length) > 0 && !params.channelUrlsFilter.includes(channel === null || channel === void 0 ? void 0 : channel.url)) {\n    return false;\n  }\n  if (params === null || params === void 0 ? void 0 : params.memberStateFilter) {\n    switch (params.memberStateFilter) {\n      case 'joined_only':\n        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'joined') {\n          return false;\n        }\n        break;\n      case 'invited_only':\n        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited') {\n          return false;\n        }\n        break;\n      case 'invited_by_friend':\n        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited' || !isFriend(channel.inviter)) {\n          return false;\n        }\n        break;\n      case 'invited_by_non_friend':\n        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited' || isFriend(channel.inviter)) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params === null || params === void 0 ? void 0 : params.hiddenChannelFilter) {\n    switch (params.hiddenChannelFilter) {\n      case 'unhidden_only':\n        if ((channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'unhidden') {\n          return false;\n        }\n        break;\n      case 'hidden_only':\n        if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden)) {\n          return false;\n        }\n        break;\n      case 'hidden_allow_auto_unhide':\n        if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'hidden_allow_auto_unhide') {\n          return false;\n        }\n        break;\n      case 'hidden_prevent_auto_unhide':\n        if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'hidden_prevent_auto_unhide') {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params === null || params === void 0 ? void 0 : params.unreadChannelFilter) {\n    switch (params.unreadChannelFilter) {\n      case 'unread_message':\n        if ((channel === null || channel === void 0 ? void 0 : channel.unreadMessageCount) === 0) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params === null || params === void 0 ? void 0 : params.publicChannelFilter) {\n    switch (params.publicChannelFilter) {\n      case 'public':\n        if (!(channel === null || channel === void 0 ? void 0 : channel.isPublic)) {\n          return false;\n        }\n        break;\n      case 'private':\n        if (channel === null || channel === void 0 ? void 0 : channel.isPublic) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params === null || params === void 0 ? void 0 : params.superChannelFilter) {\n    switch (params.superChannelFilter) {\n      case 'super':\n        if (!(channel === null || channel === void 0 ? void 0 : channel.isSuper)) {\n          return false;\n        }\n        break;\n      case 'nonsuper':\n        if (channel === null || channel === void 0 ? void 0 : channel.isSuper) {\n          return false;\n        }\n        break;\n    }\n  }\n  return true;\n};\nvar binarySearch = function binarySearch(list, number) {\n  var pivot = Math.floor(list.length / 2);\n  if (list[pivot] === number) {\n    return pivot;\n  }\n  var leftList = list.slice(0, pivot);\n  var rightList = list.slice(pivot + 1, list.length);\n  if (list[pivot] > number) {\n    return pivot + 1 + (rightList.length === 0 ? 0 : binarySearch(rightList, number));\n  } else {\n    return leftList.length === 0 ? pivot : binarySearch(leftList, number);\n  }\n}; // This is required when channel is displayed on channel list by filter\n\nvar getChannelsWithUpsertedChannel = function getChannelsWithUpsertedChannel(channels, channel) {\n  var _a;\n  if (channels.some(function (ch) {\n    return ch.url === channel.url;\n  })) {\n    return channels.map(function (ch) {\n      return ch.url === channel.url ? channel : ch;\n    });\n  }\n  var targetIndex = binarySearch(channels.map(function (channel) {\n    var _a;\n    return ((_a = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _a === void 0 ? void 0 : _a.createdAt) || (channel === null || channel === void 0 ? void 0 : channel.createdAt);\n  }), ((_a = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _a === void 0 ? void 0 : _a.createdAt) || (channel === null || channel === void 0 ? void 0 : channel.createdAt));\n  return __spreadArray(__spreadArray(__spreadArray([], channels.slice(0, targetIndex), true), [channel], false), channels.slice(targetIndex, channels.length), true);\n};\nexport { isVideo as A, isGif as B, isFileMessage as C, isSupportedFileView as D, getUIKitMessageTypes as E, getSenderName as F, isTextMessage as G, isOGMessage as H, getUIKitMessageType as I, isImageMessage as J, isAudioMessage as K, isImage as L, getOutgoingMessageStates as a, getSendingMessageStatus as b, filterMessageListParams as c, getOutgoingMessageState as d, isSentStatus as e, filterChannelListParams as f, getChannelsWithUpsertedChannel as g, isUserMessage as h, isTextuallyNull as i, isFailedMessage as j, isPendingMessage as k, isSentMessage as l, getClassName as m, copyToClipboard as n, getEmojiListAll as o, getEmojiMapAll as p, isReactedBy as q, getEmojiTooltipString as r, isEditedMessage as s, truncateString as t, getUIKitFileType as u, isVideoMessage as v, isGifMessage as w, isUrl as x, getUIKitFileTypes as y, isThumbnailMessage as z };","map":{"version":3,"names":["SUPPORTED_MIMES","IMAGE","VIDEO","AUDIO","UIKitMessageTypes","ADMIN","TEXT","FILE","THUMBNAIL","OG","UNKNOWN","UIKitFileTypes","GIF","OTHERS","SendingMessageStatus","NONE","SUCCEEDED","FAILED","PENDING","OutgoingMessageStates","SENT","DELIVERED","READ","isTextuallyNull","text","isImage","type","indexOf","isVideo","isGif","isSupportedFileView","isAudio","getUIKitFileTypes","__assign","getUIKitFileType","getOutgoingMessageStates","getOutgoingMessageState","channel","message","sendingStatus","_a","isGroupChannel","call","getUnreadMemberCount","getUndeliveredMemberCount","isSentMessage","isFailedMessage","isPendingMessage","isSentStatus","state","isAdminMessage","messageType","isUserMessage","isFileMessage","isOGMessage","ogMetaData","url","isTextMessage","isThumbnailMessage","isImageMessage","isVideoMessage","isGifMessage","isAudioMessage","isEditedMessage","updatedAt","getUIKitMessageTypes","getUIKitMessageType","getSendingMessageStatus","reducer","accumulator","currentValue","Array","isArray","__spreadArray","push","getClassName","classNames","reduce","join","isReactedBy","userId","reaction","userIds","some","reactorUserId","getEmojiTooltipString","memberNicknamesMap","stringSet","you","length","TOOLTIP__YOU","TOOLTIP__AND_YOU","filter","map","get","TOOLTIP__UNKNOWN_USER","URL_REG","isUrl","test","truncateString","fullStr","strLen","undefined","separator","sepLen","charsToShow","frontChars","Math","ceil","backChars","floor","substr","copyToClipboard","window","clipboardData","setData","document","queryCommandSupported","textarea","createElement","textContent","style","position","body","appendChild","select","execCommand","ex","removeChild","getEmojiListAll","emojiContainer","emojiCategories","emojiCategory","emojis","prevArr","currArr","concat","getEmojiMapAll","emojiMap","Map","forEach","category","emoji","key","set","getUserName","user","friendName","nickname","getSenderName","sender","hasSameMembers","a","b","sortedA","sort","sortedB","i","isFriend","friendDiscoveryKey","filterMessageListParams","params","customTypes","item","includes","customType","senderUserIds","_b","messageSender","_c","includeParentMessageInfo","parentMessageId","parentMessage","filterChannelListParams","currentUserId","includeEmpty","lastMessage","_searchFilter","search_query","search_fields","searchFilter","searchQuery_1","searchFields","searchField","name","toLowerCase","members","member","_d","_userIdsFilter","userIdsFilter","includeMode","queryType","memberIds_1","every","includeFrozen","isFrozen","_e","customTypesFilter","customTypeStartsWithFilter","RegExp","channelNameContainsFilter","_f","nicknameContainsFilter","lowerCasedSubString_1","_g","_h","channelUrlsFilter","memberStateFilter","myMemberState","inviter","hiddenChannelFilter","isHidden","hiddenState","unreadChannelFilter","unreadMessageCount","publicChannelFilter","isPublic","superChannelFilter","isSuper","binarySearch","list","number","pivot","leftList","slice","rightList","getChannelsWithUpsertedChannel","channels","ch","targetIndex","createdAt"],"sources":["C:\\Users\\이경민\\node_modules\\sendbird-uikit\\src\\utils\\index.ts"],"sourcesContent":["import { AdminMessage, Emoji, EmojiCategory, EmojiContainer, FileMessage, GroupChannel, GroupChannelListQuery, Member, MessageListParams, OpenChannel, Reaction, SendBirdInstance, User, UserMessage } from \"sendbird\";\n\n// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types\nconst SUPPORTED_MIMES = {\n  IMAGE: [\n    'image/jpeg',\n    'image/jpg',\n    'image/png',\n    'image/gif',\n    'image/svg+xml',\n    'image/webp', // not supported in IE\n  ],\n  VIDEO: [\n    'video/mpeg',\n    'video/ogg',\n    'video/webm',\n    'video/mp4',\n  ],\n  AUDIO: [\n    'audio/aac',\n    'audio/midi',\n    'audio/x-midi',\n    'audio/mpeg',\n    'audio/ogg',\n    'audio/opus',\n    'audio/wav',\n    'audio/webm',\n    'audio/3gpp',\n    'audio/3gpp2',\n    'audio/mp3',\n  ],\n};\n\nexport interface UIKitMessageTypes {\n  ADMIN: \"ADMIN\",\n  TEXT: \"TEXT\",\n  FILE: \"FILE\",\n  THUMBNAIL: \"THUMBNAIL\",\n  OG: \"OG\",\n  UNKNOWN: \"UNKNOWN\",\n}\nconst UIKitMessageTypes: UIKitMessageTypes = {\n  ADMIN: \"ADMIN\",\n  TEXT: \"TEXT\",\n  FILE: \"FILE\",\n  THUMBNAIL: \"THUMBNAIL\",\n  OG: \"OG\",\n  UNKNOWN: \"UNKNOWN\",\n};\nexport interface UIKitFileTypes {\n  IMAGE: \"IMAGE\",\n  AUDIO: \"AUDIO\",\n  VIDEO: \"VIDEO\",\n  GIF: \"GIF\",\n  OTHERS: \"OTHERS\",\n}\nexport const UIKitFileTypes: UIKitFileTypes = {\n  IMAGE: \"IMAGE\",\n  AUDIO: \"AUDIO\",\n  VIDEO: \"VIDEO\",\n  GIF: \"GIF\",\n  OTHERS: \"OTHERS\",\n};\n\nexport interface SendingMessageStatus {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending',\n}\nconst SendingMessageStatus: SendingMessageStatus = {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending',\n};\n\nexport interface OutgoingMessageStates {\n  NONE: 'NONE',\n  PENDING: 'PENDING',\n  SENT: 'SENT',\n  FAILED: 'FAILED',\n  DELIVERED: 'DELIVERED',\n  READ: 'READ',\n  // delivered and read are only in group channel\n}\nconst OutgoingMessageStates: OutgoingMessageStates = {\n  NONE: 'NONE',\n  PENDING: 'PENDING',\n  SENT: 'SENT',\n  FAILED: 'FAILED',\n  DELIVERED: 'DELIVERED',\n  READ: 'READ',\n};\n\nexport type CoreMessageType = AdminMessage | UserMessage | FileMessage;\n\nexport const isTextuallyNull = (text: string): boolean => {\n  if (text === '' || text === null) {\n    return true;\n  }\n  return false;\n};\n\nexport const isImage = (type: string): boolean => SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;\nexport const isVideo = (type: string): boolean => SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;\nexport const isGif = (type: string): boolean => type === 'image/gif';\nexport const isSupportedFileView = (type: string): boolean => isImage(type) || isVideo(type);\nexport const isAudio = (type: string): boolean => SUPPORTED_MIMES.AUDIO.indexOf(type) >= 0;\n\nexport const getUIKitFileTypes = (): UIKitFileTypes => ({ ...UIKitFileTypes });\nexport const getUIKitFileType = (type: string): string => {\n  if (isGif(type)) return UIKitFileTypes.GIF;\n  if (isImage(type)) return UIKitFileTypes.IMAGE;\n  if (isVideo(type)) return UIKitFileTypes.VIDEO;\n  if (isAudio(type)) return UIKitFileTypes.AUDIO;\n  return UIKitFileTypes.OTHERS;\n};\nexport const getOutgoingMessageStates = (): OutgoingMessageStates => ({ ...OutgoingMessageStates });\nexport const getOutgoingMessageState = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): string => {\n  if (message.sendingStatus === 'pending') return OutgoingMessageStates.PENDING;\n  if (message.sendingStatus === 'failed') return OutgoingMessageStates.FAILED;\n  if (channel?.isGroupChannel?.()) {\n    /* GroupChannel only */\n    if ((channel as GroupChannel).getUnreadMemberCount(message) === 0) {\n      return OutgoingMessageStates.READ;\n    } else if ((channel as GroupChannel).getUndeliveredMemberCount(message) === 0) {\n      return OutgoingMessageStates.DELIVERED;\n    }\n  }\n  if (message.sendingStatus === 'succeeded') return OutgoingMessageStates.SENT;\n  return OutgoingMessageStates.NONE;\n};\nexport const isSentMessage = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.SENT\n  || getOutgoingMessageState(channel, message) === OutgoingMessageStates.DELIVERED\n  || getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ\n);\nexport const isDeliveredMessage = (channel: GroupChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.DELIVERED\n  || getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ\n);\nexport const isReadMessage = (channel: GroupChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ\n);\n// TODO: Remove channel from the params, it seems unnecessary\nexport const isFailedMessage = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.FAILED\n);\nexport const isPendingMessage = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.PENDING\n);\nexport const isSentStatus = (state: string): boolean => (\n  state === OutgoingMessageStates.SENT\n  || state === OutgoingMessageStates.DELIVERED\n  || state === OutgoingMessageStates.READ\n);\n\nexport const isAdminMessage = (message: AdminMessage): boolean => (\n  message && (message.isAdminMessage?.() || (message['messageType'] && message.messageType === 'admin'))\n);\nexport const isUserMessage = (message: UserMessage): boolean => (\n  message && (message.isUserMessage?.() || (message['messageType'] && message.messageType === 'user'))\n);\nexport const isFileMessage = (message: FileMessage): boolean => (\n  message && (message.isFileMessage?.() || (message['messageType'] && message.messageType === 'file'))\n);\n\nexport const isOGMessage = (message: UserMessage): boolean => !!(\n  message && isUserMessage(message) && message?.ogMetaData && message?.ogMetaData?.url\n);\nexport const isTextMessage = (message: UserMessage): boolean => isUserMessage(message) && !isOGMessage(message);\nexport const isThumbnailMessage = (message: FileMessage): boolean => message && isFileMessage(message) && isSupportedFileView(message.type);\nexport const isImageMessage = (message: FileMessage): boolean => message && isThumbnailMessage(message) && isImage(message.type);\nexport const isVideoMessage = (message: FileMessage): boolean => message && isThumbnailMessage(message) && isVideo(message.type);\nexport const isGifMessage = (message: FileMessage): boolean => message && isThumbnailMessage(message) && isGif(message.type);\nexport const isAudioMessage = (message: FileMessage): boolean => message && isFileMessage(message) && isAudio(message.type);\n\nexport const isEditedMessage = (message: UserMessage): boolean => isUserMessage(message) && (message?.updatedAt > 0);\nexport const isEnabledOGMessage = (message: UserMessage): boolean => (\n  (!message || !message.ogMetaData || !message.ogMetaData.url) ? false : true\n);\n\nexport const getUIKitMessageTypes = (): UIKitMessageTypes => ({ ...UIKitMessageTypes });\nexport const getUIKitMessageType = (message: CoreMessageType): string => {\n  if (isAdminMessage(message as AdminMessage)) return UIKitMessageTypes.ADMIN;\n  if (isUserMessage(message as UserMessage)) {\n    return isOGMessage(message as UserMessage) ? UIKitMessageTypes.OG : UIKitMessageTypes.TEXT;\n  }\n  if (isFileMessage(message as FileMessage)) {\n    return isThumbnailMessage(message as FileMessage) ? UIKitMessageTypes.THUMBNAIL : UIKitMessageTypes.FILE;\n  }\n  return UIKitMessageTypes.UNKNOWN;\n};\nexport const getSendingMessageStatus = (): SendingMessageStatus => ({ ...SendingMessageStatus });\n\nconst reducer = (accumulator: Array<string>, currentValue: string | Array<string>): Array<any> => {\n  if (Array.isArray(currentValue)) {\n    return [...accumulator, ...currentValue];\n  } else {\n    accumulator.push(currentValue);\n    return accumulator;\n  }\n};\nexport const getClassName = (classNames: string | Array<string | Array<string>>): string => (\n  Array.isArray(classNames)\n    ? classNames.reduce(reducer, []).join(' ')\n    : classNames\n);\nexport const isReactedBy = (userId: string, reaction: Reaction): boolean => (\n  reaction.userIds.some((reactorUserId: string): boolean => reactorUserId === userId)\n);\ninterface StringSet {\n  TOOLTIP__YOU: string;\n  TOOLTIP__AND_YOU: string;\n  TOOLTIP__UNKNOWN_USER: string;\n}\nexport const getEmojiTooltipString = (reaction: Reaction, userId: string, memberNicknamesMap: Map<string, string>, stringSet: StringSet): string => {\n  let you = '';\n  if (isReactedBy(userId, reaction)) {\n    you = reaction.userIds.length === 1 ? stringSet.TOOLTIP__YOU : stringSet.TOOLTIP__AND_YOU;\n  }\n  return (`${reaction.userIds\n    .filter((reactorUserId: string) => reactorUserId !== userId)\n    .map((reactorUserId: string) => (memberNicknamesMap.get(reactorUserId) || stringSet.TOOLTIP__UNKNOWN_USER))\n    .join(', ')}${you}`);\n};\n\n// TODO: Use the interface after language tranlsatation of Sendbird.js\ninterface UIKitStore {\n  stores: {\n    sdkStore: {\n      sdk: SendBirdInstance,\n    },\n    userStore: {\n      user: User,\n    },\n  },\n  config: {\n    useReaction: boolean,\n  }\n}\nexport const getCurrentUserId = (store: UIKitStore): string => (store?.stores?.userStore?.user?.userId);\nexport const getUseReaction = (store: UIKitStore, channel: GroupChannel | OpenChannel): boolean => {\n  if (!store?.config?.useReaction)\n    return false;\n  if (!store?.stores?.sdkStore?.sdk?.appInfo?.isUsingReaction)\n    return false;\n  if (channel?.isGroupChannel())\n    return !((channel as GroupChannel).isBroadcast || (channel as GroupChannel).isSuper);\n  return store?.config?.useReaction;\n};\n\nexport const isMessageSentByMe = (userId: string, message: UserMessage | FileMessage): boolean => (\n  (userId && message?.sender?.userId) && userId === message.sender.userId\n);\n\nconst URL_REG = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\nexport const isUrl = (text: string): boolean => URL_REG.test(text);\n\nexport const truncateString = (fullStr: string, strLen?: number): string => {\n  if (!strLen) strLen = 40;\n  if (fullStr === null || fullStr === undefined) return '';\n  if (fullStr.length <= strLen) return fullStr;\n  const separator = '...';\n  const sepLen = separator.length;\n  const charsToShow = strLen - sepLen;\n  const frontChars = Math.ceil(charsToShow / 2);\n  const backChars = Math.floor(charsToShow / 2);\n  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);\n};\n\nexport const copyToClipboard = (text: string): boolean => {\n  // @ts-ignore: Unreachable code error\n  if (window.clipboardData && window.clipboardData.setData) {\n    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n    // @ts-ignore: Unreachable code error\n    return window.clipboardData.setData('Text', text);\n  }\n  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n    const textarea = document.createElement('textarea');\n    textarea.textContent = text;\n    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand('copy'); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n  return false;\n};\n\nexport const getEmojiListAll = (emojiContainer: EmojiContainer): Array<Emoji> => (\n  emojiContainer?.emojiCategories?.map((emojiCategory: EmojiCategory) => emojiCategory.emojis)\n    .reduce((prevArr: Array<Emoji>, currArr: Array<Emoji>) => prevArr.concat(currArr), [])\n);\nexport const getEmojiMapAll = (emojiContainer: EmojiContainer): Map<string, Emoji> => {\n  const emojiMap = new Map();\n  emojiContainer?.emojiCategories?.forEach((category: EmojiCategory) => {\n    category?.emojis?.forEach((emoji: Emoji): void => {\n      if (emoji && emoji.key) {\n        emojiMap.set(emoji.key, emoji);\n      }\n    });\n  });\n  return emojiMap;\n};\n\nexport const getUserName = (user: User): string => (user?.friendName || user?.nickname || user?.userId);\nexport const getSenderName = (message: UserMessage | FileMessage): string => (message.sender && getUserName(message.sender));\n\nexport const hasSameMembers = <T>(a: T[], b: T[]): boolean => {\n  if (a === b) {\n    return true;\n  }\n  if (a == null || b == null) {\n    return false;\n  }\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  const sortedA = [...a].sort();\n  const sortedB = [...b].sort();\n\n  for (let i = 0; i < sortedA.length; ++i) {\n    if (sortedA[i] !== sortedB[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nexport const isFriend = (user: User): boolean => !!(user.friendDiscoveryKey || user.friendName);\n\nexport const filterMessageListParams = (params: MessageListParams, message: UserMessage | FileMessage): boolean => {\n  if (params?.messageType && params.messageType !== message.messageType) {\n    return false;\n  }\n  if (params?.customTypes?.length > 0) {\n    const customTypes = params.customTypes.filter((item) => item !== '*');\n    // Because Chat SDK inserts '*' when customTypes is empty\n    if (customTypes.length > 0 && !customTypes.includes(message.customType)) {\n      return false;\n    }\n  }\n  if (params?.senderUserIds && params?.senderUserIds?.length > 0) {\n    if (message?.isUserMessage() || message.isFileMessage()) {\n      const messageSender = (message as UserMessage | FileMessage).sender || message['_sender'];\n      if (!params?.senderUserIds?.includes(messageSender?.userId)) {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }\n  if (!params?.includeParentMessageInfo && (message?.parentMessageId || message?.parentMessage)) {\n    return false;\n  }\n  return true;\n};\n\ninterface SDKChannelListParamsPrivateProps extends GroupChannelListQuery {\n  _searchFilter: {\n    search_query: string,\n    search_fields: Array<'member_nickname' | 'channel_name'>,\n  };\n  _userIdsFilter: {\n    userIds: Array<string>,\n    includeMode: boolean,\n    queryType: 'AND' | 'OR',\n  };\n}\nexport const filterChannelListParams = (params: SDKChannelListParamsPrivateProps, channel: GroupChannel, currentUserId: string): boolean => {\n  if (!params?.includeEmpty && channel?.lastMessage && channel.lastMessage === null) {\n    return false;\n  }\n  if (params?._searchFilter?.search_query && params._searchFilter.search_fields?.length > 0) {\n    const searchFilter = params._searchFilter;\n    const searchQuery = searchFilter.search_query;\n    const searchFields = searchFilter.search_fields;\n    if (searchQuery && searchFields && searchFields.length > 0) {\n      if (!searchFields.some((searchField) => {\n        switch (searchField) {\n          case 'channel_name': {\n            return channel.name.toLowerCase().includes(searchQuery.toLowerCase());\n          }\n          case 'member_nickname': {\n            return channel.members.some((member: Member) => member.nickname.toLowerCase().includes(searchQuery.toLowerCase()));\n          }\n          default: {\n            return true;\n          }\n        }\n      })) {\n        return false;\n      }\n    }\n  }\n  if (params?._userIdsFilter?.userIds?.length > 0) {\n    const userIdsFilter = params._userIdsFilter;\n    const { includeMode, queryType } = userIdsFilter;\n    const userIds: string[] = userIdsFilter.userIds;\n    const memberIds = channel.members.map((member: Member) => member.userId);\n    if (!includeMode) { // exact match\n      if (!userIds.includes(currentUserId)) {\n        userIds.push(currentUserId); // add the caller's userId if not added already.\n      }\n      if (channel.members.length > userIds.length) {\n        return false; // userIds may contain one or more non-member(s).\n      }\n      if (!hasSameMembers(userIds, memberIds)) {\n        return false;\n      }\n    } else if (userIds.length > 0) { // inclusive\n      switch (queryType) {\n        case 'AND': {\n          if (userIds.some((userId: string) => !memberIds.includes(userId))) {\n            return false;\n          }\n          break;\n        }\n        case 'OR': {\n          if (userIds.every((userId: string) => !memberIds.includes(userId))) {\n            return false;\n          }\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    }\n  }\n  if (params?.includeEmpty === false && channel?.lastMessage === null) {\n    return false;\n  }\n  if (params?.includeFrozen === false && channel?.isFrozen === true) {\n    return false;\n  }\n  if (params?.customTypesFilter?.length > 0 && !params.customTypesFilter.includes(channel?.customType)) {\n    return false;\n  }\n  if (params?.customTypeStartsWithFilter && !new RegExp(`^${params.customTypeStartsWithFilter}`).test(channel?.customType)) {\n    return false;\n  }\n  if (params?.channelNameContainsFilter && !channel?.name?.toLowerCase().includes(params.channelNameContainsFilter.toLowerCase())) {\n    return false;\n  }\n  if (params?.nicknameContainsFilter) {\n    const lowerCasedSubString = params.nicknameContainsFilter.toLowerCase();\n    if (channel?.members?.every((member: Member) => !member.nickname.toLowerCase().includes(lowerCasedSubString))) {\n      return false;\n    }\n  }\n  if (params?.channelUrlsFilter?.length > 0 && !params.channelUrlsFilter.includes(channel?.url)) {\n    return false;\n  }\n  if (params?.memberStateFilter) {\n    switch (params.memberStateFilter) {\n      case 'joined_only':\n        if (channel?.myMemberState !== 'joined') {\n          return false;\n        }\n        break;\n      case 'invited_only':\n        if (channel?.myMemberState !== 'invited') {\n          return false;\n        }\n        break;\n      case 'invited_by_friend':\n        if (channel?.myMemberState !== 'invited' || !isFriend(channel.inviter)) {\n          return false;\n        }\n        break;\n      case 'invited_by_non_friend':\n        if (channel?.myMemberState !== 'invited' || isFriend(channel.inviter)) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.hiddenChannelFilter) {\n    switch (params.hiddenChannelFilter) {\n      case 'unhidden_only':\n        if (channel?.isHidden || channel?.hiddenState !== 'unhidden') {\n          return false;\n        }\n        break;\n      case 'hidden_only':\n        if (!channel?.isHidden) {\n          return false;\n        }\n        break;\n      case 'hidden_allow_auto_unhide':\n        if (!channel?.isHidden || channel?.hiddenState !== 'hidden_allow_auto_unhide') {\n          return false;\n        }\n        break;\n      case 'hidden_prevent_auto_unhide':\n        if (!channel?.isHidden || channel?.hiddenState !== 'hidden_prevent_auto_unhide') {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.unreadChannelFilter) {\n    switch (params.unreadChannelFilter) {\n      case 'unread_message':\n        if (channel?.unreadMessageCount === 0) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.publicChannelFilter) {\n    switch (params.publicChannelFilter) {\n      case 'public':\n        if (!channel?.isPublic) {\n          return false;\n        }\n        break;\n      case 'private':\n        if (channel?.isPublic) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.superChannelFilter) {\n    switch (params.superChannelFilter) {\n      case 'super':\n        if (!channel?.isSuper) {\n          return false;\n        }\n        break;\n      case 'nonsuper':\n        if (channel?.isSuper) {\n          return false;\n        }\n        break;\n    }\n  }\n  return true;\n};\n\nexport const binarySearch = (list: Array<number>, number: number): number => {// [100, 99, 98, 97, ...]\n  const pivot = Math.floor(list.length / 2);\n  if (list[pivot] === number) {\n    return pivot;\n  }\n  const leftList = list.slice(0, pivot);\n  const rightList = list.slice(pivot + 1, list.length);\n  if (list[pivot] > number) {\n    return pivot + 1 + (rightList.length === 0 ? 0 : binarySearch(rightList, number));\n  } else {\n    return (leftList.length === 0) ? pivot : binarySearch(leftList, number);\n  }\n};\n// This is required when channel is displayed on channel list by filter\nexport const getChannelsWithUpsertedChannel = (channels: Array<GroupChannel>, channel: GroupChannel): Array<GroupChannel> => {\n  if (channels.some((ch: GroupChannel) => ch.url === channel.url)) {\n    return channels.map((ch: GroupChannel) => (ch.url === channel.url ? channel : ch));\n  }\n  const targetIndex = binarySearch(\n    channels.map((channel: GroupChannel) => channel?.lastMessage?.createdAt || channel?.createdAt),\n    channel?.lastMessage?.createdAt || channel?.createdAt\n  );\n  return [...channels.slice(0, targetIndex), channel, ...channels.slice(targetIndex, channels.length)];\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}