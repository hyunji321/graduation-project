{"ast":null,"code":"import _slicedToArray from \"C:/Users/\\uC774\\uACBD\\uBBFC/IdeaProjects/sendbird-uikit-whatsapp-sample/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React__default, { useState, useEffect, useMemo } from 'react';\nimport { ProgressBar, ProgressBarColorTypes } from './ProgressBar.js';\nimport { useVoicePlayer } from '../VoicePlayer/useVoicePlayer.js';\nimport { PlaybackTime } from './PlaybackTime.js';\nimport Loader from './Loader.js';\nimport Icon, { IconTypes, IconColors } from './Icon.js';\nimport { a as LabelTypography, b as LabelColors } from '../index-63949de5.js';\nimport { a as VOICE_PLAYER_STATUS } from '../index-5c985608.js';\nimport '../consts-95d8566e.js';\nimport '../VoiceRecorder/context.js';\nimport '../useSendbirdStateContext.js';\nimport '../withSendbird.js';\nimport '../_rollupPluginBabelHelpers-6bb0305c.js';\nimport 'prop-types';\nimport '../stringSet-13bbd4a2.js';\nvar VoiceMessageItemBody = function VoiceMessageItemBody(_ref) {\n  var _message$reactions2;\n  var className = _ref.className,\n    message = _ref.message,\n    channelUrl = _ref.channelUrl,\n    _ref$isByMe = _ref.isByMe,\n    isByMe = _ref$isByMe === void 0 ? false : _ref$isByMe,\n    _ref$isReactionEnable = _ref.isReactionEnabled,\n    isReactionEnabled = _ref$isReactionEnable === void 0 ? false : _ref$isReactionEnable;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    usingReaction = _useState2[0],\n    setUsingReaction = _useState2[1];\n  var _useVoicePlayer = useVoicePlayer({\n      channelUrl: channelUrl,\n      key: \"\".concat(message === null || message === void 0 ? void 0 : message.messageId),\n      audioFileUrl: message === null || message === void 0 ? void 0 : message.url\n    }),\n    play = _useVoicePlayer.play,\n    pause = _useVoicePlayer.pause,\n    _useVoicePlayer$playb = _useVoicePlayer.playbackTime,\n    playbackTime = _useVoicePlayer$playb === void 0 ? 0 : _useVoicePlayer$playb,\n    duration = _useVoicePlayer.duration,\n    _useVoicePlayer$playi = _useVoicePlayer.playingStatus,\n    playingStatus = _useVoicePlayer$playi === void 0 ? VOICE_PLAYER_STATUS.IDLE : _useVoicePlayer$playi;\n  useEffect(function () {\n    var _message$reactions;\n    if (isReactionEnabled && (message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : _message$reactions.length) > 0) {\n      setUsingReaction(true);\n    } else {\n      setUsingReaction(false);\n    }\n  }, [isReactionEnabled, message === null || message === void 0 ? void 0 : (_message$reactions2 = message.reactions) === null || _message$reactions2 === void 0 ? void 0 : _message$reactions2.length]);\n  var progresBarMaxSize = useMemo(function () {\n    if (message !== null && message !== void 0 && message.metaArrays) {\n      var _message$metaArrays$f;\n      var _duration = message === null || message === void 0 ? void 0 : (_message$metaArrays$f = message.metaArrays.find(function (metaArray) {\n        return metaArray.key === 'KEY_VOICE_MESSAGE_DURATION';\n      })) === null || _message$metaArrays$f === void 0 ? void 0 : _message$metaArrays$f.value[0];\n      return _duration && parseInt(_duration);\n    }\n    return 1;\n  }, [message === null || message === void 0 ? void 0 : message.metaArrays]);\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-voice-message-item-body \".concat(className, \" \").concat(usingReaction ? 'is-reactions-contained' : '')\n  }, /*#__PURE__*/React__default.createElement(ProgressBar, {\n    className: \"sendbird-voice-message-item-body__progress-bar\",\n    maxSize: duration || progresBarMaxSize,\n    currentSize: playbackTime,\n    colorType: isByMe ? ProgressBarColorTypes.PRIMARY : ProgressBarColorTypes.GRAY\n  }), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-voice-message-item-body__status-button\"\n  }, (playingStatus === VOICE_PLAYER_STATUS.IDLE || playingStatus === VOICE_PLAYER_STATUS.PAUSED) && /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-voice-message-item-body__status-button__button\",\n    onClick: play\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    width: \"18px\",\n    height: \"18px\",\n    type: IconTypes.PLAY,\n    fillColor: IconColors.PRIMARY\n  })), playingStatus === VOICE_PLAYER_STATUS.PREPARING && /*#__PURE__*/React__default.createElement(Loader, {\n    width: \"22.2px\",\n    height: \"22.2px\"\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    width: \"22.2px\",\n    height: \"22.2px\",\n    type: IconTypes.SPINNER,\n    fillColor: IconColors.PRIMARY_2\n  })), playingStatus === VOICE_PLAYER_STATUS.PLAYING && /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-voice-message-item-body__status-button__button\",\n    onClick: function onClick() {\n      pause();\n    }\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-voice-message-item-body__status-button__button__pause\"\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-voice-message-item-body__status-button__button__pause__inner\"\n  }), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-voice-message-item-body__status-button__button__pause__inner\"\n  })))), /*#__PURE__*/React__default.createElement(PlaybackTime, {\n    className: \"sendbird-voice-message-item-body__playback-time\",\n    time: progresBarMaxSize - playbackTime,\n    labelType: LabelTypography.BODY_1,\n    labelColor: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1\n  }));\n};\nexport { VoiceMessageItemBody, VoiceMessageItemBody as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;AAqBaA,wBAAoB,GAAGC,SAAvBD,oBAAoB,CAAGC,MAMiB;EAAA;EAAA,IALnDC,SAAS,GAKiBD,KAL1BC,SAAS;IACTC,OAAO,GAImBF,KAJ1BE,OAAO;IACPC,UAAU,GAGgBH,KAH1BG,UAAU;IAAA,cAGgBH,KAF1BI,MAAM;IAANA,MAAM,4BAAG,KAAK;IAAA,wBAEYJ,KAD1BK,iBAAiB;IAAjBA,iBAAiB,sCAAG;EAEpB,gBAA0CC,QAAQ,CAAC,KAAK,CAAC;IAAA;IAAlDC,aAAa;IAAEC,gBAAgB;EACtC,sBAMIC,cAAc,CAAC;MACjBN,UAAU,EAAVA,UAAU;MACVO,GAAG,YAAKR,OAAO,aAAPA,OAAO,KAAPA,yBAAO,CAAES,SAAU,CAAC;MAC5BC,YAAY,EAAEV,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEW;IACzB,CAAC,CAAC;IATAC,IAAI,mBAAJA,IAAI;IACJC,KAAK,mBAALA,KAAK;IAAA,wCACLC,YAAY;IAAZA,YAAY,sCAAG,CAAC;IAChBC,QAAQ,mBAARA,QAAQ;IAAA,wCACRC,aAAa;IAAbA,aAAa,sCAAGC,mBAAmB,CAACC;EAOtCC,SAAS,CAAC,YAAM;IAAA;IACd,IAAIhB,iBAAiB,IAAI,QAAO,aAAPH,OAAO,6CAAPA,OAAO,CAAEoB,SAAS,qCAAlBC,qCAAoBC,MAAM,IAAG,CAAC,EAAE;MACvDhB,gBAAgB,CAAC,IAAI,CAAC;IACxB,CAAC,MAAM;MACLA,gBAAgB,CAAC,KAAK,CAAC;IACzB;GACD,EAAE,CAACH,iBAAiB,EAAEH,OAAO,KAAPA,eAAO,8CAAPA,OAAO,CAAEoB,SAAS,wDAAlBG,oBAAoBD,MAAM,CAAC,CAAC;EACnD,IAAME,iBAAiB,GAAGC,OAAO,CAAC,YAAM;IACtC,IAAIzB,OAAO,KAAPA,eAAO,eAAPA,OAAO,CAAE0B,UAAU,EAAE;MAAA;MACvB,IAAMX,SAAQ,GAAGf,OAAO,aAAPA,OAAO,gDAAPA,OAAO,CAAE0B,UAAU,CAACC,IAAI,CAAEC,mBAAS;QAAA,OAAKA,SAAS,CAACpB,GAAG,KAAK,4BAA4B;MAAA,EAAC,0DAAvFqB,sBAAyFC,KAAK,CAAC,CAAC,CAAC;MAClH,OAAOf,SAAQ,IAAIgB,QAAQ,CAAChB,SAAQ,CAAC;IACvC;IACA,OAAO,CAAC;GACT,EAAE,CAACf,OAAO,KAAPA,eAAO,uBAAPA,OAAO,CAAE0B,UAAU,CAAC,CAAC;EAEzB,oBACEM;IAAKjC,SAAS,6CAAsCA,SAAU,cAAGM,aAAa,GAAG,wBAAwB,GAAG,EAAG;EAAE,gBAC/G2B,6BAACC,WAAW;IACVlC,SAAS,EAAC,gDAAgD;IAC1DmC,OAAO,EAAEnB,QAAQ,IAAIS,iBAAkB;IACvCW,WAAW,EAAErB,YAAa;IAC1BsB,SAAS,EAAElC,MAAM,GAAGmC,qBAAqB,CAACC,OAAO,GAAGD,qBAAqB,CAACE;GAC1E,gBACFP;IAAKjC,SAAS,EAAC;EAAiD,GAC7D,CAACiB,aAAa,KAAKC,mBAAmB,CAACC,IAAI,IAAIF,aAAa,KAAKC,mBAAmB,CAACuB,MAAM,kBAC1FR;IACEjC,SAAS,EAAC,yDAAyD;IACnE0C,OAAO,EAAE7B;EAAK,gBAEdoB,6BAACU,IAAI;IACHC,KAAK,EAAC,MAAM;IACZC,MAAM,EAAC,MAAM;IACbC,IAAI,EAAEC,SAAS,CAACC,IAAK;IACrBC,SAAS,EAAEC,UAAU,CAACX;EAAQ,EAC9B,CAEL,EACAtB,aAAa,KAAKC,mBAAmB,CAACiC,SAAS,iBAC9ClB,6BAACmB,MAAM;IAACR,KAAK,EAAC,QAAQ;IAACC,MAAM,EAAC;EAAQ,gBACpCZ,6BAACU,IAAI;IACHC,KAAK,EAAC,QAAQ;IACdC,MAAM,EAAC,QAAQ;IACfC,IAAI,EAAEC,SAAS,CAACM,OAAQ;IACxBJ,SAAS,EAAEC,UAAU,CAACI;GACtB,EAEL,EACArC,aAAa,KAAKC,mBAAmB,CAACqC,OAAO,iBAC5CtB;IACEjC,SAAS,EAAC,yDAAyD;IACnE0C,OAAO,EAAEA,mBAAM;MAAE5B,KAAK,EAAE;IAAE;GAE1BmB;IAAKjC,SAAS,EAAC;GACbiC;IAAKjC,SAAS,EAAC;GAA0E,gBACzFiC;IAAKjC,SAAS,EAAC;GAA0E,EACrF,CAET,CACG,eACNiC,6BAACuB,YAAY;IACXxD,SAAS,EAAC,iDAAiD;IAC3DyD,IAAI,EAAEhC,iBAAiB,GAAGV,YAAa;IACvC2C,SAAS,EAAEC,eAAe,CAACC,MAAO;IAClCC,UAAU,EAAE1D,MAAM,GAAG2D,WAAW,CAACC,WAAW,GAAGD,WAAW,CAACE;EAAe,EAC1E,CACE;AAEV","names":["VoiceMessageItemBody","_ref","className","message","channelUrl","isByMe","isReactionEnabled","useState","usingReaction","setUsingReaction","useVoicePlayer","key","messageId","audioFileUrl","url","play","pause","playbackTime","duration","playingStatus","VOICE_PLAYER_STATUS","IDLE","useEffect","reactions","_message$reactions","length","_message$reactions2","progresBarMaxSize","useMemo","metaArrays","find","metaArray","_message$metaArrays$f","value","parseInt","React","ProgressBar","maxSize","currentSize","colorType","ProgressBarColorTypes","PRIMARY","GRAY","PAUSED","onClick","Icon","width","height","type","IconTypes","PLAY","fillColor","IconColors","PREPARING","Loader","SPINNER","PRIMARY_2","PLAYING","PlaybackTime","time","labelType","LabelTypography","BODY_1","labelColor","LabelColors","ONCONTENT_1","ONBACKGROUND_1"],"sources":["C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\ui\\VoiceMessageItemBody\\index.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { FileMessage } from '@sendbird/chat/message';\n\nimport './index.scss';\n\nimport ProgressBar, { ProgressBarColorTypes } from '../ProgressBar';\nimport { useVoicePlayer } from '../../hooks/VoicePlayer/useVoicePlayer';\nimport PlaybackTime from '../PlaybackTime';\nimport Loader from '../Loader';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport { LabelTypography, LabelColors } from '../Label';\nimport { VOICE_PLAYER_STATUS } from '../../hooks/VoicePlayer/dux/initialState';\n\nexport interface VoiceMessageItemBodyProps {\n  className?: string;\n  message: FileMessage;\n  channelUrl: string;\n  isByMe?: boolean;\n  isReactionEnabled?: boolean;\n}\n\nexport const VoiceMessageItemBody = ({\n  className,\n  message,\n  channelUrl,\n  isByMe = false,\n  isReactionEnabled = false,\n}: VoiceMessageItemBodyProps): React.ReactElement => {\n  const [usingReaction, setUsingReaction] = useState(false);\n  const {\n    play,\n    pause,\n    playbackTime = 0,\n    duration,\n    playingStatus = VOICE_PLAYER_STATUS.IDLE,\n  } = useVoicePlayer({\n    channelUrl,\n    key: `${message?.messageId}`,\n    audioFileUrl: message?.url,\n  });\n\n  useEffect(() => {\n    if (isReactionEnabled && message?.reactions?.length > 0) {\n      setUsingReaction(true);\n    } else {\n      setUsingReaction(false);\n    }\n  }, [isReactionEnabled, message?.reactions?.length]);\n  const progresBarMaxSize = useMemo(() => {\n    if (message?.metaArrays) {\n      const duration = message?.metaArrays.find((metaArray) => metaArray.key === 'KEY_VOICE_MESSAGE_DURATION')?.value[0];\n      return duration && parseInt(duration);\n    }\n    return 1;\n  }, [message?.metaArrays]);\n\n  return (\n    <div className={`sendbird-voice-message-item-body ${className} ${usingReaction ? 'is-reactions-contained' : ''}`}>\n      <ProgressBar\n        className=\"sendbird-voice-message-item-body__progress-bar\"\n        maxSize={duration || progresBarMaxSize}\n        currentSize={playbackTime}\n        colorType={isByMe ? ProgressBarColorTypes.PRIMARY : ProgressBarColorTypes.GRAY}\n      />\n      <div className=\"sendbird-voice-message-item-body__status-button\">\n        {(playingStatus === VOICE_PLAYER_STATUS.IDLE || playingStatus === VOICE_PLAYER_STATUS.PAUSED) && (\n          <div\n            className=\"sendbird-voice-message-item-body__status-button__button\"\n            onClick={play}\n          >\n            <Icon\n              width=\"18px\"\n              height=\"18px\"\n              type={IconTypes.PLAY}\n              fillColor={IconColors.PRIMARY}\n            />\n          </div>\n        )}\n        {playingStatus === VOICE_PLAYER_STATUS.PREPARING && (\n          <Loader width=\"22.2px\" height=\"22.2px\">\n            <Icon\n              width=\"22.2px\"\n              height=\"22.2px\"\n              type={IconTypes.SPINNER}\n              fillColor={IconColors.PRIMARY_2}\n            />\n          </Loader>\n        )}\n        {playingStatus === VOICE_PLAYER_STATUS.PLAYING && (\n          <div\n            className=\"sendbird-voice-message-item-body__status-button__button\"\n            onClick={() => { pause(); }}\n          >\n            <div className=\"sendbird-voice-message-item-body__status-button__button__pause\">\n              <div className=\"sendbird-voice-message-item-body__status-button__button__pause__inner\" />\n              <div className=\"sendbird-voice-message-item-body__status-button__button__pause__inner\" />\n            </div>\n          </div>\n        )}\n      </div>\n      <PlaybackTime\n        className=\"sendbird-voice-message-item-body__playback-time\"\n        time={progresBarMaxSize - playbackTime}\n        labelType={LabelTypography.BODY_1}\n        labelColor={isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1}\n      />\n    </div>\n  );\n};\n\nexport default VoiceMessageItemBody;\n"]},"metadata":{},"sourceType":"module"}