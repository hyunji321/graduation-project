{"ast":null,"code":"import _slicedToArray from \"C:/Users/\\uC774\\uACBD\\uBBFC/IdeaProjects/sendbird-uikit-whatsapp-sample/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React__default, { useRef, useState, useCallback } from 'react';\nimport ContextMenu, { MenuItems } from './ContextMenu.js';\nimport { L as Label, a as LabelTypography, b as LabelColors } from '../index-63949de5.js';\nimport UserProfile from './UserProfile.js';\nimport useSendbirdStateContext from '../useSendbirdStateContext.js';\nimport '../_rollupPluginBabelHelpers-6bb0305c.js';\nimport 'react-dom';\nimport './SortByRow.js';\nimport '../uuid-1adedf62.js';\nimport '../index-7eb65acf.js';\nimport '../utils/message/getOutgoingMessageState.js';\nimport 'prop-types';\nimport '../stringSet-13bbd4a2.js';\nimport '../LocalizationContext-076d6d2e.js';\nimport '../index-99aabd9e.js';\nimport '../UserProfileContext-9cfbab4d.js';\nimport '../sendbirdSelectors.js';\nimport '../topics-b2b77fb9.js';\nimport '../utils-4bbbca2c.js';\nimport './Avatar.js';\nimport './ImageRenderer.js';\nimport './Icon.js';\nimport './Button.js';\nimport '../withSendbird.js';\nfunction MentionLabel(props) {\n  var _sendbirdState$config, _sendbirdState$stores, _sendbirdState$stores2;\n  var mentionTemplate = props.mentionTemplate,\n    mentionedUserId = props.mentionedUserId,\n    mentionedUserNickname = props.mentionedUserNickname,\n    isByMe = props.isByMe;\n  var mentionRef = useRef();\n  var sendbirdState = useSendbirdStateContext();\n  var userId = sendbirdState === null || sendbirdState === void 0 ? void 0 : (_sendbirdState$config = sendbirdState.config) === null || _sendbirdState$config === void 0 ? void 0 : _sendbirdState$config.userId;\n  var sdk = sendbirdState === null || sendbirdState === void 0 ? void 0 : (_sendbirdState$stores = sendbirdState.stores) === null || _sendbirdState$stores === void 0 ? void 0 : (_sendbirdState$stores2 = _sendbirdState$stores.sdkStore) === null || _sendbirdState$stores2 === void 0 ? void 0 : _sendbirdState$stores2.sdk;\n  var amIBeingMentioned = userId === mentionedUserId;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    user = _useState2[0],\n    setUser = _useState2[1];\n  var fetchUser = useCallback(function (toggleDropdown) {\n    if (user || !(sdk !== null && sdk !== void 0 && sdk.createApplicationUserListQuery)) {\n      toggleDropdown();\n      return;\n    }\n    var query = sdk === null || sdk === void 0 ? void 0 : sdk.createApplicationUserListQuery({\n      userIdsFilter: [mentionedUserId]\n    });\n    query.next().then(function (members) {\n      if ((members === null || members === void 0 ? void 0 : members.length) > 0) {\n        setUser(members[0]);\n      }\n      toggleDropdown();\n    });\n  }, [sdk, mentionedUserId]);\n  return /*#__PURE__*/React__default.createElement(ContextMenu, {\n    menuTrigger: function menuTrigger(toggleDropdown) {\n      return /*#__PURE__*/React__default.createElement(\"a\", {\n        className: \"\\n            sendbird-word__mention\\n            \".concat(amIBeingMentioned ? 'sendbird-word__mention--me' : '', \"\\n          \"),\n        onClick: function onClick() {\n          return fetchUser(toggleDropdown);\n        },\n        ref: mentionRef,\n        \"data-userid\": mentionedUserId,\n        \"data-nickname\": mentionedUserNickname,\n        \"data-sb-mention\": true\n      }, /*#__PURE__*/React__default.createElement(Label, {\n        type: LabelTypography.CAPTION_1,\n        color: isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1\n      }, \"\".concat(mentionTemplate).concat(mentionedUserNickname)));\n    },\n    menuItems: function menuItems(closeDropdown) {\n      return /*#__PURE__*/React__default.createElement(MenuItems\n      /**\n      * parentRef: For catching location(x, y) of MenuItems\n      * parentContainRef: For toggling more options(menus & reactions)\n      */, {\n        parentRef: mentionRef,\n        parentContainRef: mentionRef,\n        closeDropdown: closeDropdown,\n        style: {\n          paddingTop: '0px',\n          paddingBottom: '0px'\n        }\n      }, /*#__PURE__*/React__default.createElement(UserProfile, {\n        user: user,\n        onSuccess: closeDropdown,\n        currentUserId: userId\n      }));\n    }\n  });\n}\nexport { MentionLabel as default };","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAsBe,SAASA,YAAYA,CAACC,KAAwB,EAAe;EAAA;EAC1E,IACEC,eAAe,GAIbD,KAAK,CAJPC,eAAe;IACfC,eAAe,GAGbF,KAAK,CAHPE,eAAe;IACfC,qBAAqB,GAEnBH,KAAK,CAFPG,qBAAqB;IACrBC,SACEJ,KAAK,CADPI;EAGF,IAAMC,UAAU,GAAGC,MAAM,EAAE;EAE3B,IAAMC,aAAa,GAAGC,uBAAuB,EAAE;EAC/C,IAAMC,MAAM,GAAGF,aAAa,KAAbA,qBAAa,gDAAbA,aAAa,CAAEG,MAAM,wCAArBC,wCAAuBF,MAAM;EAC5C,IAAMG,GAAG,GAAGL,aAAa,KAAbA,qBAAa,gDAAbA,aAAa,CAAEM,MAAM,oFAArBC,sBAAuBC,QAAQ,2DAA/BC,uBAAiCJ,GAAG;EAChD,IAAMK,iBAAiB,GAAGR,MAAM,KAAKP,eAAe;EACpD,gBAAwBgB,QAAQ,EAAc;IAAA;IAAvCC,IAAI;IAAEC,OAAO;EACpB,IAAMC,SAAS,GAAGC,WAAW,CAC1BC,wBAAc,EAAK;IAClB,IAAIJ,IAAI,IAAI,EAACP,GAAG,aAAHA,GAAG,KAAHA,aAAG,CAAEY,8BAA8B,CAAE;MAChDD,cAAc,EAAE;MAChB;IACF;IACA,IAAME,KAAK,GAAGb,GAAG,aAAHA,GAAG,KAAHA,qBAAG,CAAEY,8BAA8B,CAAC;MAChDE,aAAa,EAAE,CAACxB,eAAe;IACjC,CAAC,CAAC;IACFuB,KAAK,CAACE,IAAI,EAAE,CAACC,IAAI,CAAEC,iBAAO,EAAK;MAC7B,IAAI,QAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEC,MAAM,IAAG,CAAC,EAAE;QACvBV,OAAO,CAACS,OAAO,CAAC,CAAC,CAAC,CAAC;MACrB;MACAN,cAAc,EAAE;IAClB,CAAC,CAAC;EACJ,CAAC,EACD,CAACX,GAAG,EAAEV,eAAe,CAAC,CACvB;EACD,oBACE6B,6BAACC,WAAW;IACVC,WAAW,EAAGV,mCAA0B;MAAA,oBACtCQ;QACEG,SAAS,8DAELjB,iBAAiB,GAAG,4BAA4B,GAAG,EAAG,iBACxD;QACFkB,OAAO,EAAEA;UAAAA,OAAMd,SAAS,CAACE,cAAc,CAAE;QAAA;QACzCa,GAAG,EAAE/B,UAAW;QAChB,eAAaH,eAAgB;QAC7B,iBAAeC,qBAAsB;QACrC,iBAAiB;MAAK,gBAEtB4B,6BAACM,KAAK;QACJC,IAAI,EAAEC,eAAe,CAACC,SAAU;QAChCC,KAAK,EAAErC,MAAM,GAAGsC,WAAW,CAACC,WAAW,GAAGD,WAAW,CAACE;MAAe,aAEjE3C,eAAgB,SAAEE,qBAAsB,EACtC,CAEV;IAAA;IACF0C,SAAS,EAAGC,gCAAyB;MAAA,oBACnCf,6BAACgB;MACC;AACV;AACA;AACA,QAHU;QAIAC,SAAS,EAAE3C,UAAW;QACtB4C,gBAAgB,EAAE5C,UAAW;QAC7ByC,aAAa,EAAEA,aAAc;QAC7BI,KAAK,EAAE;UAAEC,UAAU,EAAE,KAAK;UAAEC,aAAa,EAAE;QAAM;MAAE,gBAEnDrB,6BAACsB,WAAW;QACVlC,IAAI,EAAEA,IAAK;QACXmC,SAAS,EAAER,aAAc;QACzBS,aAAa,EAAE9C;OACf;IAAA;GAGN;AAEN","names":["MentionLabel","props","mentionTemplate","mentionedUserId","mentionedUserNickname","isByMe","mentionRef","useRef","sendbirdState","useSendbirdStateContext","userId","config","_sendbirdState$config","sdk","stores","_sendbirdState$stores","sdkStore","_sendbirdState$stores2","amIBeingMentioned","useState","user","setUser","fetchUser","useCallback","toggleDropdown","createApplicationUserListQuery","query","userIdsFilter","next","then","members","length","React","ContextMenu","menuTrigger","className","onClick","ref","Label","type","LabelTypography","CAPTION_1","color","LabelColors","ONCONTENT_1","ONBACKGROUND_1","menuItems","closeDropdown","MenuItems","parentRef","parentContainRef","style","paddingTop","paddingBottom","UserProfile","onSuccess","currentUserId"],"sources":["C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\ui\\MentionLabel\\index.tsx"],"sourcesContent":["import './index.scss';\n\nimport React, {\n  ReactElement,\n  useRef,\n  useState,\n  useCallback,\n} from 'react';\nimport type { User } from '@sendbird/chat';\n\nimport ContextMenu, { MenuItems } from '../ContextMenu';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport UserProfile from '../UserProfile';\nimport useSendbirdStateContext from '../../hooks/useSendbirdStateContext';\n\ninterface MentionLabelProps {\n  mentionTemplate: string;\n  mentionedUserId: string;\n  mentionedUserNickname: string;\n  isByMe: boolean;\n}\n\nexport default function MentionLabel(props: MentionLabelProps): JSX.Element {\n  const {\n    mentionTemplate,\n    mentionedUserId,\n    mentionedUserNickname,\n    isByMe,\n  } = props;\n\n  const mentionRef = useRef();\n\n  const sendbirdState = useSendbirdStateContext();\n  const userId = sendbirdState?.config?.userId;\n  const sdk = sendbirdState?.stores?.sdkStore?.sdk;\n  const amIBeingMentioned = userId === mentionedUserId;\n  const [user, setUser] = useState<User| null>();\n  const fetchUser = useCallback(\n    (toggleDropdown) => {\n      if (user || !sdk?.createApplicationUserListQuery) {\n        toggleDropdown();\n        return;\n      }\n      const query = sdk?.createApplicationUserListQuery({\n        userIdsFilter: [mentionedUserId],\n      });\n      query.next().then((members) => {\n        if (members?.length > 0) {\n          setUser(members[0]);\n        }\n        toggleDropdown();\n      });\n    },\n    [sdk, mentionedUserId],\n  );\n  return (\n    <ContextMenu\n      menuTrigger={(toggleDropdown: () => void): ReactElement => (\n        <a\n          className={`\n            sendbird-word__mention\n            ${amIBeingMentioned ? 'sendbird-word__mention--me' : ''}\n          `}\n          onClick={() => fetchUser(toggleDropdown)}\n          ref={mentionRef}\n          data-userid={mentionedUserId}\n          data-nickname={mentionedUserNickname}\n          data-sb-mention={true}\n        >\n          <Label\n            type={LabelTypography.CAPTION_1}\n            color={isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1}\n          >\n            {`${mentionTemplate}${mentionedUserNickname}`}\n          </Label>\n        </a>\n      )}\n      menuItems={(closeDropdown: () => void): ReactElement => (\n        <MenuItems\n          /**\n          * parentRef: For catching location(x, y) of MenuItems\n          * parentContainRef: For toggling more options(menus & reactions)\n          */\n          parentRef={mentionRef}\n          parentContainRef={mentionRef}\n          closeDropdown={closeDropdown}\n          style={{ paddingTop: '0px', paddingBottom: '0px' }}\n        >\n          <UserProfile\n            user={user}\n            onSuccess={closeDropdown}\n            currentUserId={userId}\n          />\n        </MenuItems>\n      )}\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}