{"ast":null,"code":"import React__default, { useState, useMemo } from 'react';\n\n/*\n  ImageRenderer displays image with url or source\n  it checks if the source exist with img tag first\n  if it exists onLoad is called, if not onError is called\n  and those properties switch img tag to real purposing element\n*/\n\nconst ImageRenderer = _ref => {\n  let {\n    className = '',\n    url,\n    alt = '',\n    width = null,\n    height = null,\n    circle = false,\n    fixedSize = false,\n    placeHolder = null,\n    defaultComponent = null,\n    onLoad = () => {/* noop */},\n    onError = () => {/* noop */}\n  } = _ref;\n  const [showDefaultComponent, setShowDefaultComponent] = useState(false);\n  const [showPlaceHolder, setShowPlaceHolder] = useState(true);\n  const DefaultComponent = useMemo(() => {\n    return typeof defaultComponent === 'function' ? defaultComponent() : defaultComponent;\n  }, [defaultComponent]);\n  const PlaceHolder = useMemo(() => {\n    return placeHolder && typeof placeHolder === 'function' ? placeHolder({\n      style: {\n        width: '100%',\n        minWidth: width,\n        maxWidth: fixedSize ? width : '400px',\n        height,\n        position: 'absolute',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center'\n      }\n    }) : null;\n  }, [placeHolder]);\n  const HiddenImageLoader = useMemo(() => {\n    setShowDefaultComponent(false);\n    // reset the state when url is changed\n    return /*#__PURE__*/React__default.createElement(\"img\", {\n      className: \"sendbird-image-renderer__hidden-image-loader\",\n      src: url,\n      alt: alt,\n      onLoad: () => {\n        setShowPlaceHolder(false);\n        onLoad();\n      },\n      onError: () => {\n        setShowDefaultComponent(true);\n        onError();\n      }\n    });\n  }, [url]);\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: [...(Array.isArray(className) ? className : [className]), 'sendbird-image-renderer'].join(' '),\n    style: {\n      width: '100%',\n      minWidth: width,\n      maxWidth: fixedSize ? width : '400px',\n      height\n    }\n  }, showPlaceHolder && PlaceHolder, showDefaultComponent ? DefaultComponent : /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-image-renderer__image\",\n    style: {\n      width: '100%',\n      minWidth: width,\n      maxWidth: fixedSize ? width : '400px',\n      height,\n      position: 'absolute',\n      backgroundRepeat: 'no-repeat',\n      backgroundPosition: 'center',\n      backgroundSize: 'cover',\n      backgroundImage: `url(${url})`,\n      borderRadius: circle ? '50%' : null\n    }\n  }), HiddenImageLoader);\n};\nexport { ImageRenderer as default };","map":{"version":3,"mappings":";;AAIA;AACA;AACA;AACA;AACA;AACA;;AAgBMA,mBAAa,GAAGC,QAYkB;EAAA,IAZjB;IACrBC,SAAS,GAAG,EAAE;IACdC,GAAG;IACHC,GAAG,GAAG,EAAE;IACRC,KAAK,GAAG,IAAI;IACZC,MAAM,GAAG,IAAI;IACbC,MAAM,GAAG,KAAK;IACdC,SAAS,GAAG,KAAK;IACjBC,WAAW,GAAG,IAAI;IAClBC,gBAAgB,GAAG,IAAI;IACvBC,MAAM,GAAGA,MAAM,YAAc;IAC7BC,OAAO,GAAGA,MAAM;EACE,CAAC;EACnB,MAAM,CAACC,oBAAoB,EAAEC,uBAAuB,CAAC,GAAGC,QAAQ,CAAC,KAAK,CAAC;EACvE,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGF,QAAQ,CAAC,IAAI,CAAC;EAE5D,MAAMG,gBAAgB,GAAGC,OAAO,CAAC,MAAM;IACrC,OAAO,OAAOT,gBAAgB,KAAK,UAAU,GACzCA,gBAAgB,EAAE,GAClBA,gBAAgB;EACtB,CAAC,EAAE,CAACA,gBAAgB,CAAC,CAAC;EAEtB,MAAMU,WAAW,GAAGD,OAAO,CAAC,MAAM;IAChC,OAAQV,WAAW,IAAI,OAAOA,WAAW,KAAK,UAAU,GACpDA,WAAW,CAAC;MACZY,KAAK,EAAE;QACLhB,KAAK,EAAE,MAAM;QACbiB,QAAQ,EAAEjB,KAAK;QACfkB,QAAQ,EAAEf,SAAS,GAAGH,KAAK,GAAG,OAAO;QACrCC,MAAM;QACNkB,QAAQ,EAAE,UAAU;QACpBC,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE;MACd;KACD,CAAC,GACA,IAAI;EACV,CAAC,EAAE,CAAClB,WAAW,CAAC,CAAC;EAEjB,MAAMmB,iBAAiB,GAAGT,OAAO,CAAC,MAAM;IACtCL,uBAAuB,CAAC,KAAK,CAAC;IAC9B;IACA,oBACEe;MACE3B,SAAS,EAAC,8CAA8C;MACxD4B,GAAG,EAAE3B,GAAI;MACTC,GAAG,EAAEA,GAAI;MACTO,MAAM,EAAEA,MAAM;QACZM,kBAAkB,CAAC,KAAK,CAAC;QACzBN,MAAM,EAAE;OACR;MACFC,OAAO,EAAEA,MAAM;QACbE,uBAAuB,CAAC,IAAI,CAAC;QAC7BF,OAAO,EAAE;MACX;KACA;EAEN,CAAC,EAAE,CAACT,GAAG,CAAC,CAAC;EAET,oBACE0B;IACE3B,SAAS,EAAE,CACT,IAAI6B,KAAK,CAACC,OAAO,CAAC9B,SAAS,CAAC,GAAGA,SAAS,GAAG,CAACA,SAAS,CAAC,CAAC,EACvD,yBAAyB,CAC1B,CAAC+B,IAAI,CAAC,GAAG,CAAE;IACZZ,KAAK,EAAE;MACLhB,KAAK,EAAE,MAAM;MACbiB,QAAQ,EAAEjB,KAAK;MACfkB,QAAQ,EAAEf,SAAS,GAAGH,KAAK,GAAG,OAAO;MACrCC;IACF;GAECU,iBAAe,IAAII,WAAW,EAE7BP,oBAAoB,GAChBK,gBAAgB,gBAEhBW;IACE3B,SAAS,EAAC,gCAAgC;IAC1CmB,KAAK,EAAE;MACLhB,KAAK,EAAE,MAAM;MACbiB,QAAQ,EAAEjB,KAAK;MACfkB,QAAQ,EAAEf,SAAS,GAAGH,KAAK,GAAG,OAAO;MACrCC,MAAM;MACNkB,QAAQ,EAAE,UAAU;MACpBU,gBAAgB,EAAE,WAAW;MAC7BC,kBAAkB,EAAE,QAAQ;MAC5BC,cAAc,EAAE,OAAO;MACvBC,eAAe,EAASlC,UAAM;MAC9BmC,YAAY,EAAE/B,MAAM,GAAG,KAAK,GAAG;IACjC;GAEH,GAEJqB,iBAAiB,CACd;AAEV","names":["ImageRenderer","_ref","className","url","alt","width","height","circle","fixedSize","placeHolder","defaultComponent","onLoad","onError","showDefaultComponent","setShowDefaultComponent","useState","showPlaceHolder","setShowPlaceHolder","DefaultComponent","useMemo","PlaceHolder","style","minWidth","maxWidth","position","display","justifyContent","alignItems","HiddenImageLoader","React","src","Array","isArray","join","backgroundRepeat","backgroundPosition","backgroundSize","backgroundImage","borderRadius"],"sources":["C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\ui\\ImageRenderer\\index.tsx"],"sourcesContent":["import React, { useState, useMemo, ReactElement } from 'react';\n\nimport './index.scss';\n\n/*\n  ImageRenderer displays image with url or source\n  it checks if the source exist with img tag first\n  if it exists onLoad is called, if not onError is called\n  and those properties switch img tag to real purposing element\n*/\n\nexport interface ImageRendererProps {\n  className?: string | Array<string>;\n  url: string;\n  alt?: string;\n  width?: string | number;\n  height?: string | number;\n  circle?: boolean;\n  fixedSize?: boolean;\n  placeHolder?: ((props: { style: { [key: string]: string | number } }) => ReactElement) | ReactElement;\n  defaultComponent?: (() => ReactElement) | ReactElement;\n  onLoad?: () => void;\n  onError?: () => void;\n}\n\nconst ImageRenderer = ({\n  className = '',\n  url,\n  alt = '',\n  width = null,\n  height = null,\n  circle = false,\n  fixedSize = false,\n  placeHolder = null,\n  defaultComponent = null,\n  onLoad = () => { /* noop */ },\n  onError = () => { /* noop */ },\n}: ImageRendererProps): ReactElement => {\n  const [showDefaultComponent, setShowDefaultComponent] = useState(false);\n  const [showPlaceHolder, setShowPlaceHolder] = useState(true);\n\n  const DefaultComponent = useMemo(() => {\n    return typeof defaultComponent === 'function'\n      ? defaultComponent()\n      : defaultComponent;\n  }, [defaultComponent]);\n\n  const PlaceHolder = useMemo(() => {\n    return (placeHolder && typeof placeHolder === 'function')\n      ? placeHolder({\n        style: {\n          width: '100%',\n          minWidth: width,\n          maxWidth: fixedSize ? width : '400px',\n          height,\n          position: 'absolute',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n        },\n      })\n      : null;\n  }, [placeHolder]);\n\n  const HiddenImageLoader = useMemo(() => {\n    setShowDefaultComponent(false);\n    // reset the state when url is changed\n    return (\n      <img\n        className=\"sendbird-image-renderer__hidden-image-loader\"\n        src={url}\n        alt={alt}\n        onLoad={() => {\n          setShowPlaceHolder(false);\n          onLoad();\n        }}\n        onError={() => {\n          setShowDefaultComponent(true);\n          onError();\n        }}\n      />\n    );\n  }, [url]);\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-image-renderer',\n      ].join(' ')}\n      style={{\n        width: '100%',\n        minWidth: width,\n        maxWidth: fixedSize ? width : '400px',\n        height,\n      }}\n    >\n      {showPlaceHolder && PlaceHolder}\n      {\n        showDefaultComponent\n          ? DefaultComponent\n          : (\n            <div\n              className=\"sendbird-image-renderer__image\"\n              style={{\n                width: '100%',\n                minWidth: width,\n                maxWidth: fixedSize ? width : '400px',\n                height,\n                position: 'absolute',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                backgroundSize: 'cover',\n                backgroundImage: `url(${url})`,\n                borderRadius: circle ? '50%' : null,\n              }}\n            />\n          )\n      }\n      {HiddenImageLoader}\n    </div>\n  );\n};\n\nexport default ImageRenderer;\n"]},"metadata":{},"sourceType":"module"}