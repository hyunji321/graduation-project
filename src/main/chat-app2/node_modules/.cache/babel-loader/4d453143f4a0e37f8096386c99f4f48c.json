{"ast":null,"code":"import React__default, { useState, useRef, useEffect } from 'react';\nimport { a as _defineProperty, _ as _objectSpread2 } from '../_rollupPluginBabelHelpers-6bb0305c.js';\nimport { createPortal } from 'react-dom';\nimport SortByRow from './SortByRow.js';\nimport { h as getClassName } from '../index-7eb65acf.js';\nimport { L as Label, a as LabelTypography, b as LabelColors } from '../index-63949de5.js';\nimport '../uuid-1adedf62.js';\nimport '../utils/message/getOutgoingMessageState.js';\nimport 'prop-types';\nimport '../stringSet-13bbd4a2.js';\n\n// padding to handle height of last item in message-list\nconst HEIGHT_PADDING = 60;\nclass MenuItems$1 extends React__default.Component {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"menuRef\", /*#__PURE__*/React__default.createRef());\n    _defineProperty(this, \"setupEvents\", () => {\n      const {\n        closeDropdown\n      } = this.props;\n      const {\n        menuRef\n      } = this;\n      const handleClickOutside = event => {\n        var _menuRef$current, _menuRef$current$cont;\n        if (menuRef !== null && menuRef !== void 0 && menuRef.current && !(menuRef !== null && menuRef !== void 0 && (_menuRef$current = menuRef.current) !== null && _menuRef$current !== void 0 && (_menuRef$current$cont = _menuRef$current.contains) !== null && _menuRef$current$cont !== void 0 && _menuRef$current$cont.call(_menuRef$current, event.target))) {\n          closeDropdown === null || closeDropdown === void 0 ? void 0 : closeDropdown();\n        }\n      };\n      this.setState({\n        handleClickOutside\n      });\n      document.addEventListener('mousedown', handleClickOutside);\n    });\n    _defineProperty(this, \"cleanUpEvents\", () => {\n      const {\n        handleClickOutside\n      } = this.state;\n      document.removeEventListener('mousedown', handleClickOutside);\n    });\n    _defineProperty(this, \"getMenuPosition\", () => {\n      var _parentRef$current, _parentRef$current$ge;\n      const {\n        parentRef,\n        openLeft\n      } = this.props;\n      const parentRect = parentRef === null || parentRef === void 0 ? void 0 : (_parentRef$current = parentRef.current) === null || _parentRef$current === void 0 ? void 0 : (_parentRef$current$ge = _parentRef$current.getBoundingClientRect) === null || _parentRef$current$ge === void 0 ? void 0 : _parentRef$current$ge.call(_parentRef$current);\n      const x = (parentRect === null || parentRect === void 0 ? void 0 : parentRect.x) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.left) || 0;\n      const y = (parentRect === null || parentRect === void 0 ? void 0 : parentRect.y) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.top) || 0;\n      const menuStyle = {\n        top: y,\n        left: x\n      };\n      if (!this.menuRef.current) return menuStyle;\n      const {\n        innerWidth,\n        innerHeight\n      } = window;\n      const rect = this.menuRef.current.getBoundingClientRect();\n      if (y + rect.height + HEIGHT_PADDING > innerHeight) {\n        menuStyle.top -= rect.height;\n      }\n      if (x + rect.width > innerWidth && !openLeft) {\n        menuStyle.left -= rect.width;\n      }\n      if (menuStyle.top < 0) {\n        menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n      }\n      menuStyle.top += 32;\n      if (openLeft) {\n        const padding = Number.isNaN(rect.width - 30) ? 108 // default\n        : rect.width - 30;\n        menuStyle.left -= padding;\n      }\n      // warning: this section has to be executed after the openLeft is calculated\n      // menu is outside viewport\n      if (menuStyle.left < 0) {\n        menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n      }\n      this.setState({\n        menuStyle\n      });\n      return menuStyle;\n    });\n    this.state = {\n      menuStyle: {},\n      handleClickOutside: () => {/* noop */}\n    };\n  }\n  componentDidMount() {\n    this.setupEvents();\n    this.getMenuPosition();\n  }\n  componentWillUnmount() {\n    this.cleanUpEvents();\n  }\n  render() {\n    var _this$props;\n    const {\n      menuStyle\n    } = this.state;\n    const {\n      children,\n      style,\n      className = ''\n    } = this.props;\n    return /*#__PURE__*/createPortal( /*#__PURE__*/React__default.createElement(\"div\", {\n      className: (_this$props = this.props) === null || _this$props === void 0 ? void 0 : _this$props.className\n    }, /*#__PURE__*/React__default.createElement(\"div\", {\n      className: \"sendbird-dropdown__menu-backdrop\"\n    }), /*#__PURE__*/React__default.createElement(\"ul\", {\n      className: `${className} sendbird-dropdown__menu`,\n      ref: this.menuRef,\n      style: _objectSpread2({\n        display: 'inline-block',\n        position: 'fixed',\n        left: `${Math.round(menuStyle.left)}px`,\n        top: `${Math.round(menuStyle.top)}px`\n      }, style)\n    }, children)), document.getElementById('sendbird-dropdown-portal'));\n  }\n}\nconst defaultParentRect = {\n  x: 0,\n  y: 0,\n  left: 0,\n  top: 0,\n  height: 0\n};\nconst EmojiListItems$1 = _ref => {\n  let {\n    children,\n    parentRef,\n    parentContainRef,\n    spaceFromTrigger = {\n      x: 0,\n      y: 0\n    },\n    closeDropdown\n  } = _ref;\n  const [reactionStyle, setReactionStyle] = useState({\n    left: 0,\n    top: 0\n  });\n  const reactionRef = useRef(null);\n\n  /* showParent & hideParent */\n  useEffect(() => {\n    if (parentContainRef && parentContainRef !== null && parentContainRef !== void 0 && parentContainRef.current) {\n      parentContainRef.current.classList.add('sendbird-reactions--pressed');\n    }\n    return () => {\n      if (parentContainRef && parentContainRef !== null && parentContainRef !== void 0 && parentContainRef.current) {\n        parentContainRef.current.classList.remove('sendbird-reactions--pressed');\n      }\n    };\n  }, []);\n\n  /* setupEvents & cleanupEvents */\n  useEffect(() => {\n    const handleClickOutSide = event => {\n      var _reactionRef$current, _reactionRef$current$;\n      if (reactionRef !== null && reactionRef !== void 0 && reactionRef.current && !(reactionRef !== null && reactionRef !== void 0 && (_reactionRef$current = reactionRef.current) !== null && _reactionRef$current !== void 0 && (_reactionRef$current$ = _reactionRef$current.contains) !== null && _reactionRef$current$ !== void 0 && _reactionRef$current$.call(_reactionRef$current, event.target))) {\n        closeDropdown();\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutSide);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutSide);\n    };\n  }, []);\n\n  /* getBarPosition */\n  useEffect(() => {\n    var _parentRef$current$ge, _parentRef$current;\n    const spaceFromTriggerX = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.x) || 0;\n    const spaceFromTriggerY = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.y) || 0;\n    const parentRect = (_parentRef$current$ge = parentRef === null || parentRef === void 0 ? void 0 : (_parentRef$current = parentRef.current) === null || _parentRef$current === void 0 ? void 0 : _parentRef$current.getBoundingClientRect()) !== null && _parentRef$current$ge !== void 0 ? _parentRef$current$ge : defaultParentRect;\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n    const reactionStyle = {\n      top: y,\n      left: x\n    };\n    if (!(reactionRef !== null && reactionRef !== void 0 && reactionRef.current)) {\n      setReactionStyle(reactionStyle);\n    } else {\n      var _reactionRef$current2;\n      const rect = reactionRef === null || reactionRef === void 0 ? void 0 : (_reactionRef$current2 = reactionRef.current) === null || _reactionRef$current2 === void 0 ? void 0 : _reactionRef$current2.getBoundingClientRect();\n      if (reactionStyle.top < rect.height) {\n        reactionStyle.top += parentRect.height;\n        reactionStyle.top += spaceFromTriggerY;\n      } else {\n        reactionStyle.top -= rect.height;\n        reactionStyle.top -= spaceFromTriggerY;\n      }\n      reactionStyle.left -= rect.width / 2;\n      reactionStyle.left += parentRect.height / 2 - 2;\n      reactionStyle.left += spaceFromTriggerX;\n      const maximumLeft = window.innerWidth - rect.width;\n      if (maximumLeft < reactionStyle.left) {\n        reactionStyle.left = maximumLeft;\n      }\n      if (reactionStyle.left < 0) {\n        reactionStyle.left = 0;\n      }\n      setReactionStyle(reactionStyle);\n    }\n  }, []);\n  const rootElement = document.getElementById('sendbird-emoji-list-portal');\n  if (rootElement) {\n    return /*#__PURE__*/createPortal( /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(\"div\", {\n      className: \"sendbird-dropdown__menu-backdrop\"\n    }), /*#__PURE__*/React__default.createElement(\"ul\", {\n      className: \"sendbird-dropdown__reaction-bar\",\n      ref: reactionRef,\n      style: {\n        display: 'inline-block',\n        position: 'fixed',\n        left: `${Math.round(reactionStyle.left)}px`,\n        top: `${Math.round(reactionStyle.top)}px`\n      }\n    }, /*#__PURE__*/React__default.createElement(SortByRow, {\n      className: \"sendbird-dropdown__reaction-bar__row\",\n      maxItemCount: 8,\n      itemWidth: 44,\n      itemHeight: 40\n    }, children))), rootElement);\n  }\n  return null;\n};\nconst ENTER_KEY = 13;\nconst MenuItems = MenuItems$1;\nconst EmojiListItems = EmojiListItems$1;\nconst MenuItem = _ref => {\n  let {\n    className = '',\n    children,\n    onClick,\n    disable = false,\n    dataSbId = ''\n  } = _ref;\n  const handleClickEvent = e => {\n    if (!disable && onClick) {\n      onClick === null || onClick === void 0 ? void 0 : onClick(e);\n    }\n  };\n  return /*#__PURE__*/React__default.createElement(\"li\", {\n    className: getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : '']),\n    role: \"menuitem\",\n    \"aria-disabled\": disable ? true : false,\n    onClick: handleClickEvent,\n    onKeyPress: e => {\n      if (e.keyCode === ENTER_KEY) handleClickEvent(e);\n    },\n    tabIndex: 0,\n    \"data-sb-id\": dataSbId\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-dropdown__menu-item__text\",\n    type: LabelTypography.SUBTITLE_2,\n    color: disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1\n  }, children));\n};\nconst MenuRoot = () => /*#__PURE__*/React__default.createElement(\"div\", {\n  id: \"sendbird-dropdown-portal\",\n  className: \"sendbird-dropdown-portal\"\n});\n\n// For the test environment\nconst EmojiReactionListRoot = () => /*#__PURE__*/React__default.createElement(\"div\", {\n  id: \"sendbird-emoji-list-portal\"\n});\nfunction ContextMenu(_ref2) {\n  let {\n    menuTrigger,\n    menuItems,\n    isOpen\n  } = _ref2;\n  const [showMenu, setShowMenu] = useState(false);\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-context-menu\",\n    style: {\n      display: 'inline'\n    }\n  }, menuTrigger === null || menuTrigger === void 0 ? void 0 : menuTrigger(() => setShowMenu(!showMenu)), (showMenu || isOpen) && menuItems(() => setShowMenu(false)));\n}\nexport { EmojiListItems, EmojiReactionListRoot, MenuItem, MenuItems, MenuRoot, ContextMenu as default };","map":{"version":3,"mappings":"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","names":["HEIGHT_PADDING","MenuItems","React","Component","constructor","props","_defineProperty","createRef","closeDropdown","menuRef","handleClickOutside","event","current","_menuRef$current","contains","_menuRef$current$cont","target","setState","document","addEventListener","state","removeEventListener","parentRef","openLeft","parentRect","_parentRef$current","getBoundingClientRect","_parentRef$current$ge","x","left","y","top","menuStyle","innerWidth","innerHeight","window","rect","height","width","padding","Number","isNaN","componentDidMount","setupEvents","getMenuPosition","componentWillUnmount","cleanUpEvents","render","children","style","className","createPortal","_this$props","ref","display","position","Math","round","getElementById","defaultParentRect","EmojiListItems","_ref","parentContainRef","spaceFromTrigger","reactionStyle","setReactionStyle","useState","reactionRef","useRef","useEffect","classList","add","remove","handleClickOutSide","_reactionRef$current","_reactionRef$current$","spaceFromTriggerX","spaceFromTriggerY","_reactionRef$current2","maximumLeft","rootElement","SortByRow","maxItemCount","itemWidth","itemHeight","ENTER_KEY","_MenuItems","_EmojiListItems","MenuItem","onClick","disable","dataSbId","handleClickEvent","e","getClassName","role","onKeyPress","keyCode","tabIndex","Label","type","LabelTypography","SUBTITLE_2","color","LabelColors","ONBACKGROUND_4","ONBACKGROUND_1","MenuRoot","id","EmojiReactionListRoot","ContextMenu","menuTrigger","menuItems","isOpen","showMenu","setShowMenu"],"sources":["C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\ui\\ContextMenu\\MenuItems.tsx","C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\ui\\ContextMenu\\EmojiListItems.tsx","C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\ui\\ContextMenu\\index.tsx"],"sourcesContent":["import React, { ReactElement } from 'react';\nimport { createPortal } from 'react-dom';\n\ninterface MenuItemsProps {\n  className?: string;\n  style?: Record<string, string>;\n  openLeft?: boolean;\n  children: React.ReactElement | Array<React.ReactElement> | React.ReactNode;\n  parentRef: React.RefObject<HTMLElement>;\n  parentContainRef: React.RefObject<HTMLElement>;\n  closeDropdown: () => void;\n}\n\ntype MenuStyleType = { top?: number, left?: number };\ninterface MenuItemsState {\n  menuStyle: MenuStyleType;\n  handleClickOutside: (e: MouseEvent) => void;\n}\n\n// padding to handle height of last item in message-list\nconst HEIGHT_PADDING = 60;\n\nexport default class MenuItems extends React.Component<MenuItemsProps, MenuItemsState> {\n  constructor(props: MenuItemsProps) {\n    super(props);\n    this.state = {\n      menuStyle: {},\n      handleClickOutside: () => { /* noop */ },\n    };\n  }\n\n  menuRef: React.RefObject<HTMLUListElement> = React.createRef();\n\n  componentDidMount(): void {\n    this.setupEvents();\n    this.getMenuPosition();\n  }\n\n  componentWillUnmount(): void {\n    this.cleanUpEvents();\n  }\n\n  setupEvents = (): void => {\n    const { closeDropdown } = this.props;\n    const { menuRef } = this;\n    const handleClickOutside = (event) => {\n      if (menuRef?.current && !menuRef?.current?.contains?.(event.target)) {\n        closeDropdown?.();\n      }\n    };\n    this.setState({\n      handleClickOutside,\n    });\n\n    document.addEventListener('mousedown', handleClickOutside);\n  };\n\n  cleanUpEvents = (): void => {\n    const {\n      handleClickOutside,\n    } = this.state;\n    document.removeEventListener('mousedown', handleClickOutside);\n  };\n\n  getMenuPosition = (): MenuStyleType => {\n    const { parentRef, openLeft } = this.props;\n    const parentRect = parentRef?.current?.getBoundingClientRect?.();\n    const x = parentRect?.x || parentRect?.left || 0;\n    const y = parentRect?.y || parentRect?.top || 0;\n    const menuStyle = {\n      top: y,\n      left: x,\n    };\n    if (!this.menuRef.current) return menuStyle;\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menuRef.current.getBoundingClientRect();\n    if (y + rect.height + HEIGHT_PADDING > innerHeight) {\n      menuStyle.top -= rect.height;\n    }\n    if (x + rect.width > innerWidth && !openLeft) {\n      menuStyle.left -= rect.width;\n    }\n    if (menuStyle.top < 0) {\n      menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n    menuStyle.top += 32;\n    if (openLeft) {\n      const padding = Number.isNaN(rect.width - 30)\n        ? 108 // default\n        : rect.width - 30;\n      menuStyle.left -= padding;\n    }\n    // warning: this section has to be executed after the openLeft is calculated\n    // menu is outside viewport\n    if (menuStyle.left < 0) {\n      menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    this.setState({ menuStyle });\n    return menuStyle;\n  };\n\n  render(): ReactElement {\n    const { menuStyle } = this.state;\n    const { children, style, className = '' } = this.props;\n    return (\n      createPortal(\n        (\n          <div className={this.props?.className}>\n            <div className=\"sendbird-dropdown__menu-backdrop\" />\n            <ul\n              className={`${className} sendbird-dropdown__menu`}\n              ref={this.menuRef}\n              style={{\n                display: 'inline-block',\n                position: 'fixed',\n                left: `${Math.round(menuStyle.left)}px`,\n                top: `${Math.round(menuStyle.top)}px`,\n                ...style,\n              }}\n            >\n              {children}\n            </ul>\n          </div>\n        ),\n        document.getElementById('sendbird-dropdown-portal'),\n      )\n    );\n  }\n}\n","import React, { ReactElement, ReactNode, RefObject, useEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport SortByRow from '../SortByRow';\nimport { Nullable } from '../../types';\n\nconst defaultParentRect = { x: 0, y: 0, left: 0, top: 0, height: 0 };\ntype SpaceFromTrigger = { x: number, y: number };\ntype ReactionStyle = { left: number, top: number };\nexport interface EmojiListItemsProps {\n  closeDropdown: () => void;\n  children: ReactNode;\n  parentRef: RefObject<HTMLDivElement>;\n  parentContainRef: RefObject<HTMLDivElement>;\n  spaceFromTrigger?: SpaceFromTrigger;\n}\n\nexport const EmojiListItems = ({\n  children,\n  parentRef,\n  parentContainRef,\n  spaceFromTrigger = { x: 0, y: 0 },\n  closeDropdown,\n}: EmojiListItemsProps): Nullable<ReactElement> => {\n  const [reactionStyle, setReactionStyle] = useState<ReactionStyle>({ left: 0, top: 0 });\n  const reactionRef: RefObject<HTMLUListElement> = useRef(null);\n\n  /* showParent & hideParent */\n  useEffect(() => {\n    if (parentContainRef && parentContainRef?.current) {\n      parentContainRef.current.classList.add('sendbird-reactions--pressed');\n    }\n    return () => {\n      if (parentContainRef && parentContainRef?.current) {\n        parentContainRef.current.classList.remove('sendbird-reactions--pressed');\n      }\n    };\n  }, []);\n\n  /* setupEvents & cleanupEvents */\n  useEffect(() => {\n    const handleClickOutSide = (event) => {\n      if (reactionRef?.current && !reactionRef?.current?.contains?.(event.target)) {\n        closeDropdown();\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutSide);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutSide);\n    };\n  }, []);\n\n  /* getBarPosition */\n  useEffect(() => {\n    const spaceFromTriggerX = spaceFromTrigger?.x || 0;\n    const spaceFromTriggerY = spaceFromTrigger?.y || 0;\n    const parentRect = parentRef?.current?.getBoundingClientRect() ?? defaultParentRect;\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n    const reactionStyle = {\n      top: y,\n      left: x,\n    };\n    if (!reactionRef?.current) {\n      setReactionStyle(reactionStyle);\n    } else {\n      const rect = reactionRef?.current?.getBoundingClientRect();\n      if (reactionStyle.top < rect.height) {\n        reactionStyle.top += parentRect.height;\n        reactionStyle.top += spaceFromTriggerY;\n      } else {\n        reactionStyle.top -= rect.height;\n        reactionStyle.top -= spaceFromTriggerY;\n      }\n      reactionStyle.left -= rect.width / 2;\n      reactionStyle.left += (parentRect.height / 2) - 2;\n      reactionStyle.left += spaceFromTriggerX;\n      const maximumLeft = window.innerWidth - rect.width;\n      if (maximumLeft < reactionStyle.left) {\n        reactionStyle.left = maximumLeft;\n      }\n      if (reactionStyle.left < 0) {\n        reactionStyle.left = 0;\n      }\n      setReactionStyle(reactionStyle);\n    }\n  }, []);\n\n  const rootElement = document.getElementById('sendbird-emoji-list-portal');\n  if (rootElement) {\n    return (\n      createPortal(\n        <>\n          <div className=\"sendbird-dropdown__menu-backdrop\" />\n          <ul\n            className=\"sendbird-dropdown__reaction-bar\"\n            ref={reactionRef}\n            style={{\n              display: 'inline-block',\n              position: 'fixed',\n              left: `${Math.round(reactionStyle.left)}px`,\n              top: `${Math.round(reactionStyle.top)}px`,\n            }}\n          >\n            <SortByRow\n              className=\"sendbird-dropdown__reaction-bar__row\"\n              maxItemCount={8}\n              itemWidth={44}\n              itemHeight={40}\n            >\n              {children}\n            </SortByRow>\n          </ul>\n        </>,\n        rootElement,\n      )\n    );\n  }\n  return null;\n};\n\nexport default EmojiListItems;\n","import React, { ReactElement, MouseEvent, useState, ReactNode } from 'react';\nimport './index.scss';\n\nimport _MenuItems from './MenuItems';\nimport _EmojiListItems from './EmojiListItems';\n\nimport { getClassName } from '../../utils';\nimport Label, { LabelTypography, LabelColors } from '../Label';\n\nconst ENTER_KEY = 13;\n\nexport const MenuItems = _MenuItems;\nexport const EmojiListItems = _EmojiListItems;\n\nexport interface MenuItemProps {\n  className?: string | Array<string>;\n  children: ReactElement | ReactElement[] | ReactNode;\n  onClick?: (e: MouseEvent<HTMLLIElement>) => void;\n  disable?: boolean;\n  dataSbId?: string;\n}\nexport const MenuItem = ({\n  className = '',\n  children,\n  onClick,\n  disable = false,\n  dataSbId = '',\n}: MenuItemProps): ReactElement => {\n  const handleClickEvent = (e) => {\n    if (!disable && onClick) {\n      onClick?.(e);\n    }\n  };\n  return (\n    <li\n      className={getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : ''])}\n      role=\"menuitem\"\n      aria-disabled={disable ? true : false}\n      onClick={handleClickEvent}\n      onKeyPress={(e) => { if (e.keyCode === ENTER_KEY) handleClickEvent(e); }}\n      tabIndex={0}\n      data-sb-id={dataSbId}\n    >\n      <Label\n        className=\"sendbird-dropdown__menu-item__text\"\n        type={LabelTypography.SUBTITLE_2}\n        color={disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1}\n      >\n        {children}\n      </Label>\n    </li>\n  );\n};\n\nexport const MenuRoot = (): ReactElement => (\n  <div\n    id=\"sendbird-dropdown-portal\"\n    className=\"sendbird-dropdown-portal\"\n  />\n);\n\n// For the test environment\nexport const EmojiReactionListRoot = (): ReactElement => <div id=\"sendbird-emoji-list-portal\" />;\n\ntype MenuDisplayingFunc = () => void;\nexport interface ContextMenuProps {\n  menuTrigger?: (func: MenuDisplayingFunc) => ReactElement;\n  menuItems: (func: MenuDisplayingFunc) => ReactElement;\n  isOpen?: boolean;\n}\nexport default function ContextMenu({\n  menuTrigger,\n  menuItems,\n  isOpen,\n}: ContextMenuProps): ReactElement {\n  const [showMenu, setShowMenu] = useState(false);\n  return (\n    <div\n      className=\"sendbird-context-menu\"\n      style={{ display: 'inline' }}\n    >\n      {menuTrigger?.(() => setShowMenu(!showMenu))}\n      {(showMenu || isOpen) && menuItems(() => setShowMenu(false))}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}