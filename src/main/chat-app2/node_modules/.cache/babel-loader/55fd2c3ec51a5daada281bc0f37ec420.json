{"ast":null,"code":"import React__default from 'react';\nimport { createPortal } from 'react-dom';\nimport Avatar from '../../ui/Avatar.js';\nimport { L as Label, a as LabelTypography, b as LabelColors } from '../../index-63949de5.js';\nimport Icon, { IconTypes, IconColors } from '../../ui/Icon.js';\nimport { M as MODAL_ROOT } from '../../index-38e61c64.js';\nimport { x as isSupportedFileView, y as isVideo, z as isImage } from '../../index-7eb65acf.js';\nimport useSendbirdStateContext from '../../useSendbirdStateContext.js';\nimport { u as useChannelContext } from '../../ChannelProvider-910bbc1f.js';\nimport '../../ui/ImageRenderer.js';\nimport '../../uuid-1adedf62.js';\nimport 'prop-types';\nimport '../../stringSet-13bbd4a2.js';\nimport '../../_rollupPluginBabelHelpers-6bb0305c.js';\nimport '../../utils/message/getOutgoingMessageState.js';\nimport '../../withSendbird.js';\nimport '../../UserProfileContext-9cfbab4d.js';\nimport '../../index-7cdd58b8.js';\nimport '../../index-99aabd9e.js';\nimport '../../topics-b2b77fb9.js';\nimport '../../compareIds-defe2bb3.js';\nimport '../../const-b3f02313.js';\nimport '@sendbird/chat/groupChannel';\nimport '@sendbird/chat/message';\nimport '../../consts-95d8566e.js';\nvar FileViewerComponent = function FileViewerComponent(_ref) {\n  var profileUrl = _ref.profileUrl,\n    nickname = _ref.nickname,\n    name = _ref.name,\n    type = _ref.type,\n    url = _ref.url,\n    isByMe = _ref.isByMe,\n    onCancel = _ref.onCancel,\n    onDelete = _ref.onDelete,\n    disableDelete = _ref.disableDelete;\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer\"\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header\"\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__left\"\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__left__avatar\"\n  }, /*#__PURE__*/React__default.createElement(Avatar, {\n    height: \"32px\",\n    width: \"32px\",\n    src: profileUrl\n  })), /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-fileviewer__header__left__filename\",\n    type: LabelTypography.H_2,\n    color: LabelColors.ONBACKGROUND_1\n  }, name), /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-fileviewer__header__left__sender-name\",\n    type: LabelTypography.BODY_1,\n    color: LabelColors.ONBACKGROUND_2\n  }, nickname)), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__right\"\n  }, isSupportedFileView(type) && /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__right__actions\"\n  }, /*#__PURE__*/React__default.createElement(\"a\", {\n    className: \"sendbird-fileviewer__header__right__actions__download\",\n    rel: \"noopener noreferrer\",\n    href: url,\n    target: \"_blank\"\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    type: IconTypes.DOWNLOAD,\n    fillColor: IconColors.ON_BACKGROUND_1,\n    height: \"24px\",\n    width: \"24px\"\n  })), onDelete && isByMe && /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__right__actions__delete\"\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    className: disableDelete ? 'disabled' : '',\n    type: IconTypes.DELETE,\n    fillColor: disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1,\n    height: \"24px\",\n    width: \"24px\",\n    onClick: function onClick() {\n      if (!disableDelete) {\n        onDelete();\n      }\n    }\n  }))), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__right__actions__close\"\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    type: IconTypes.CLOSE,\n    fillColor: IconColors.ON_BACKGROUND_1,\n    height: \"24px\",\n    width: \"24px\",\n    onClick: onCancel\n  })))), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__content\"\n  }, isVideo(type) && /*#__PURE__*/React__default.createElement(\"video\", {\n    controls: true,\n    className: \"sendbird-fileviewer__content__video\"\n  }, /*#__PURE__*/React__default.createElement(\"source\", {\n    src: url,\n    type: type\n  })), isImage(type) && /*#__PURE__*/React__default.createElement(\"img\", {\n    src: url,\n    alt: name,\n    className: \"sendbird-fileviewer__content__img\"\n  }), !isSupportedFileView(type) && /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__content__unsupported\"\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    type: LabelTypography.H_1,\n    color: LabelColors.ONBACKGROUND_1\n  }, \"Unsupoprted message\"))));\n};\nvar FileViewer = function FileViewer(_ref2) {\n  var _useSendbirdStateCont, _useSendbirdStateCont2, _message$sender;\n  var onCancel = _ref2.onCancel,\n    message = _ref2.message;\n  var _useChannelContext = useChannelContext(),\n    deleteMessage = _useChannelContext.deleteMessage;\n  var sender = message.sender,\n    type = message.type,\n    url = message.url,\n    _message$name = message.name,\n    name = _message$name === void 0 ? '' : _message$name,\n    threadInfo = message.threadInfo;\n  var user = (_useSendbirdStateCont = useSendbirdStateContext()) === null || _useSendbirdStateCont === void 0 ? void 0 : (_useSendbirdStateCont2 = _useSendbirdStateCont.config) === null || _useSendbirdStateCont2 === void 0 ? void 0 : _useSendbirdStateCont2.userId;\n  var isByMe = user === (message === null || message === void 0 ? void 0 : (_message$sender = message.sender) === null || _message$sender === void 0 ? void 0 : _message$sender.userId);\n  var disableDelete = (threadInfo === null || threadInfo === void 0 ? void 0 : threadInfo.replyCount) > 0;\n  var profileUrl = sender.profileUrl,\n    _sender$nickname = sender.nickname,\n    nickname = _sender$nickname === void 0 ? '' : _sender$nickname;\n  return /*#__PURE__*/createPortal( /*#__PURE__*/React__default.createElement(FileViewerComponent, {\n    profileUrl: profileUrl,\n    nickname: nickname,\n    type: type,\n    url: url,\n    name: name,\n    onCancel: onCancel,\n    onDelete: function onDelete() {\n      deleteMessage(message).then(function () {\n        onCancel();\n      });\n    },\n    isByMe: isByMe,\n    disableDelete: disableDelete\n  }), document.getElementById(MODAL_ROOT));\n};\nexport { FileViewerComponent, FileViewer as default };","map":{"version":3,"mappings":"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","names":["FileViewerComponent","_ref","profileUrl","nickname","name","type","url","isByMe","onCancel","onDelete","disableDelete","React","className","Avatar","height","width","src","Label","LabelTypography","H_2","color","LabelColors","ONBACKGROUND_1","BODY_1","ONBACKGROUND_2","isSupportedFileView","rel","href","target","Icon","IconTypes","DOWNLOAD","fillColor","IconColors","ON_BACKGROUND_1","DELETE","GRAY","onClick","CLOSE","isVideo","controls","isImage","alt","H_1","FileViewer","_ref2","message","useChannelContext","deleteMessage","sender","threadInfo","user","useSendbirdStateContext","_useSendbirdStateCont","config","_useSendbirdStateCont2","userId","_message$sender","replyCount","createPortal","then","document","getElementById","MODAL_ROOT"],"sources":["C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\modules\\Channel\\components\\FileViewer\\index.tsx"],"sourcesContent":["import React from 'react';\nimport { createPortal } from 'react-dom';\nimport type { FileMessage } from '@sendbird/chat/message';\n\nimport './file-viewer.scss';\nimport Avatar from '../../../../ui/Avatar';\nimport Label, { LabelTypography, LabelColors } from '../../../../ui/Label';\nimport Icon, { IconColors, IconTypes } from '../../../../ui/Icon';\nimport { MODAL_ROOT } from '../../../../hooks/useModal/ModalRoot';\n\nimport { isImage, isVideo, isSupportedFileView } from '../../../../utils';\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { useChannelContext } from '../../context/ChannelProvider';\nimport { EveryMessage } from '../../../../types';\n\ntype FileViewerUIProps = {\n  profileUrl: string;\n  nickname: string;\n  // file\n  name: string;\n  type: string;\n  url: string;\n  // others\n  isByMe: boolean;\n  onCancel: () => void;\n  onDelete: () => void;\n  disableDelete: boolean;\n};\n\nexport const FileViewerComponent: React.FC<FileViewerUIProps> = ({\n  // sender\n  profileUrl,\n  nickname,\n  // file\n  name,\n  type,\n  url,\n  // others\n  isByMe,\n  onCancel,\n  onDelete,\n  disableDelete,\n}: FileViewerUIProps) => (\n  <div className=\"sendbird-fileviewer\">\n    <div className=\"sendbird-fileviewer__header\">\n      <div className=\"sendbird-fileviewer__header__left\">\n        <div className=\"sendbird-fileviewer__header__left__avatar\">\n          <Avatar height=\"32px\" width=\"32px\" src={profileUrl} />\n        </div>\n        <Label\n          className=\"sendbird-fileviewer__header__left__filename\"\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {name}\n        </Label>\n        <Label\n          className=\"sendbird-fileviewer__header__left__sender-name\"\n          type={LabelTypography.BODY_1}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {nickname}\n        </Label>\n      </div>\n      <div className=\"sendbird-fileviewer__header__right\">\n        {\n          isSupportedFileView(type) && (\n            <div className=\"sendbird-fileviewer__header__right__actions\">\n              <a\n                className=\"sendbird-fileviewer__header__right__actions__download\"\n                rel=\"noopener noreferrer\"\n                href={url}\n                target=\"_blank\"\n              >\n                <Icon\n                  type={IconTypes.DOWNLOAD}\n                  fillColor={IconColors.ON_BACKGROUND_1}\n                  height=\"24px\"\n                  width=\"24px\"\n                />\n              </a>\n              {\n                onDelete && isByMe && (\n                  <div className=\"sendbird-fileviewer__header__right__actions__delete\">\n                    <Icon\n                      className={disableDelete ? 'disabled' : ''}\n                      type={IconTypes.DELETE}\n                      fillColor={disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1}\n                      height=\"24px\"\n                      width=\"24px\"\n                      onClick={() => { if (!disableDelete) { onDelete(); } }}\n                    />\n                  </div>\n                )\n              }\n            </div>\n          )\n        }\n        <div className=\"sendbird-fileviewer__header__right__actions__close\">\n          <Icon\n            type={IconTypes.CLOSE}\n            fillColor={IconColors.ON_BACKGROUND_1}\n            height=\"24px\"\n            width=\"24px\"\n            onClick={onCancel}\n          />\n        </div>\n      </div>\n    </div>\n    <div className=\"sendbird-fileviewer__content\">\n      {isVideo(type) && (\n        <video controls className=\"sendbird-fileviewer__content__video\">\n          <source src={url} type={type} />\n        </video>\n      )}\n      {\n        isImage(type) && (\n          <img\n            src={url}\n            alt={name}\n            className=\"sendbird-fileviewer__content__img\"\n          />\n        )\n      }\n      {\n        !isSupportedFileView(type) && (\n          <div className=\"sendbird-fileviewer__content__unsupported\">\n            <Label type={LabelTypography.H_1} color={LabelColors.ONBACKGROUND_1}>\n              Unsupoprted message\n            </Label>\n          </div>\n        )\n      }\n    </div>\n  </div>\n);\n\ntype FileViewerProps = {\n  onCancel:() => void;\n  message: FileMessage;\n};\n\nconst FileViewer: React.FC<FileViewerProps> = ({ onCancel, message }: FileViewerProps) => {\n  const { deleteMessage } = useChannelContext();\n  const {\n    sender,\n    type,\n    url,\n    name = '',\n    threadInfo,\n  } = message;\n  const user = useSendbirdStateContext()?.config?.userId;\n  const isByMe = user === message?.sender?.userId;\n  const disableDelete = threadInfo?.replyCount > 0;\n  const { profileUrl, nickname = '' } = sender;\n  return createPortal(\n    (\n      <FileViewerComponent\n        profileUrl={profileUrl}\n        nickname={nickname}\n        type={type}\n        url={url}\n        name={name}\n        onCancel={onCancel}\n        onDelete={() => {\n          deleteMessage(message as EveryMessage).then(() => {\n            onCancel();\n          });\n        }}\n        isByMe={isByMe}\n        disableDelete={disableDelete}\n      />\n    ),\n    document.getElementById(MODAL_ROOT),\n  );\n};\n\nexport default FileViewer;\n"]},"metadata":{},"sourceType":"module"}