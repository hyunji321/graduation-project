{"ast":null,"code":"import React__default, { useRef } from 'react';\nimport ContextMenu, { EmojiListItems } from './ContextMenu.js';\nimport Icon, { IconTypes, IconColors } from './Icon.js';\nimport IconButton from './IconButton.js';\nimport ImageRenderer from './ImageRenderer.js';\nimport ReactionButton from './ReactionButton.js';\nimport { E as isPendingMessage, D as isFailedMessage, h as getClassName, G as getEmojiListAll } from '../index-7eb65acf.js';\nimport '../_rollupPluginBabelHelpers-6bb0305c.js';\nimport 'react-dom';\nimport './SortByRow.js';\nimport '../uuid-1adedf62.js';\nimport '../index-63949de5.js';\nimport 'prop-types';\nimport '../stringSet-13bbd4a2.js';\nimport '../utils/message/getOutgoingMessageState.js';\nimport '../useLongPress-1303953d.js';\nimport '../MediaQueryContext-11f0e43f.js';\nimport '../utils-4bbbca2c.js';\nfunction MessageItemReactionMenu(_ref) {\n  var className = _ref.className,\n    message = _ref.message,\n    userId = _ref.userId,\n    _ref$spaceFromTrigger = _ref.spaceFromTrigger,\n    spaceFromTrigger = _ref$spaceFromTrigger === void 0 ? {\n      x: 0,\n      y: 0\n    } : _ref$spaceFromTrigger,\n    emojiContainer = _ref.emojiContainer,\n    toggleReaction = _ref.toggleReaction,\n    setSupposedHover = _ref.setSupposedHover;\n  var triggerRef = useRef(null);\n  var containerRef = useRef(null);\n  if (isPendingMessage(message) || isFailedMessage(message)) {\n    return null;\n  }\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: getClassName([className, 'sendbird-message-item-reaction-menu']),\n    ref: containerRef\n  }, /*#__PURE__*/React__default.createElement(ContextMenu, {\n    menuTrigger: function menuTrigger(toggleDropdown) {\n      return /*#__PURE__*/React__default.createElement(IconButton, {\n        className: \"sendbird-message-item-reaction-menu__trigger\",\n        ref: triggerRef,\n        width: \"32px\",\n        height: \"32px\",\n        onClick: function onClick() {\n          toggleDropdown();\n          setSupposedHover(true);\n        },\n        onBlur: function onBlur() {\n          setSupposedHover(false);\n        }\n      }, /*#__PURE__*/React__default.createElement(Icon, {\n        className: \"sendbird-message-item-reaction-menu__trigger__icon\",\n        type: IconTypes.EMOJI_MORE,\n        fillColor: IconColors.CONTENT_INVERSE,\n        width: \"24px\",\n        height: \"24px\"\n      }));\n    },\n    menuItems: function menuItems(close) {\n      var closeDropdown = function closeDropdown() {\n        close();\n        setSupposedHover(false);\n      };\n      return /*#__PURE__*/React__default.createElement(EmojiListItems, {\n        parentRef: triggerRef,\n        parentContainRef: containerRef,\n        closeDropdown: closeDropdown,\n        spaceFromTrigger: spaceFromTrigger\n      }, getEmojiListAll(emojiContainer).map(function (emoji) {\n        var _message$reactions, _message$reactions$fi, _message$reactions$fi2;\n        var isReacted = message === null || message === void 0 ? void 0 : (_message$reactions = message.reactions) === null || _message$reactions === void 0 ? void 0 : (_message$reactions$fi = _message$reactions.filter(function (reaction) {\n          return reaction.key === emoji.key;\n        })[0]) === null || _message$reactions$fi === void 0 ? void 0 : (_message$reactions$fi2 = _message$reactions$fi.userIds) === null || _message$reactions$fi2 === void 0 ? void 0 : _message$reactions$fi2.some(function (reactorId) {\n          return reactorId === userId;\n        });\n        return /*#__PURE__*/React__default.createElement(ReactionButton, {\n          key: emoji.key,\n          width: \"36px\",\n          height: \"36px\",\n          selected: isReacted,\n          onClick: function onClick() {\n            closeDropdown();\n            toggleReaction(message, emoji.key, isReacted);\n          },\n          dataSbId: \"ui_emoji_reactions_menu_\".concat(emoji.key)\n        }, /*#__PURE__*/React__default.createElement(ImageRenderer, {\n          url: emoji.url,\n          width: \"28px\",\n          height: \"28px\",\n          placeHolder: function placeHolder(style) {\n            return /*#__PURE__*/React__default.createElement(\"div\", {\n              style: style\n            }, /*#__PURE__*/React__default.createElement(Icon, {\n              type: IconTypes.QUESTION,\n              fillColor: IconColors.ON_BACKGROUND_3,\n              width: \"28px\",\n              height: \"28px\"\n            }));\n          }\n        }));\n      }));\n    }\n  }));\n}\nexport { MessageItemReactionMenu as default };","map":{"version":3,"mappings":"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","names":["MessageItemReactionMenu","className","_ref","message","userId","spaceFromTrigger","x","y","emojiContainer","toggleReaction","setSupposedHover","triggerRef","useRef","containerRef","isPendingMessage","isFailedMessage","React","getClassName","ref","ContextMenu","menuTrigger","toggleDropdown","IconButton","width","height","onClick","onBlur","Icon","type","IconTypes","EMOJI_MORE","fillColor","IconColors","CONTENT_INVERSE","menuItems","close","closeDropdown","EmojiListItems","parentRef","parentContainRef","getEmojiListAll","map","emoji","isReacted","reactions","_message$reactions","filter","reaction","key","_message$reactions$fi","userIds","_message$reactions$fi2","some","reactorId","ReactionButton","selected","dataSbId","ImageRenderer","url","placeHolder","style","QUESTION","ON_BACKGROUND_3"],"sources":["C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\ui\\MessageItemReactionMenu\\index.tsx"],"sourcesContent":["import './index.scss';\nimport React, { ReactElement, useRef } from 'react';\nimport type { FileMessage, Reaction, UserMessage } from '@sendbird/chat/message';\nimport type { Emoji, EmojiContainer } from '@sendbird/chat';\n\nimport ContextMenu, { EmojiListItems } from '../ContextMenu';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport IconButton from '../IconButton';\nimport ImageRenderer from '../ImageRenderer';\nimport ReactionButton from '../ReactionButton';\nimport { getClassName, getEmojiListAll, isPendingMessage, isFailedMessage } from '../../utils';\nimport { SpaceFromTriggerType } from '../../types';\n\ninterface Props {\n  className?: string | Array<string>;\n  message: UserMessage | FileMessage;\n  userId: string;\n  spaceFromTrigger?: SpaceFromTriggerType;\n  emojiContainer?: EmojiContainer;\n  toggleReaction?: (message: UserMessage | FileMessage, reactionKey: string, isReacted: boolean) => void;\n  setSupposedHover?: (bool: boolean) => void;\n}\n\nexport default function MessageItemReactionMenu({\n  className,\n  message,\n  userId,\n  spaceFromTrigger = { x: 0, y: 0 },\n  emojiContainer,\n  toggleReaction,\n  setSupposedHover,\n}: Props): ReactElement {\n  const triggerRef = useRef(null);\n  const containerRef = useRef(null);\n\n  if (isPendingMessage(message) || isFailedMessage(message)) {\n    return null;\n  }\n\n  return (\n    <div\n      className={getClassName([className, 'sendbird-message-item-reaction-menu'])}\n      ref={containerRef}\n    >\n      <ContextMenu\n        menuTrigger={(toggleDropdown: () => void): ReactElement => (\n          <IconButton\n            className=\"sendbird-message-item-reaction-menu__trigger\"\n            ref={triggerRef}\n            width=\"32px\"\n            height=\"32px\"\n            onClick={(): void => {\n              toggleDropdown();\n              setSupposedHover(true);\n            }}\n            onBlur={(): void => {\n              setSupposedHover(false);\n            }}\n          >\n            <Icon\n              className=\"sendbird-message-item-reaction-menu__trigger__icon\"\n              type={IconTypes.EMOJI_MORE}\n              fillColor={IconColors.CONTENT_INVERSE}\n              width=\"24px\"\n              height=\"24px\"\n            />\n          </IconButton>\n        )}\n        menuItems={(close: () => void): ReactElement => {\n          const closeDropdown = (): void => {\n            close();\n            setSupposedHover(false);\n          };\n          return (\n            <EmojiListItems\n              parentRef={triggerRef}\n              parentContainRef={containerRef}\n              closeDropdown={closeDropdown}\n              spaceFromTrigger={spaceFromTrigger}\n            >\n              {getEmojiListAll(emojiContainer).map((emoji: Emoji): ReactElement => {\n                const isReacted: boolean = message?.reactions\n                  ?.filter((reaction: Reaction) => reaction.key === emoji.key)[0]?.userIds\n                  ?.some((reactorId: string) => reactorId === userId);\n                return (\n                  <ReactionButton\n                    key={emoji.key}\n                    width=\"36px\"\n                    height=\"36px\"\n                    selected={isReacted}\n                    onClick={() => {\n                      closeDropdown();\n                      toggleReaction(message, emoji.key, isReacted);\n                    }}\n                    dataSbId={`ui_emoji_reactions_menu_${emoji.key}`}\n                  >\n                    <ImageRenderer\n                      url={emoji.url}\n                      width=\"28px\"\n                      height=\"28px\"\n                      placeHolder={(style) => (\n                        <div style={style}>\n                          <Icon\n                            type={IconTypes.QUESTION}\n                            fillColor={IconColors.ON_BACKGROUND_3}\n                            width=\"28px\"\n                            height=\"28px\"\n                          />\n                        </div>\n                      )}\n                    />\n                  </ReactionButton>\n                );\n              })}\n            </EmojiListItems>\n          );\n        }}\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}