{"ast":null,"code":"import React__default from 'react';\nimport { K } from './index.module-54d57ec3.js';\nimport { T as TOKEN_TYPES, U as USER_MENTION_PREFIX, g as getWhiteSpacePreservedText } from './tokenize-c40f2b57.js';\nimport { useMessageContext } from './Message/context.js';\nimport MentionLabel from './ui/MentionLabel.js';\nimport LinkLabel from './ui/LinkLabel.js';\nimport { a as LabelTypography } from './index-63949de5.js';\n\n// this function is used to generate a unique key for token in message\n// it changes with updated time and index\n// messageUpdatedAt is the key part of this key generator\nfunction keyGenerator(createdAt, messageUpdatedAt, index) {\n  return \"sb-msg_\".concat(createdAt, \"_\").concat(messageUpdatedAt, \"_\").concat(index);\n}\nfunction TextFragment(_ref) {\n  var tokens = _ref.tokens;\n  var messageStore = useMessageContext();\n  var message = messageStore === null || messageStore === void 0 ? void 0 : messageStore.message;\n  var isByMe = messageStore === null || messageStore === void 0 ? void 0 : messageStore.isByMe;\n  var updatedAt = message.updatedAt,\n    createdAt = message.createdAt;\n  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, tokens === null || tokens === void 0 ? void 0 : tokens.map(function (token, idx) {\n    var key = keyGenerator(createdAt, updatedAt, idx);\n    return K(token.type).with(TOKEN_TYPES.mention, function () {\n      return /*#__PURE__*/React__default.createElement(\"span\", {\n        className: \"sendbird-word\",\n        key: key\n      }, /*#__PURE__*/React__default.createElement(MentionLabel, {\n        mentionTemplate: USER_MENTION_PREFIX,\n        mentionedUserId: token.userId,\n        mentionedUserNickname: token.value,\n        isByMe: isByMe\n      }));\n    }).with(TOKEN_TYPES.url, function () {\n      return /*#__PURE__*/React__default.createElement(\"span\", {\n        className: \"sendbird-word\",\n        key: key\n      }, /*#__PURE__*/React__default.createElement(LinkLabel, {\n        className: \"sendbird-word__url\",\n        src: token.value,\n        type: LabelTypography.BODY_1\n      }, token.value));\n    }).otherwise(function () {\n      return /*#__PURE__*/React__default.createElement(React__default.Fragment, {\n        key: key\n      }, getWhiteSpacePreservedText(token.value));\n    });\n  }));\n}\nexport { TextFragment as T };","map":{"version":3,"mappings":";;;;;;;;AAAA;AACA;AACA;AACO,SAASA,YAAYA,CAC1BC,SAAiB,EACjBC,gBAAwB,EACxBC,KAAa,EACL;EACR,wBAAiBF,SAAU,cAAGC,gBAAiB,cAAGC,KAAM;AAC1D;ACQe,SAASC,YAAYA,OAEM;EAAA,IADxCC,SACkBC,KADlBD;EAEA,IAAME,YAAY,GAAGC,iBAAiB,EAAE;EAExC,IAAMC,OAAO,GAAGF,YAAY,aAAZA,YAAY,KAAZA,8BAAY,CAAEE,OAAsB;EACpD,IAAMC,MAAM,GAAGH,YAAY,aAAZA,YAAY,KAAZA,8BAAY,CAAEG,MAAM;EACnC,IAAQC,SAAS,GAAgBF,OAAO,CAAhCE,SAAS;IAAEV,YAAcQ,OAAO,CAArBR;EAEnB,oBACEW,4DACGP,MAAM,aAANA,MAAM,KAANA,wBAAM,CAAEQ,GAAG,CAAC,UAACC,KAAK,EAAEC,GAAG,EAAK;IAC3B,IAAMC,GAAG,GAAGhB,YAAY,CAACC,SAAS,EAAEU,SAAS,EAAEI,GAAG,CAAC;IACnD,OAAOE,CAAK,CAACH,KAAK,CAACI,IAAI,CAAC,CACrBC,IAAI,CAACC,WAAW,CAACC,OAAO,EAAE;MAAA,oBACzBT;QAAMU,SAAS,EAAC,eAAe;QAACN,GAAG,EAAEA;MAAI,gBACvCJ,6BAACW,YAAY;QACXC,eAAe,EAAEC,mBAAoB;QACrCC,eAAe,EAAEZ,KAAK,CAACa,MAAO;QAC9BC,qBAAqB,EAAEd,KAAK,CAACe,KAAM;QACnCnB,MAAM,EAAEA;MAAO,EACf,CAEL;IAAA,EAAC,CACDS,IAAI,CAACC,WAAW,CAACU,GAAG,EAAE;MAAA,oBACrBlB;QAAMU,SAAS,EAAC,eAAe;QAACN,GAAG,EAAEA;MAAI,gBACvCJ,6BAACmB,SAAS;QACRT,SAAS,EAAC,oBAAoB;QAC9BU,GAAG,EAAElB,KAAK,CAACe,KAAM;QACjBX,IAAI,EAAEe,eAAe,CAACC;MAAO,GAE5BpB,KAAK,CAACe,KAAK,CACF,CAEf;IAAA,EAAC,CACDM,SAAS,CAAC;MAAA,oBAAMvB,6BAACA,cAAK,CAACwB,QAAQ;QAACpB,GAAG,EAAEA;MAAI,GAAEqB,0BAA0B,CAACvB,KAAK,CAACe,KAAK,CAAC,CAAkB;IAAA,EAAC;EAC1G,CAAC,CAAC,CACD;AAEP","names":["keyGenerator","createdAt","messageUpdatedAt","index","TextFragment","tokens","_ref","messageStore","useMessageContext","message","isByMe","updatedAt","React","map","token","idx","key","match","type","with","TOKEN_TYPES","mention","className","MentionLabel","mentionTemplate","USER_MENTION_PREFIX","mentionedUserId","userId","mentionedUserNickname","value","url","LinkLabel","src","LabelTypography","BODY_1","otherwise","Fragment","getWhiteSpacePreservedText"],"sources":["C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\modules\\Message\\utils\\tokens\\keyGenerator.ts","C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\modules\\Message\\components\\TextFragment\\index.tsx"],"sourcesContent":["// this function is used to generate a unique key for token in message\n// it changes with updated time and index\n// messageUpdatedAt is the key part of this key generator\nexport function keyGenerator(\n  createdAt: number,\n  messageUpdatedAt: number,\n  index: number,\n): string {\n  return `sb-msg_${createdAt}_${messageUpdatedAt}_${index}`;\n}\n","import React from 'react';\nimport { UserMessage } from '@sendbird/chat/message';\nimport { match } from 'ts-pattern';\n\nimport { TOKEN_TYPES, Token } from '../../utils/tokens/types';\nimport { useMessageContext } from '../../context/MessageProvider';\nimport { keyGenerator } from '../../utils/tokens/keyGenerator';\nimport MentionLabel from '../../../../ui/MentionLabel';\nimport { USER_MENTION_PREFIX } from '../../consts';\nimport LinkLabel from '../../../../ui/LinkLabel';\nimport { LabelTypography } from '../../../../ui/Label';\nimport { getWhiteSpacePreservedText } from '../../utils/tokens/tokenize';\n\nexport type TextFragmentProps = {\n  tokens: Token[];\n};\n\nexport default function TextFragment({\n  tokens,\n}: TextFragmentProps): React.ReactElement {\n  const messageStore = useMessageContext();\n\n  const message = messageStore?.message as UserMessage;\n  const isByMe = messageStore?.isByMe;\n  const { updatedAt, createdAt } = message;\n\n  return (\n    <>\n      {tokens?.map((token, idx) => {\n        const key = keyGenerator(createdAt, updatedAt, idx);\n        return match(token.type)\n          .with(TOKEN_TYPES.mention, () => (\n            <span className=\"sendbird-word\" key={key}>\n              <MentionLabel\n                mentionTemplate={USER_MENTION_PREFIX}\n                mentionedUserId={token.userId}\n                mentionedUserNickname={token.value}\n                isByMe={isByMe}\n              />\n            </span>\n          ))\n          .with(TOKEN_TYPES.url, () => (\n            <span className=\"sendbird-word\" key={key}>\n              <LinkLabel\n                className=\"sendbird-word__url\"\n                src={token.value}\n                type={LabelTypography.BODY_1}\n              >\n                {token.value}\n              </LinkLabel>\n            </span>\n          ))\n          .otherwise(() => <React.Fragment key={key}>{getWhiteSpacePreservedText(token.value)}</React.Fragment>);\n      })}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}