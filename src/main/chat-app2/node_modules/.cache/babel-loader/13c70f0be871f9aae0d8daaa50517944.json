{"ast":null,"code":"import _slicedToArray from \"C:/Users/\\uC774\\uACBD\\uBBFC/IdeaProjects/sendbird-uikit-whatsapp-sample/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"C:/Users/\\uC774\\uACBD\\uBBFC/IdeaProjects/sendbird-uikit-whatsapp-sample/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/\\uC774\\uACBD\\uBBFC/IdeaProjects/sendbird-uikit-whatsapp-sample/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"C:/Users/\\uC774\\uACBD\\uBBFC/IdeaProjects/sendbird-uikit-whatsapp-sample/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"C:/Users/\\uC774\\uACBD\\uBBFC/IdeaProjects/sendbird-uikit-whatsapp-sample/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/\\uC774\\uACBD\\uBBFC/IdeaProjects/sendbird-uikit-whatsapp-sample/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport React__default, { useState, useRef, useEffect } from 'react';\nimport { a as _defineProperty, _ as _objectSpread2 } from '../_rollupPluginBabelHelpers-6bb0305c.js';\nimport { createPortal } from 'react-dom';\nimport SortByRow from './SortByRow.js';\nimport { h as getClassName } from '../index-7eb65acf.js';\nimport { L as Label, a as LabelTypography, b as LabelColors } from '../index-63949de5.js';\nimport '../uuid-1adedf62.js';\nimport '../utils/message/getOutgoingMessageState.js';\nimport 'prop-types';\nimport '../stringSet-13bbd4a2.js';\n\n// padding to handle height of last item in message-list\nvar HEIGHT_PADDING = 60;\nvar MenuItems$1 = /*#__PURE__*/function (_React__default$Compo) {\n  _inherits(MenuItems$1, _React__default$Compo);\n  var _super = _createSuper(MenuItems$1);\n  function MenuItems$1(props) {\n    var _this;\n    _classCallCheck(this, MenuItems$1);\n    _this = _super.call(this, props);\n    _defineProperty(_assertThisInitialized(_this), \"menuRef\", /*#__PURE__*/React__default.createRef());\n    _defineProperty(_assertThisInitialized(_this), \"setupEvents\", function () {\n      var closeDropdown = _this.props.closeDropdown;\n      var _assertThisInitialize = _assertThisInitialized(_this),\n        menuRef = _assertThisInitialize.menuRef;\n      var handleClickOutside = function handleClickOutside(event) {\n        var _menuRef$current, _menuRef$current$cont;\n        if (menuRef !== null && menuRef !== void 0 && menuRef.current && !(menuRef !== null && menuRef !== void 0 && (_menuRef$current = menuRef.current) !== null && _menuRef$current !== void 0 && (_menuRef$current$cont = _menuRef$current.contains) !== null && _menuRef$current$cont !== void 0 && _menuRef$current$cont.call(_menuRef$current, event.target))) {\n          closeDropdown === null || closeDropdown === void 0 ? void 0 : closeDropdown();\n        }\n      };\n      _this.setState({\n        handleClickOutside: handleClickOutside\n      });\n      document.addEventListener('mousedown', handleClickOutside);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"cleanUpEvents\", function () {\n      var handleClickOutside = _this.state.handleClickOutside;\n      document.removeEventListener('mousedown', handleClickOutside);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"getMenuPosition\", function () {\n      var _parentRef$current, _parentRef$current$ge;\n      var _this$props2 = _this.props,\n        parentRef = _this$props2.parentRef,\n        openLeft = _this$props2.openLeft;\n      var parentRect = parentRef === null || parentRef === void 0 ? void 0 : (_parentRef$current = parentRef.current) === null || _parentRef$current === void 0 ? void 0 : (_parentRef$current$ge = _parentRef$current.getBoundingClientRect) === null || _parentRef$current$ge === void 0 ? void 0 : _parentRef$current$ge.call(_parentRef$current);\n      var x = (parentRect === null || parentRect === void 0 ? void 0 : parentRect.x) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.left) || 0;\n      var y = (parentRect === null || parentRect === void 0 ? void 0 : parentRect.y) || (parentRect === null || parentRect === void 0 ? void 0 : parentRect.top) || 0;\n      var menuStyle = {\n        top: y,\n        left: x\n      };\n      if (!_this.menuRef.current) return menuStyle;\n      var _window = window,\n        innerWidth = _window.innerWidth,\n        innerHeight = _window.innerHeight;\n      var rect = _this.menuRef.current.getBoundingClientRect();\n      if (y + rect.height + HEIGHT_PADDING > innerHeight) {\n        menuStyle.top -= rect.height;\n      }\n      if (x + rect.width > innerWidth && !openLeft) {\n        menuStyle.left -= rect.width;\n      }\n      if (menuStyle.top < 0) {\n        menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n      }\n      menuStyle.top += 32;\n      if (openLeft) {\n        var padding = Number.isNaN(rect.width - 30) ? 108 // default\n        : rect.width - 30;\n        menuStyle.left -= padding;\n      }\n      // warning: this section has to be executed after the openLeft is calculated\n      // menu is outside viewport\n      if (menuStyle.left < 0) {\n        menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n      }\n      _this.setState({\n        menuStyle: menuStyle\n      });\n      return menuStyle;\n    });\n    _this.state = {\n      menuStyle: {},\n      handleClickOutside: function handleClickOutside() {/* noop */}\n    };\n    return _this;\n  }\n  _createClass(MenuItems$1, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setupEvents();\n      this.getMenuPosition();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cleanUpEvents();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props;\n      var menuStyle = this.state.menuStyle;\n      var _this$props3 = this.props,\n        children = _this$props3.children,\n        style = _this$props3.style,\n        _this$props3$classNam = _this$props3.className,\n        className = _this$props3$classNam === void 0 ? '' : _this$props3$classNam;\n      return /*#__PURE__*/createPortal( /*#__PURE__*/React__default.createElement(\"div\", {\n        className: (_this$props = this.props) === null || _this$props === void 0 ? void 0 : _this$props.className\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        className: \"sendbird-dropdown__menu-backdrop\"\n      }), /*#__PURE__*/React__default.createElement(\"ul\", {\n        className: \"\".concat(className, \" sendbird-dropdown__menu\"),\n        ref: this.menuRef,\n        style: _objectSpread2({\n          display: 'inline-block',\n          position: 'fixed',\n          left: \"\".concat(Math.round(menuStyle.left), \"px\"),\n          top: \"\".concat(Math.round(menuStyle.top), \"px\")\n        }, style)\n      }, children)), document.getElementById('sendbird-dropdown-portal'));\n    }\n  }]);\n  return MenuItems$1;\n}(React__default.Component);\nvar defaultParentRect = {\n  x: 0,\n  y: 0,\n  left: 0,\n  top: 0,\n  height: 0\n};\nvar EmojiListItems$1 = function EmojiListItems$1(_ref) {\n  var children = _ref.children,\n    parentRef = _ref.parentRef,\n    parentContainRef = _ref.parentContainRef,\n    _ref$spaceFromTrigger = _ref.spaceFromTrigger,\n    spaceFromTrigger = _ref$spaceFromTrigger === void 0 ? {\n      x: 0,\n      y: 0\n    } : _ref$spaceFromTrigger,\n    closeDropdown = _ref.closeDropdown;\n  var _useState = useState({\n      left: 0,\n      top: 0\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    reactionStyle = _useState2[0],\n    setReactionStyle = _useState2[1];\n  var reactionRef = useRef(null);\n\n  /* showParent & hideParent */\n  useEffect(function () {\n    if (parentContainRef && parentContainRef !== null && parentContainRef !== void 0 && parentContainRef.current) {\n      parentContainRef.current.classList.add('sendbird-reactions--pressed');\n    }\n    return function () {\n      if (parentContainRef && parentContainRef !== null && parentContainRef !== void 0 && parentContainRef.current) {\n        parentContainRef.current.classList.remove('sendbird-reactions--pressed');\n      }\n    };\n  }, []);\n\n  /* setupEvents & cleanupEvents */\n  useEffect(function () {\n    var handleClickOutSide = function handleClickOutSide(event) {\n      var _reactionRef$current, _reactionRef$current$;\n      if (reactionRef !== null && reactionRef !== void 0 && reactionRef.current && !(reactionRef !== null && reactionRef !== void 0 && (_reactionRef$current = reactionRef.current) !== null && _reactionRef$current !== void 0 && (_reactionRef$current$ = _reactionRef$current.contains) !== null && _reactionRef$current$ !== void 0 && _reactionRef$current$.call(_reactionRef$current, event.target))) {\n        closeDropdown();\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutSide);\n    return function () {\n      document.removeEventListener('mousedown', handleClickOutSide);\n    };\n  }, []);\n\n  /* getBarPosition */\n  useEffect(function () {\n    var _parentRef$current$ge, _parentRef$current;\n    var spaceFromTriggerX = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.x) || 0;\n    var spaceFromTriggerY = (spaceFromTrigger === null || spaceFromTrigger === void 0 ? void 0 : spaceFromTrigger.y) || 0;\n    var parentRect = (_parentRef$current$ge = parentRef === null || parentRef === void 0 ? void 0 : (_parentRef$current = parentRef.current) === null || _parentRef$current === void 0 ? void 0 : _parentRef$current.getBoundingClientRect()) !== null && _parentRef$current$ge !== void 0 ? _parentRef$current$ge : defaultParentRect;\n    var x = parentRect.x || parentRect.left;\n    var y = parentRect.y || parentRect.top;\n    var reactionStyle = {\n      top: y,\n      left: x\n    };\n    if (!(reactionRef !== null && reactionRef !== void 0 && reactionRef.current)) {\n      setReactionStyle(reactionStyle);\n    } else {\n      var _reactionRef$current2;\n      var rect = reactionRef === null || reactionRef === void 0 ? void 0 : (_reactionRef$current2 = reactionRef.current) === null || _reactionRef$current2 === void 0 ? void 0 : _reactionRef$current2.getBoundingClientRect();\n      if (reactionStyle.top < rect.height) {\n        reactionStyle.top += parentRect.height;\n        reactionStyle.top += spaceFromTriggerY;\n      } else {\n        reactionStyle.top -= rect.height;\n        reactionStyle.top -= spaceFromTriggerY;\n      }\n      reactionStyle.left -= rect.width / 2;\n      reactionStyle.left += parentRect.height / 2 - 2;\n      reactionStyle.left += spaceFromTriggerX;\n      var maximumLeft = window.innerWidth - rect.width;\n      if (maximumLeft < reactionStyle.left) {\n        reactionStyle.left = maximumLeft;\n      }\n      if (reactionStyle.left < 0) {\n        reactionStyle.left = 0;\n      }\n      setReactionStyle(reactionStyle);\n    }\n  }, []);\n  var rootElement = document.getElementById('sendbird-emoji-list-portal');\n  if (rootElement) {\n    return /*#__PURE__*/createPortal( /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(\"div\", {\n      className: \"sendbird-dropdown__menu-backdrop\"\n    }), /*#__PURE__*/React__default.createElement(\"ul\", {\n      className: \"sendbird-dropdown__reaction-bar\",\n      ref: reactionRef,\n      style: {\n        display: 'inline-block',\n        position: 'fixed',\n        left: \"\".concat(Math.round(reactionStyle.left), \"px\"),\n        top: \"\".concat(Math.round(reactionStyle.top), \"px\")\n      }\n    }, /*#__PURE__*/React__default.createElement(SortByRow, {\n      className: \"sendbird-dropdown__reaction-bar__row\",\n      maxItemCount: 8,\n      itemWidth: 44,\n      itemHeight: 40\n    }, children))), rootElement);\n  }\n  return null;\n};\nvar ENTER_KEY = 13;\nvar MenuItems = MenuItems$1;\nvar EmojiListItems = EmojiListItems$1;\nvar MenuItem = function MenuItem(_ref) {\n  var _ref$className = _ref.className,\n    className = _ref$className === void 0 ? '' : _ref$className,\n    children = _ref.children,\n    onClick = _ref.onClick,\n    _ref$disable = _ref.disable,\n    disable = _ref$disable === void 0 ? false : _ref$disable,\n    _ref$dataSbId = _ref.dataSbId,\n    dataSbId = _ref$dataSbId === void 0 ? '' : _ref$dataSbId;\n  var handleClickEvent = function handleClickEvent(e) {\n    if (!disable && onClick) {\n      onClick === null || onClick === void 0 ? void 0 : onClick(e);\n    }\n  };\n  return /*#__PURE__*/React__default.createElement(\"li\", {\n    className: getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : '']),\n    role: \"menuitem\",\n    \"aria-disabled\": disable ? true : false,\n    onClick: handleClickEvent,\n    onKeyPress: function onKeyPress(e) {\n      if (e.keyCode === ENTER_KEY) handleClickEvent(e);\n    },\n    tabIndex: 0,\n    \"data-sb-id\": dataSbId\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-dropdown__menu-item__text\",\n    type: LabelTypography.SUBTITLE_2,\n    color: disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1\n  }, children));\n};\nvar MenuRoot = function MenuRoot() {\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    id: \"sendbird-dropdown-portal\",\n    className: \"sendbird-dropdown-portal\"\n  });\n};\n\n// For the test environment\nvar EmojiReactionListRoot = function EmojiReactionListRoot() {\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    id: \"sendbird-emoji-list-portal\"\n  });\n};\nfunction ContextMenu(_ref2) {\n  var menuTrigger = _ref2.menuTrigger,\n    menuItems = _ref2.menuItems,\n    isOpen = _ref2.isOpen;\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    showMenu = _useState4[0],\n    setShowMenu = _useState4[1];\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-context-menu\",\n    style: {\n      display: 'inline'\n    }\n  }, menuTrigger === null || menuTrigger === void 0 ? void 0 : menuTrigger(function () {\n    return setShowMenu(!showMenu);\n  }), (showMenu || isOpen) && menuItems(function () {\n    return setShowMenu(false);\n  }));\n}\nexport { EmojiListItems, EmojiReactionListRoot, MenuItem, MenuItems, MenuRoot, ContextMenu as default };","map":{"version":3,"mappings":"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","names":["HEIGHT_PADDING","MenuItems","constructor","props","_defineProperty","React","createRef","closeDropdown","menuRef","handleClickOutside","event","current","_menuRef$current","contains","_menuRef$current$cont","target","setState","document","addEventListener","state","removeEventListener","parentRef","openLeft","parentRect","_parentRef$current","getBoundingClientRect","_parentRef$current$ge","x","left","y","top","menuStyle","window","innerWidth","innerHeight","rect","height","width","padding","Number","isNaN","componentDidMount","setupEvents","getMenuPosition","componentWillUnmount","cleanUpEvents","render","children","style","className","createPortal","_this$props","ref","display","position","Math","round","getElementById","Component","defaultParentRect","EmojiListItems","_ref","parentContainRef","spaceFromTrigger","useState","reactionStyle","setReactionStyle","reactionRef","useRef","useEffect","classList","add","remove","handleClickOutSide","_reactionRef$current","_reactionRef$current$","spaceFromTriggerX","spaceFromTriggerY","_reactionRef$current2","maximumLeft","rootElement","SortByRow","maxItemCount","itemWidth","itemHeight","ENTER_KEY","_MenuItems","_EmojiListItems","MenuItem","onClick","disable","dataSbId","handleClickEvent","e","getClassName","role","onKeyPress","keyCode","tabIndex","Label","type","LabelTypography","SUBTITLE_2","color","LabelColors","ONBACKGROUND_4","ONBACKGROUND_1","MenuRoot","id","EmojiReactionListRoot","ContextMenu","menuTrigger","_ref2","menuItems","isOpen","showMenu","setShowMenu"],"sources":["C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\ui\\ContextMenu\\MenuItems.tsx","C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\ui\\ContextMenu\\EmojiListItems.tsx","C:\\Users\\이경민\\IdeaProjects\\sendbird-uikit-whatsapp-sample\\node_modules\\@sendbird\\src\\ui\\ContextMenu\\index.tsx"],"sourcesContent":["import React, { ReactElement } from 'react';\nimport { createPortal } from 'react-dom';\n\ninterface MenuItemsProps {\n  className?: string;\n  style?: Record<string, string>;\n  openLeft?: boolean;\n  children: React.ReactElement | Array<React.ReactElement> | React.ReactNode;\n  parentRef: React.RefObject<HTMLElement>;\n  parentContainRef: React.RefObject<HTMLElement>;\n  closeDropdown: () => void;\n}\n\ntype MenuStyleType = { top?: number, left?: number };\ninterface MenuItemsState {\n  menuStyle: MenuStyleType;\n  handleClickOutside: (e: MouseEvent) => void;\n}\n\n// padding to handle height of last item in message-list\nconst HEIGHT_PADDING = 60;\n\nexport default class MenuItems extends React.Component<MenuItemsProps, MenuItemsState> {\n  constructor(props: MenuItemsProps) {\n    super(props);\n    this.state = {\n      menuStyle: {},\n      handleClickOutside: () => { /* noop */ },\n    };\n  }\n\n  menuRef: React.RefObject<HTMLUListElement> = React.createRef();\n\n  componentDidMount(): void {\n    this.setupEvents();\n    this.getMenuPosition();\n  }\n\n  componentWillUnmount(): void {\n    this.cleanUpEvents();\n  }\n\n  setupEvents = (): void => {\n    const { closeDropdown } = this.props;\n    const { menuRef } = this;\n    const handleClickOutside = (event) => {\n      if (menuRef?.current && !menuRef?.current?.contains?.(event.target)) {\n        closeDropdown?.();\n      }\n    };\n    this.setState({\n      handleClickOutside,\n    });\n\n    document.addEventListener('mousedown', handleClickOutside);\n  };\n\n  cleanUpEvents = (): void => {\n    const {\n      handleClickOutside,\n    } = this.state;\n    document.removeEventListener('mousedown', handleClickOutside);\n  };\n\n  getMenuPosition = (): MenuStyleType => {\n    const { parentRef, openLeft } = this.props;\n    const parentRect = parentRef?.current?.getBoundingClientRect?.();\n    const x = parentRect?.x || parentRect?.left || 0;\n    const y = parentRect?.y || parentRect?.top || 0;\n    const menuStyle = {\n      top: y,\n      left: x,\n    };\n    if (!this.menuRef.current) return menuStyle;\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menuRef.current.getBoundingClientRect();\n    if (y + rect.height + HEIGHT_PADDING > innerHeight) {\n      menuStyle.top -= rect.height;\n    }\n    if (x + rect.width > innerWidth && !openLeft) {\n      menuStyle.left -= rect.width;\n    }\n    if (menuStyle.top < 0) {\n      menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n    menuStyle.top += 32;\n    if (openLeft) {\n      const padding = Number.isNaN(rect.width - 30)\n        ? 108 // default\n        : rect.width - 30;\n      menuStyle.left -= padding;\n    }\n    // warning: this section has to be executed after the openLeft is calculated\n    // menu is outside viewport\n    if (menuStyle.left < 0) {\n      menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    this.setState({ menuStyle });\n    return menuStyle;\n  };\n\n  render(): ReactElement {\n    const { menuStyle } = this.state;\n    const { children, style, className = '' } = this.props;\n    return (\n      createPortal(\n        (\n          <div className={this.props?.className}>\n            <div className=\"sendbird-dropdown__menu-backdrop\" />\n            <ul\n              className={`${className} sendbird-dropdown__menu`}\n              ref={this.menuRef}\n              style={{\n                display: 'inline-block',\n                position: 'fixed',\n                left: `${Math.round(menuStyle.left)}px`,\n                top: `${Math.round(menuStyle.top)}px`,\n                ...style,\n              }}\n            >\n              {children}\n            </ul>\n          </div>\n        ),\n        document.getElementById('sendbird-dropdown-portal'),\n      )\n    );\n  }\n}\n","import React, { ReactElement, ReactNode, RefObject, useEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport SortByRow from '../SortByRow';\nimport { Nullable } from '../../types';\n\nconst defaultParentRect = { x: 0, y: 0, left: 0, top: 0, height: 0 };\ntype SpaceFromTrigger = { x: number, y: number };\ntype ReactionStyle = { left: number, top: number };\nexport interface EmojiListItemsProps {\n  closeDropdown: () => void;\n  children: ReactNode;\n  parentRef: RefObject<HTMLDivElement>;\n  parentContainRef: RefObject<HTMLDivElement>;\n  spaceFromTrigger?: SpaceFromTrigger;\n}\n\nexport const EmojiListItems = ({\n  children,\n  parentRef,\n  parentContainRef,\n  spaceFromTrigger = { x: 0, y: 0 },\n  closeDropdown,\n}: EmojiListItemsProps): Nullable<ReactElement> => {\n  const [reactionStyle, setReactionStyle] = useState<ReactionStyle>({ left: 0, top: 0 });\n  const reactionRef: RefObject<HTMLUListElement> = useRef(null);\n\n  /* showParent & hideParent */\n  useEffect(() => {\n    if (parentContainRef && parentContainRef?.current) {\n      parentContainRef.current.classList.add('sendbird-reactions--pressed');\n    }\n    return () => {\n      if (parentContainRef && parentContainRef?.current) {\n        parentContainRef.current.classList.remove('sendbird-reactions--pressed');\n      }\n    };\n  }, []);\n\n  /* setupEvents & cleanupEvents */\n  useEffect(() => {\n    const handleClickOutSide = (event) => {\n      if (reactionRef?.current && !reactionRef?.current?.contains?.(event.target)) {\n        closeDropdown();\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutSide);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutSide);\n    };\n  }, []);\n\n  /* getBarPosition */\n  useEffect(() => {\n    const spaceFromTriggerX = spaceFromTrigger?.x || 0;\n    const spaceFromTriggerY = spaceFromTrigger?.y || 0;\n    const parentRect = parentRef?.current?.getBoundingClientRect() ?? defaultParentRect;\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n    const reactionStyle = {\n      top: y,\n      left: x,\n    };\n    if (!reactionRef?.current) {\n      setReactionStyle(reactionStyle);\n    } else {\n      const rect = reactionRef?.current?.getBoundingClientRect();\n      if (reactionStyle.top < rect.height) {\n        reactionStyle.top += parentRect.height;\n        reactionStyle.top += spaceFromTriggerY;\n      } else {\n        reactionStyle.top -= rect.height;\n        reactionStyle.top -= spaceFromTriggerY;\n      }\n      reactionStyle.left -= rect.width / 2;\n      reactionStyle.left += (parentRect.height / 2) - 2;\n      reactionStyle.left += spaceFromTriggerX;\n      const maximumLeft = window.innerWidth - rect.width;\n      if (maximumLeft < reactionStyle.left) {\n        reactionStyle.left = maximumLeft;\n      }\n      if (reactionStyle.left < 0) {\n        reactionStyle.left = 0;\n      }\n      setReactionStyle(reactionStyle);\n    }\n  }, []);\n\n  const rootElement = document.getElementById('sendbird-emoji-list-portal');\n  if (rootElement) {\n    return (\n      createPortal(\n        <>\n          <div className=\"sendbird-dropdown__menu-backdrop\" />\n          <ul\n            className=\"sendbird-dropdown__reaction-bar\"\n            ref={reactionRef}\n            style={{\n              display: 'inline-block',\n              position: 'fixed',\n              left: `${Math.round(reactionStyle.left)}px`,\n              top: `${Math.round(reactionStyle.top)}px`,\n            }}\n          >\n            <SortByRow\n              className=\"sendbird-dropdown__reaction-bar__row\"\n              maxItemCount={8}\n              itemWidth={44}\n              itemHeight={40}\n            >\n              {children}\n            </SortByRow>\n          </ul>\n        </>,\n        rootElement,\n      )\n    );\n  }\n  return null;\n};\n\nexport default EmojiListItems;\n","import React, { ReactElement, MouseEvent, useState, ReactNode } from 'react';\nimport './index.scss';\n\nimport _MenuItems from './MenuItems';\nimport _EmojiListItems from './EmojiListItems';\n\nimport { getClassName } from '../../utils';\nimport Label, { LabelTypography, LabelColors } from '../Label';\n\nconst ENTER_KEY = 13;\n\nexport const MenuItems = _MenuItems;\nexport const EmojiListItems = _EmojiListItems;\n\nexport interface MenuItemProps {\n  className?: string | Array<string>;\n  children: ReactElement | ReactElement[] | ReactNode;\n  onClick?: (e: MouseEvent<HTMLLIElement>) => void;\n  disable?: boolean;\n  dataSbId?: string;\n}\nexport const MenuItem = ({\n  className = '',\n  children,\n  onClick,\n  disable = false,\n  dataSbId = '',\n}: MenuItemProps): ReactElement => {\n  const handleClickEvent = (e) => {\n    if (!disable && onClick) {\n      onClick?.(e);\n    }\n  };\n  return (\n    <li\n      className={getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : ''])}\n      role=\"menuitem\"\n      aria-disabled={disable ? true : false}\n      onClick={handleClickEvent}\n      onKeyPress={(e) => { if (e.keyCode === ENTER_KEY) handleClickEvent(e); }}\n      tabIndex={0}\n      data-sb-id={dataSbId}\n    >\n      <Label\n        className=\"sendbird-dropdown__menu-item__text\"\n        type={LabelTypography.SUBTITLE_2}\n        color={disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1}\n      >\n        {children}\n      </Label>\n    </li>\n  );\n};\n\nexport const MenuRoot = (): ReactElement => (\n  <div\n    id=\"sendbird-dropdown-portal\"\n    className=\"sendbird-dropdown-portal\"\n  />\n);\n\n// For the test environment\nexport const EmojiReactionListRoot = (): ReactElement => <div id=\"sendbird-emoji-list-portal\" />;\n\ntype MenuDisplayingFunc = () => void;\nexport interface ContextMenuProps {\n  menuTrigger?: (func: MenuDisplayingFunc) => ReactElement;\n  menuItems: (func: MenuDisplayingFunc) => ReactElement;\n  isOpen?: boolean;\n}\nexport default function ContextMenu({\n  menuTrigger,\n  menuItems,\n  isOpen,\n}: ContextMenuProps): ReactElement {\n  const [showMenu, setShowMenu] = useState(false);\n  return (\n    <div\n      className=\"sendbird-context-menu\"\n      style={{ display: 'inline' }}\n    >\n      {menuTrigger?.(() => setShowMenu(!showMenu))}\n      {(showMenu || isOpen) && menuItems(() => setShowMenu(false))}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}