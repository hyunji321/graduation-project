import{i as e,a as t,_ as n,n as r,b as s,c as a,E as u,A as d,d as l,e as p,f as v,U as _,g as m,h as b,P as y,j as w,k,l as I,m as E,B as D,S as A,V as F,o as j,L as q,u as z,p as x,q as G,r as W,v as K,C as V,s as J,t as Z,w as $,x as ee,W as te,y as ne,z as re,D as ie,F as se,G as oe,H as ae,I as ue,J as ce,K as de,M as le,N as he}from"./lib/__bundle-2cf2dbb7.js";export{Q as CachedChannelInfo,O as ChannelType,C as ConnectionState,L as LocalCacheConfig,R as LogLevel,N as PushTemplate,H as PushTokenRegistrationState,P as PushTokenType,M as PushTriggerOption,T as Role,o as SendbirdChatOptions,S as SendbirdError,X as UIKitConfigInfo,U as User,Y as UserOnlineState}from"./lib/__bundle-2cf2dbb7.js";import{M as fe,a as pe}from"./lib/__bundle-199cda92.js";export{P as Plugin}from"./lib/__bundle-199cda92.js";import{PollModule as ve}from"./poll.js";import{N as _e,a as ge,b as me,c as be,d as ye,e as we}from"./lib/__bundle-e902ed46.js";export{B as BannedUserListQuery,f as BaseChannel,M as MutedUserListQuery,O as OperatorListQuery,R as ReportCategory,g as RestrictedUser,h as RestrictionInfo,i as RestrictionType}from"./lib/__bundle-e902ed46.js";import{g as ke,G as Ie,a as Ce,M as Se,N as Te,b as Pe,c as Ee,A as De,I as Ue,d as Oe,U as Le,e as Ne,f as Ae,D as Me,h as Re,i as Fe,j as je,R as qe,k as ze}from"./lib/__bundle-b2746c15.js";export{c as MemoryStore}from"./lib/__bundle-b2746c15.js";import{P as Qe,a as xe}from"./lib/__bundle-b3187dac.js";export{P as Participant}from"./lib/__bundle-6d9f318a.js";var He={profileImage:null,profileUrl:null,nickname:null},Ge=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return n(t,e),t}((function(){this.onSessionExpired=r,this.onSessionTokenRequired=function(e){return e(null)},this.onSessionError=r,this.onSessionRefreshed=r,this.onSessionClosed=r})),We=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return n(t,e),t}((function(){this.onConnected=r,this.onReconnectStarted=r,this.onReconnectSucceeded=r,this.onReconnectFailed=r,this.onDisconnected=r})),Ke=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return Object.keys(t).forEach((function(e){n.hasOwnProperty(e)&&(n[e]=t[e])})),n}return n(t,e),t}((function(){this.onFriendsDiscovered=r,this.onTotalUnreadMessageCountUpdated=r})),Ve=function(e,t){return function(n,r){if(1===n)e.clear().then((function(){t.clear().then((function(){(function(e){return s(void 0,void 0,void 0,(function(){return a(this,(function(t){return[2,e.commitSchema([{collectionName:_e,keyName:ge,index:[ke(Ie.LATEST_LAST_MESSAGE),ke(Ie.CHRONOLOGICAL),ke(Ie.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:me,keyName:be,index:[Ce(Se.CHANNEL_LATEST),Ce(Se.NEWEST_CHILD_MESSAGE)]},{collectionName:Te,keyName:Pe,index:[Ce(Se.CHANNEL_LATEST),Ce(Se.NEWEST_CHILD_MESSAGE)]},{collectionName:ye,keyName:we}])]}))}))})(e).then((function(){return r()})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)}))})).catch((function(e){return r(e)}));else r()}},Be=function(){return"undefined"!=typeof document?document.visibilityState:"visible"},Je=function(e){function t(t){var n=t.getVisibilityState,r=void 0===n?Be:n,i=t.initialState,s=void 0===i?"visible":i,o=t.isEnabled,a=void 0===o||o,u=t.pauseCheckDelay,c=void 0===u?3e4:u,d=e.call(this)||this;return d._pauseCheckDelay=3e4,d._pauseDelayTimer=null,d._currentState="visible",d._getVisibilityState=r,d._pauseCheckDelay=c,d._currentState=s,d._isEnabled=a,d._boundToggleState=d._toggleState.bind(d),d}return n(t,e),Object.defineProperty(t.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAvailable",{get:function(){return"undefined"!=typeof window&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),t.prototype._toggleState=function(){var e=this,t=this._getVisibilityState();"hidden"!==t?"hidden"===this._currentState&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=null),this.dispatch("resume")):"hidden"!==this._currentState&&(this._pauseDelayTimer=setTimeout((function(){e._pauseDelayTimer=null,e.dispatch("pause")}),this._pauseCheckDelay)),this._currentState=t},t.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},t.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},t}(u),Xe=function(){function e(e){var t=e.logger,n=e.connectionDelegate,r=void 0===n?null:n,i=this;this._onlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.reconnect()},this._offlineWorker=function(){var e;return null===(e=i.connectionDelegate)||void 0===e?void 0:e.disconnect()},this.unsubscribes=[],this._onlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("online",e),function(){return window.removeEventListener("online",e,!1)}},this._offlineListener=function(e){if(i.isAvailableOnWeb)return window.addEventListener("offline",e),function(){return window.removeEventListener("offline",e,!1)}},this.logger=t,r&&(this.connectionDelegate=r)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return"undefined"!=typeof window&&window.addEventListener&&"ononline"in window&&"onoffline"in window&&"undefined"!=typeof navigator&&void 0!==navigator.onLine},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._onlineListener=e)},e.prototype.setOfflineListener=function(e){Boolean(e)&&"function"==typeof e&&(this._offlineListener=e)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var e=this;this.unsubscribes.forEach((function(t){try{null==t||t()}catch(t){e.logger.warn(t.message)}})),this.unsubscribes=[]},e.prototype.isOnline=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise((function(e){fetch("https://www.google.com",{method:d.GET,mode:"no-cors"}).then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},e}(),Ye=function(e){function t(t){var n=t.userId,r=t.nickname,i=void 0===r?null:r,s=t.profileUrl,o=void 0===s?null:s,a=t.profileImage,u=void 0===a?null:a,c=t.preferredLanguages,h=void 0===c?null:c,f=e.call(this)||this;return f.method=d.PUT,f.path="".concat(l,"/").concat(encodeURIComponent(n)),f.params=p({nickname:i,profile_url:o,profile_file:u,preferred_languages:h}),f}return n(t,e),t}(v),Ze=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=null,r.user=new _(t,m({},n)),r}return n(t,e),t}(b),$e=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=d.POST,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/push/apns"),i.params={apns_device_token:r,always_push:!0},i}return n(t,e),t}(v);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.type=n.type?y[n.type.toLowerCase()]:y.UNKNOWN,r.user=new _(t,n.user),r}n(t,e)}(b);var et=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=d.POST,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/push/gcm"),i.params={gcm_reg_token:r,always_push:!0},i}return n(t,e),t}(v);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.type=n.type?y[n.type.toLowerCase()]:y.UNKNOWN,r.user=new _(t,n.user),r}n(t,e)}(b);var tt=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=d.DELETE,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/push/apns/").concat(encodeURIComponent(r)),i}return n(t,e),t}(v);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new _(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}n(t,e)}(b);var nt=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=d.DELETE,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/push/gcm/").concat(encodeURIComponent(r)),i}return n(t,e),t}(v);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.token=n.token,r.user=new _(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}n(t,e)}(b);var rt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=d.DELETE,r.path="".concat(l,"/").concat(encodeURIComponent(n),"/push/apns"),r}return n(t,e),t}(v);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?y[n.type.toLowerCase()]:y.UNKNOWN,r.user=new _(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}n(t,e)}(b);var it=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=d.DELETE,r.path="".concat(l,"/").concat(encodeURIComponent(n),"/push/gcm"),r}return n(t,e),t}(v);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type=n.type?y[n.type.toLowerCase()]:y.UNKNOWN,r.user=new _(t,n.user),r.lastDeletedAt=n.device_token_last_deleted_at,r}n(t,e)}(b);var st=function(e){function t(t){var n=t.userId,r=t.type,i=t.token,s=t.ts,o=e.call(this)||this;return o.method=d.GET,o.path="".concat(l,"/").concat(encodeURIComponent(n),"/push/").concat(encodeURIComponent(r),"/device_tokens"),o.params={created_ts:s,token:i},o}return n(t,e),t}(v),ot=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTokens={type:n.type?y[n.type.toLowerCase()]:y.UNKNOWN,deviceTokens:n.device_tokens,hasMore:n.has_more,token:n.token},r}return n(t,e),t}(b),at=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=d.GET,r.path="".concat(l,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),r}return n(t,e),t}(v),ut=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return n(t,e),t}(b),ct=function(e){function t(t){var n=t.userId,r=t.willAutoAccept,i=e.call(this)||this;return i.method=d.PUT,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/channel_invitation_preference"),i.params={auto_accept:r},i}return n(t,e),t}(v),dt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.autoAccept=n.auto_accept,r}return n(t,e),t}(b),lt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=d.GET,r.path="".concat(l,"/").concat(encodeURIComponent(n),"/push_preference"),r}return n(t,e),t}(v),ht=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return n(t,e),t}(b),ft=function(e){function t(t){var n=t.userId,r=t.doNotDisturbOn,i=t.startHour,s=t.startMin,o=t.endHour,a=t.endMin,u=t.timezone,c=e.call(this)||this;return c.method=d.PUT,c.path="".concat(l,"/").concat(encodeURIComponent(n),"/push_preference"),c.params={do_not_disturb:r,start_hour:i,start_min:s,end_hour:o,end_min:a,timezone:u},c}return n(t,e),t}(v),pt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.preference={doNotDisturbOn:n.do_not_disturb,startHour:n.start_hour,startMin:n.start_min,endHour:n.end_hour,endMin:n.end_min,timezone:n.timezone},r}return n(t,e),t}(b),vt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=d.GET,r.path="".concat(l,"/").concat(encodeURIComponent(n),"/push_preference"),r}return n(t,e),t}(v),_t=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return n(t,e),t}(b),gt=function(e){function t(t){var n=t.userId,r=t.snoozeOn,i=t.startTs,s=t.endTs,o=e.call(this)||this;return o.method=d.PUT,o.path="".concat(l,"/").concat(encodeURIComponent(n),"/push_preference"),o.params={snooze_enabled:r,snooze_start_ts:i,snooze_end_ts:s},o}return n(t,e),t}(v),mt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.snoozePeriod={isSnoozeOn:n.snooze_enabled},"number"==typeof n.snooze_start_ts&&(r.snoozePeriod.startTs=n.snooze_start_ts),"number"==typeof n.snooze_end_ts&&(r.snoozePeriod.endTs=n.snooze_end_ts),r}return n(t,e),t}(b),bt=function(e){function t(t){var n=t.userId,r=t.blockedUserId,i=e.call(this)||this;return i.method=d.POST,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/block"),i.params={target_id:r},i}return n(t,e),t}(v);!function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.user=new _(t,n),r}n(t,e)}(b);var yt=function(e){function t(t){var n=t.userId,r=t.unblockedUserId,i=e.call(this)||this;return i.method=d.DELETE,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/block/").concat(encodeURIComponent(r)),i}return n(t,e),t}(v);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(b);var wt=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=d.GET,r.path="".concat(l,"/").concat(encodeURIComponent(n),"/push_preference"),r}return n(t,e),t}(v),kt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return n(t,e),t}(b),It=function(e){function t(t){var n=t.userId,r=t.pushTriggerOption,i=e.call(this)||this;return i.method=d.PUT,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/push_preference"),i.params={push_trigger_option:r},i}return n(t,e),t}(v),Ct=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.pushTriggerOption=n.push_trigger_option,r}return n(t,e),t}(b),St=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=d.GET,r.path="".concat(l,"/").concat(encodeURIComponent(n),"/push/template"),r}return n(t,e),t}(v),Tt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return n(t,e),t}(b),Pt=function(e){function t(t){var n=t.userId,r=t.templateName,i=e.call(this)||this;return i.method=d.PUT,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/push/template"),i.params={name:r},i}return n(t,e),t}(v),Et=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name=n.name,r}return n(t,e),t}(b),Dt=function(e){function t(t){var n=t.userId,r=t.token,i=e.call(this)||this;return i.method=d.GET,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/friends/changelogs"),i.params={token:r},i}return n(t,e),t}(v),Ut=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.changelogs={addedUsers:n.added.map((function(e){return new _(t,e)})),updatedUsers:n.updated.map((function(e){return new _(t,e)})),deletedUserIds:n.deleted,hasMore:n.has_more,token:n.next},r}return n(t,e),t}(b),Ot=function(e){function t(t){var n=t.userId,r=t.discoveries,i=e.call(this)||this;return i.method=d.PUT,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/friend_discoveries"),i.params={friend_discoveries:r.map((function(e){return{friend_discovery_key:e.friendDiscoveryKey,friend_name:e.friendName}}))},i}return n(t,e),t}(v),Lt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.friendDiscoveryRequestId=n.friend_discovery_request_id,r}return n(t,e),t}(b),Nt=function(e){function t(t){var n=t.userId,r=t.discoveryKeys,i=e.call(this)||this;return i.method=d.DELETE,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/friend_discoveries"),i.params={friend_discovery_keys:r},i}return n(t,e),t}(v);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(b);var At=function(e){function t(t){var n=t.userId,r=t.userIds,i=e.call(this)||this;return i.method=d.POST,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/friends"),i.params={user_ids:r},i}return n(t,e),t}(v),Mt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new _(t,e)})),r}return n(t,e),t}(b),Rt=function(e){function t(t){var n=t.userId,r=t.userIds,i=e.call(this)||this;return i.method=d.DELETE,i.path="".concat(l,"/").concat(encodeURIComponent(n),"/friends"),i.params={user_ids:r},i}return n(t,e),t}(v);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(b);var Ft=function(e){function t(t){var n=t.userId,r=e.call(this)||this;return r.method=d.GET,r.path="".concat(l,"/").concat(n,"/allow_friend_discovery"),r.params={},r}return n(t,e),t}(v),jt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.allowFriendDiscovery=n.allow_friend_discovery,r}return n(t,e),t}(b),qt=function(e){function t(t){var n=t.userId,r=t.allowFriendDiscovery,i=e.call(this)||this;return i.method=d.PUT,i.path="".concat(l,"/").concat(n,"/allow_friend_discovery"),i.params={allow_friend_discovery:r},i}return n(t,e),t}(v);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}n(t,e)}(b);var zt=function(e){this.key=null,this.url=null,this.key=e.key,this.url=e.url},Qt=function(e){var t,n,r;this.id=0,this.name=null,this.url=null,this.emojis=[],this.id=null!==(t=e.id)&&void 0!==t?t:0,this.name=null!==(n=e.name)&&void 0!==n?n:"",this.url=null!==(r=e.url)&&void 0!==r?r:"",this.emojis=e.emojis?e.emojis.map((function(e){return new zt(e)})):[]},xt=function(e){this.emojiHash=null,this.emojiCategories=[],this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map((function(e){return new Qt(e)})):[]},Ht=function(e){function t(){var t=e.call(this)||this;return t.method=d.GET,t.path=w,t}return n(t,e),t}(v),Gt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiContainer=new xt(n),r}return n(t,e),t}(b),Wt=function(e){function t(t){var n=t.categoryId,r=e.call(this)||this;return r.method=d.GET,r.path="".concat(w,"/").concat(n),r}return n(t,e),t}(v),Kt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emojiCategory=new Qt(n),r}return n(t,e),t}(b),Vt=function(e){function t(t){var n=t.key,r=e.call(this)||this;return r.method=d.GET,r.path="".concat(k,"/").concat(n),r}return n(t,e),t}(v),Bt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.emoji=new zt(n),r}return n(t,e),t}(b),Jt=function(e){function t(){var t=e.call(this)||this;return t.method=d.GET,t.path="".concat(I),t}return n(t,e),t}(v),Xt=function(e){function t(t,n){var r,i=this,s=null!=n?n:{};return(i=e.call(this,t,n)||this).uikitConfiguration={string:JSON.stringify(s),json:s},i.updatedAt=null!==(r=null==n?void 0:n.updated_at)&&void 0!==r?r:0,i}return n(t,e),t}(b),Yt=function(e){function t(t){var n=t.limit,r=t.token,i=t.userIdsFilter,s=t.metaDataKeyFilter,o=t.metaDataValuesFilter,a=t.nicknameStartsWithFilter,u=e.call(this)||this;return u.method=d.GET,u.path=l,u.params=p({limit:n,token:r,user_ids:i,metadatakey:s,metadatavalues_in:o,nickname_startswith:a}),u}return n(t,e),t}(v),Zt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new _(t,e)})),r.next=n.next,r}return n(t,e),t}(b),$t=function(e){function r(t,n){var r,i,s,o=this;return(o=e.call(this,t,n)||this).userIdsFilter=null,o.metaDataKeyFilter=null,o.metaDataValuesFilter=null,o.nicknameStartsWithFilter=null,o.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,o.metaDataKeyFilter=null!==(i=n.metaDataKeyFilter)&&void 0!==i?i:null,o.metaDataValuesFilter=null!==(s=n.metaDataValuesFilter)&&void 0!==s?s:null,o.nicknameStartsWithFilter=n.nicknameStartsWithFilter||null,o}return n(r,e),r.prototype._validate=function(){return e.prototype._validate.call(this)&&E("string",this.userIdsFilter,!0)&&t("string",this.metaDataKeyFilter,!0)&&E("string",this.metaDataValuesFilter,!0)&&t("string",this.metaDataKeyFilter,!0)},r.prototype.next=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,s;return a(this,(function(o){switch(o.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=F.of(this._iid).requestQueue,t=new Yt(m(m({},this),{token:this._token})),[4,e.send(t)]):[3,2]:[3,5];case 1:return n=o.sent(),r=n.as(Zt),i=r.users,s=r.next,this._token=s,this._hasNext=!!s,this._isLoading=!1,[2,i];case 2:return[2,[]];case 3:throw A.queryInProgress;case 4:return[3,6];case 5:throw A.invalidParameters;case 6:return[2]}}))}))},r}(D),en=function(e){function t(t){var n=t.userId,r=t.limit,i=t.token,s=t.userIdsFilter,o=e.call(this)||this;return o.method=d.GET,o.path="".concat(l,"/").concat(n,"/block"),o.params=p({limit:r,token:i,user_ids:s}),o}return n(t,e),t}(v),tn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.users=n.users.map((function(e){return new _(t,e)})),r.next=n.next,r}return n(t,e),t}(b),nn=function(e){function t(t,n){var r,i=this;return(i=e.call(this,t,n)||this).userIdsFilter=null,i.userIdsFilter=null!==(r=n.userIdsFilter)&&void 0!==r?r:null,i}return n(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)&&E("string",this.userIdsFilter,!0)},t.prototype.next=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,s,o,u;return a(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=F.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new en(m(m({},this),{userId:t.userId,token:this._token})),[4,n.send(r)]):[3,2]:[3,5];case 1:return i=a.sent(),s=i.as(tn),o=s.users,u=s.next,this._token=u,this._hasNext=!!u,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw A.queryInProgress;case 4:return[3,6];case 5:throw A.invalidParameters;case 6:return[2]}}))}))},t}(D),rn=function(e){function t(t){var n=t.userId,r=t.limit,i=t.token,s=e.call(this)||this;return s.method=d.GET,s.path="".concat(l,"/").concat(encodeURIComponent(n),"/friends"),s.params={limit:r,token:i},s}return n(t,e),t}(v),sn=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.hasMore=n.has_more,r.users=n.users.map((function(e){return new _(t,e)})),r.next=n.next,r}return n(t,e),t}(b),on=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._validate=function(){return e.prototype._validate.call(this)},t.prototype.next=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,s,o,u,c;return a(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=F.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new rn(m(m({},this),{userId:t.userId,token:this._token})),[4,n.send(r)]):[3,2]:[3,5];case 1:return i=a.sent(),s=i.as(sn),o=s.users,u=s.hasMore,c=s.next,this._token=c,this._hasNext=u,this._isLoading=!1,[2,o];case 2:return[2,[]];case 3:throw A.queryInProgress;case 4:return[3,6];case 5:throw A.invalidParameters;case 6:return[2]}}))}))},t}(D),an=null,un=function(){function n(e,t,n){var r=this;this._storeInitialized=!1,this._fcmPushToken=null,this._apnsPushToken=null,this._iid=e,this.options=t;var i=F.of(e),o=i.sdkState,u=i.cacheContext,c=i.dispatcher,d=i.sessionManager,l=i.requestQueue,h=i.logger,f=i.userEventHandlers,p=i.appStateToggleEnabled;this._onlineDetector=new Xe({logger:h,connectionDelegate:{reconnect:function(){var t=F.of(e),n=t.sdkState,r=t.connectionManager,i=t.sessionManager;i.auth.hasSession?"foreground"===n.appState&&r.resetAndReconnect():r.connect(i.auth.authToken)},disconnect:function(){F.of(e).connectionManager.disconnect()}}});var v=new Oe(e,{localCacheEnabled:u.localCacheEnabled,dispatcher:c,sdkState:o,logger:h});n.forEach((function(t){t.init(e,{sdkState:o,cacheContext:u,dispatcher:c,sessionManager:d,requestQueue:l,logger:h,onlineDetector:r._onlineDetector}),r[t.name]=t})),this._appStateChangeDetector=new Je({isEnabled:p}),this._appStateChangeDetector.on("resume",(function(){h.debug("the page resumes from freeze"),r.setForegroundState()})).on("pause",(function(){h.debug("the page freezes"),r.setBackgroundState()})),c.on((function(t){if(t instanceof $){if(t.stateType===ee.CONNECTED)v.processNonAutoResendRegisteredPendingMessages()}else if(t instanceof te){if("USEV"===t.code){var n=t.as(Le).event;if(n.category===Ne.FRIEND_DISCOVERED){var i=Ae.getDataAsFriendDiscoveredEvent(e,n).friendDiscoveries;ne((function(){return s(r,void 0,void 0,(function(){return a(this,(function(e){return[2,f.forEach((function(e){e.onFriendsDiscovered(i)}))]}))}))}))}}}else if(t instanceof re){var c=F.of(r._iid).subscribedUnreadMessageCount,d=!1,l=t.ts;if("number"==typeof l&&l>c.ts){if(c.all!==t.all&&(d=!0),c.all=t.all>=0?t.all:0,t.customTypes)for(var p in t.customTypes)c.customTypes[p]!==t.customTypes[p]&&(d=!0),c.customTypes[p]=t.customTypes[p];d=d&&c.ts>0,c.ts=l}d&&ne((function(){return s(r,void 0,void 0,(function(){return a(this,(function(e){return[2,f.forEach((function(e){e.onTotalUnreadMessageCountUpdated(c.all,c.customTypes)}))]}))}))}))}else t instanceof ie?u.preference.set(r._getUserProfileCacheKey(o.userId),se.payloadify(t.userProfile)):t instanceof oe&&t.error&&t.error.isSessionRevokedError&&(h.debug("session revoked."),r.disconnect())}))}return n.init=function(e){var t=e.appId,r=e.appVersion,i=void 0===r?null:r,s=e.modules,o=void 0===s?[]:s,a=e.options,u=void 0===a?new j:a,c=e.debugMode,d=void 0!==c&&c,l=e.customApiHost,h=e.customWebSocketHost,f=e.newInstance,p=void 0!==f&&f,v=e.logLevel,_=e.localCacheEnabled,g=void 0!==_&&_,m=e.localCacheConfig,b=void 0===m?new q:m,y=e.localCacheEncryption,w=e.useAsyncStorageStore,k=void 0===w?null:w,I=e.appStateToggleEnabled,C=void 0===I||I;if(!an||p){var S="su-".concat(z()),T=null!=y?y:{encrypt:function(e){return e},decrypt:function(e){return e}},P=new Ee({encryption:T});d||(P=x()?k?new De({AsyncStorage:k,encryption:T}):new Ee({encryption:T}):new Ue({encryption:T})),new F(S,{appId:t,appVersion:i,options:u,apiHost:null!=l?l:"https://api-".concat(t,".sendbird.com"),websocketHost:null!=h?h:"wss://ws-".concat(t,".sendbird.com"),store:P,encryption:T,logLevel:v,localCacheEnabled:g,localCacheConfig:b,debugMode:d,appStateToggleEnabled:C});var E=[new fe,new ve],D=new n(S,u,G(G([],W(o),!1),W(E),!1));return an||(an=D),D}return an},Object.defineProperty(n,"instance",{get:function(){return an},enumerable:!1,configurable:!0}),Object.defineProperty(n,"version",{get:function(){return K},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"appId",{get:function(){return F.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"appInfo",{get:function(){return F.of(this._iid).appInfo},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"appVersion",{get:function(){var e;return null!==(e=F.of(this._iid).sdkState.appVersion)&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"debugMode",{get:function(){return F.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"logLevel",{get:function(){return F.of(this._iid).logger.level},set:function(e){F.of(this._iid).logger.level=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isCacheEnabled",{get:function(){return F.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheConfig",{get:function(){var e=F.of(this._iid).cacheContext;return e.localCacheEnabled?e.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ekey",{get:function(){return F.of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentUser",{get:function(){var e;return null!==(e=F.of(this._iid).sessionManager.currentUser)&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"connectionState",{get:function(){var e=F.of(this._iid).connectionManager;return e.isConnected?V.OPEN:e.isConnecting?V.CONNECTING:V.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastConnectedAt",{get:function(){var e=F.of(this._iid),t=e.connectedAt;return e.connectionManager.isConnected?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fcmPushToken",{get:function(){return this._fcmPushToken},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"apnsPushToken",{get:function(){return this._apnsPushToken},enumerable:!1,configurable:!0}),n.prototype._getCurrentPreferenceVersion=function(){return 1},n.prototype._getPreferenceCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".pref")},n.prototype._getUserProfileCacheKey=function(e){return"sendbird@".concat(this.appId,"/").concat(e,".profile")},n.prototype.getMemoryStoreForDebugging=function(){var e=F.of(this._iid),t=e.debugMode,n=e.cacheContext;if(t)return n.store instanceof Ee?n.store:null;throw A.debugModeRequired},n.prototype.addExtension=function(e,t){var n=F.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(e)>-1&&(n.extensions[e]=t)},n.prototype.setOnlineListener=function(e){this._onlineDetector.setOnlineListener(e)},n.prototype.setOfflineListener=function(e){this._onlineDetector.setOfflineListener(e)},n.prototype._safeInitializeStore=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:t=F.of(this._iid).cacheContext,n.label=1;case 1:return n.trys.push([1,3,,5]),[4,t.store.init(e)];case 2:return n.sent(),this._storeInitialized=!0,[3,5];case 3:return n.sent(),t.store=new Ee,[4,this._safeInitializeStore(e)];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))},n.prototype.initializeCache=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,s,o,u,c,d;return a(this,(function(a){switch(a.label){case 0:return t=F.of(this._iid),n=t.sdkState,r=t.cacheContext,i=t.connectionManager,s=t.dispatcher,o=t.logger,n.userId&&n.userId===e?[3,10]:[4,i.logout()];case 1:if(a.sent(),u="sendbird@".concat(n.appId,"/").concat(e,".db"),!r.localCacheEnabled)return[3,8];a.label=2;case 2:return a.trys.push([2,5,,7]),r.nestdb&&r.nestdb.state!==ze.CLOSED&&r.nestdb.name===u?[3,4]:((c=r.nestdb=new Re({name:"sendbird@".concat(n.appId,"/").concat(e,".db"),version:2,store:r.store})).on("upgrade",Ve(c,r.store)),c.on("storeReplaced",(function(e){r.replaceStore(e),r.localCacheEnabled=!1,c.on("upgrade",Ve(c,r.store))})),[4,c.open()]);case 3:a.sent(),this._storeInitialized=!0,s.dispatch(new Me(this._iid,{userId:e})),a.label=4;case 4:return n.userId=e,[3,7];case 5:return d=a.sent(),o.warn("Nest DB Open Failed. ",d),[4,this._safeInitializeStore(u)];case 6:throw a.sent(),n.userId=e,A.databaseError;case 7:return[3,10];case 8:return[4,this._safeInitializeStore(u)];case 9:a.sent(),n.userId=e,a.label=10;case 10:return[2]}}))}))},n.prototype.getCacheDataSize=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return(e=F.of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.estimateUsage()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,0]}}))}))},n.prototype.clearCachedData=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return(e=F.of(this._iid).cacheContext).localCacheEnabled&&e.nestdb?[4,e.nestdb.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._storeInitialized?[4,e.preference.clear()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},n.prototype.clearCachedMessages=function(e){return s(this,void 0,void 0,(function(){var t,n,r=this;return a(this,(function(i){switch(i.label){case 0:return J(E("string",e)).throw(A.invalidParameters),t=Fe.of(this._iid),n=je.of(this._iid),t&&n?[4,Promise.all(e.map((function(e){return s(r,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return[4,t.removeMessagesOfChannel(e)];case 1:return r.sent(),[4,n.removeMessagesOfChannel(e)];case 2:return r.sent(),[2]}}))}))})))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},n.prototype.connect=function(e,n){return void 0===n&&(n=null),s(this,void 0,void 0,(function(){var r,i,s,o,u,c,d;return a(this,(function(a){switch(a.label){case 0:J(t("string",e)&&t("string",n,!0)).throw(A.invalidParameters),r=F.of(this._iid),i=r.sdkState,s=r.cacheContext,o=r.connectionManager,u=r.statLogCollector,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.initializeCache(e)];case 2:return a.sent(),F.of(this._iid).dispatcher.dispatch(new qe),[3,4];case 3:return a.sent(),c=F.of(this._iid).logger,s.localCacheEnabled=!1,c.warn("Cache initialization failed - cache is not available."),[3,4];case 4:return[4,s.preference.init(this._getPreferenceCacheKey(e),this._getCurrentPreferenceVersion())];case 5:return a.sent(),[4,s.preference.get(this._getUserProfileCacheKey(e))];case 6:return(d=a.sent())&&new se(this._iid,d).apply(),[4,u.init("sendbird@".concat(i.appId,"/").concat(e,".statlog"))];case 7:a.sent(),a.label=8;case 8:return a.trys.push([8,,10,11]),[4,o.connect(n)];case 9:return a.sent(),[3,11];case 10:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 11:return[2,this.currentUser]}}))}))},n.prototype.reconnect=function(){var e=F.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.sessionManager.auth.hasSession;return r&&(this._appStateChangeDetector.start(),this._onlineDetector.start(),t.resetAndReconnect().then((function(){n.appState="foreground"})).catch((function(){}))),r},n.prototype.disconnect=function(){return s(this,void 0,void 0,(function(){var e,t,n;return a(this,(function(r){switch(r.label){case 0:return e=F.of(this._iid),t=e.connectionManager,n=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.logout()];case 1:return r.sent(),[4,this.clearCachedData()];case 2:return r.sent(),[2]}}))}))},n.prototype.disconnectWebSocket=function(){return s(this,void 0,void 0,(function(){var e,t,n;return a(this,(function(r){switch(r.label){case 0:return e=F.of(this._iid),t=e.connectionManager,n=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),n.cancelAll(),[4,t.disconnectWebSocket()];case 1:return r.sent(),[2]}}))}))},n.prototype.setBackgroundState=function(){var e=F.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.logger;"foreground"===n.appState&&(n.appState="background",r.debug("going background state"),t.background())},n.prototype.setForegroundState=function(){var e=F.of(this._iid),t=e.connectionManager,n=e.sdkState,r=e.logger;"background"===n.appState&&(n.appState="foreground",r.debug("going foreground state"),t.resetAndReconnect())},n.prototype.setSessionHandler=function(e){J(e instanceof Ge).throw(A.invalidParameters),F.of(this._iid).sessionManager.handler=e},n.prototype.addUserEventHandler=function(e,n){J(t("string",e)&&n instanceof Ke).throw(A.invalidParameters),F.of(this._iid).userEventHandlers.set(e,n)},n.prototype.removeUserEventHandler=function(e){F.of(this._iid).userEventHandlers.delete(e)},n.prototype.removeAllUserEventHandler=function(){F.of(this._iid).userEventHandlers.clear()},n.prototype.addConnectionHandler=function(e,n){J(t("string",e)&&n instanceof We).throw(A.invalidParameters),F.of(this._iid).connectionHandlers.set(e,n)},n.prototype.removeConnectionHandler=function(e){F.of(this._iid).connectionHandlers.delete(e)},n.prototype.removeAllConnectionHandler=function(){F.of(this._iid).connectionHandlers.clear()},n.prototype.createApplicationUserListQuery=function(e){return void 0===e&&(e={}),new $t(this._iid,e)},n.prototype.createBlockedUserListQuery=function(e){return void 0===e&&(e={}),new nn(this._iid,e)},n.prototype.createFriendListQuery=function(e){return void 0===e&&(e={}),new on(this._iid,e)},n.prototype.createMessageSearchQuery=function(e){return new pe(this._iid,e)},n.prototype.createPollListQuery=function(e){return new Qe(this._iid,m({},e))},n.prototype.createPollVoterListQuery=function(e){return new xe(this._iid,m({},e))},n.prototype.buildUserFromSerializedData=function(e){var t=Z(e);return new _(this._iid,_.payloadify(t))},n.prototype.updateCurrentUserInfo=function(n){return void 0===n&&(n={}),s(this,void 0,void 0,(function(){var r,i,s,o,u,c,d;return a(this,(function(a){switch(a.label){case 0:return r=m(m({},He),n),J(function(n){return e(n.profileImage,!0)&&t("string",n.profileUrl,!0)&&t("string",n.nickname,!0)}(r)).throw(A.invalidParameters),this.currentUser?(i=F.of(this._iid),s=i.sdkState,o=i.requestQueue,u=new Ye(m({userId:s.userId},r)),[4,o.send(u)]):[3,2];case 1:return c=a.sent(),d=c.as(Ze).user,this.currentUser&&(r.nickname&&(this.currentUser.nickname=d.nickname),(r.profileUrl||r.profileImage)&&(this.currentUser.plainProfileUrl=d.profileUrl)),[2,d];case 2:throw A.connectionRequired}}))}))},n.prototype.updateCurrentUserInfoWithPreferredLanguages=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,s,o;return a(this,(function(a){switch(a.label){case 0:return J(E("string",e)).throw(A.invalidParameters),this.currentUser?(t=F.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Ye({userId:n.userId,preferredLanguages:e}),[4,r.send(i)]):[3,2];case 1:return s=a.sent(),o=s.as(Ze).user,this.currentUser&&(this.currentUser.preferredLanguages=o.preferredLanguages),[2,o];case 2:throw A.connectionRequired}}))}))},n.prototype.registerFCMPushTokenForCurrentUser=function(e){return s(this,void 0,void 0,(function(){var n,r,i,o,u,c=this;return a(this,(function(d){switch(d.label){case 0:if(J(t("string",e)).throw(A.invalidParameters),!this.currentUser)return[3,6];d.label=1;case 1:return d.trys.push([1,4,,5]),n=F.of(this._iid),r=n.sessionManager,i=n.sdkState,o=n.requestQueue,r.hasDeviceToken(y.FCM,e)?[2,ae.SUCCESS]:(u=new et({userId:i.userId,token:e}),[4,o.send(u)]);case 2:return d.sent(),[4,ue((function(){return s(c,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return r.setDeviceToken(y.FCM,e),[4,r.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return d.sent(),this._fcmPushToken="",[2,ae.SUCCESS];case 4:return d.sent(),[2,ae.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,ae.PENDING];case 7:return[2]}}))}))},n.prototype.unregisterFCMPushTokenForCurrentUser=function(e){return s(this,void 0,void 0,(function(){var n,r,i,o,u,c,d=this;return a(this,(function(l){switch(l.label){case 0:if(J(t("string",e)).throw(A.invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),n=F.of(this._iid),r=n.sessionManager,i=n.sdkState,o=n.requestQueue,u=new nt({userId:i.userId,token:e}),[4,o.send(u)];case 2:return c=l.sent().lastDeletedAt,[4,ue((function(){return s(d,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return r.unsetDeviceToken(y.FCM,e),r.setDeviceTokenDeletedAt(c),[4,r.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return l.sent(),this._fcmPushToken="",[2,ae.SUCCESS];case 4:return l.sent(),[2,ae.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=e,[2,ae.PENDING];case 7:return[2]}}))}))},n.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,o,u=this;return a(this,(function(c){switch(c.label){case 0:return this.currentUser?(e=F.of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,i=new it({userId:n.userId}),[4,r.send(i)]):[3,3];case 1:return o=c.sent().lastDeletedAt,[4,ue((function(){return s(u,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(y.FCM),t.setDeviceTokenDeletedAt(o),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))},n.prototype.registerAPNSPushTokenForCurrentUser=function(e){return s(this,void 0,void 0,(function(){var n,r,i,o,u,c=this;return a(this,(function(d){switch(d.label){case 0:if(J(t("string",e)).throw(A.invalidParameters),!this.currentUser)return[3,6];d.label=1;case 1:return d.trys.push([1,4,,5]),n=F.of(this._iid),r=n.sessionManager,i=n.sdkState,o=n.requestQueue,r.hasDeviceToken(y.APNS,e)?[2,ae.SUCCESS]:(u=new $e({userId:i.userId,token:e}),[4,o.send(u)]);case 2:return d.sent(),[4,ue((function(){return s(c,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return r.setDeviceToken(y.APNS,e),[4,r.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return d.sent(),this._apnsPushToken="",[2,ae.SUCCESS];case 4:return d.sent(),[2,ae.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,ae.PENDING];case 7:return[2]}}))}))},n.prototype.unregisterAPNSPushTokenForCurrentUser=function(e){return s(this,void 0,void 0,(function(){var n,r,i,o,u,c,d=this;return a(this,(function(l){switch(l.label){case 0:if(J(t("string",e)).throw(A.invalidParameters),!this.currentUser)return[3,6];l.label=1;case 1:return l.trys.push([1,4,,5]),n=F.of(this._iid),r=n.sessionManager,i=n.sdkState,o=n.requestQueue,u=new tt({userId:i.userId,token:e}),[4,o.send(u)];case 2:return c=l.sent().lastDeletedAt,[4,ue((function(){return s(d,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return r.unsetDeviceToken(y.APNS,e),r.setDeviceTokenDeletedAt(c),[4,r.saveDeviceToken()];case 1:return t.sent(),[2]}}))}))}))];case 3:return l.sent(),this._apnsPushToken="",[2,ae.SUCCESS];case 4:return l.sent(),[2,ae.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=e,[2,ae.PENDING];case 7:return[2]}}))}))},n.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i,o,u=this;return a(this,(function(c){switch(c.label){case 0:return this.currentUser?(e=F.of(this._iid),t=e.sessionManager,n=e.sdkState,r=e.requestQueue,i=new rt({userId:n.userId}),[4,r.send(i)]):[3,3];case 1:return o=c.sent().lastDeletedAt,[4,ue((function(){return s(u,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return t.unsetDeviceTokens(y.APNS),t.setDeviceTokenDeletedAt(o),[4,t.saveDeviceToken()];case 1:return e.sent(),[2]}}))}))}))];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))},n.prototype.getChannelInvitationPreference=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i;return a(this,(function(s){switch(s.label){case 0:return e=F.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new at({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,{autoAccept:i.as(ut).autoAccept}]}}))}))},n.prototype.setChannelInvitationPreference=function(e){return s(this,void 0,void 0,(function(){var n,r,i,s,o;return a(this,(function(a){switch(a.label){case 0:return J(t("boolean",e)).throw(A.invalidParameters),n=F.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new ct({userId:r.userId,willAutoAccept:e}),[4,i.send(s)];case 1:return o=a.sent(),[2,{autoAccept:o.as(dt).autoAccept}]}}))}))},n.prototype.getDoNotDisturb=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i;return a(this,(function(s){switch(s.label){case 0:return e=F.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new lt({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(ht).preference]}}))}))},n.prototype.setDoNotDisturb=function(e,n,r,i,o,u){return void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===u&&(u=""),s(this,void 0,void 0,(function(){var s,c,d,l,h;return a(this,(function(a){switch(a.label){case 0:return J(t("boolean",e)&&t("number",n)&&t("number",r)&&t("number",i)&&t("number",o)&&t("string",u)).throw(A.invalidParameters),s=F.of(this._iid),c=s.sdkState,d=s.requestQueue,l=new ft({userId:c.userId,doNotDisturbOn:e,startHour:n,startMin:r,endHour:i,endMin:o,timezone:u}),[4,d.send(l)];case 1:return h=a.sent(),[2,h.as(pt).preference]}}))}))},n.prototype.getSnoozePeriod=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i;return a(this,(function(s){switch(s.label){case 0:return e=F.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new vt({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(_t).snoozePeriod]}}))}))},n.prototype.setSnoozePeriod=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=0),s(this,void 0,void 0,(function(){var i,s,o,u,c;return a(this,(function(a){switch(a.label){case 0:return J(t("boolean",e)&&t("number",n)&&t("number",r)).throw(A.invalidParameters),i=F.of(this._iid),s=i.sdkState,o=i.requestQueue,u=new gt({userId:s.userId,snoozeOn:e,startTs:n,endTs:r}),[4,o.send(u)];case 1:return c=a.sent(),[2,c.as(mt).snoozePeriod]}}))}))},n.prototype.getMyPushTokensByToken=function(e,n){return s(this,void 0,void 0,(function(){var r,i,s,o,u,c,d,l,h,f,p,v;return a(this,(function(a){switch(a.label){case 0:return J(t("string",e)&&de(y,n)).throw(A.invalidParameters),r=F.of(this._iid),i=r.sdkState,s=r.requestQueue,o=r.sessionManager,u=new st({userId:i.userId,type:n,token:e}),[4,s.send(u)];case 1:c=a.sent(),d=c.as(ot).pushTokens;try{for(l=ce(d.deviceTokens),h=l.next();!h.done;h=l.next())f=h.value,o.setDeviceToken(d.type,f)}catch(e){p={error:e}}finally{try{h&&!h.done&&(v=l.return)&&v.call(l)}finally{if(p)throw p.error}}return[4,o.saveDeviceToken()];case 2:return a.sent(),[2,d]}}))}))},n.prototype.getPushTriggerOption=function(){return s(this,void 0,void 0,(function(){var e,t,n,r;return a(this,(function(i){switch(i.label){case 0:return e=F.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new wt({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(kt).pushTriggerOption]}}))}))},n.prototype.setPushTriggerOption=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i;return a(this,(function(s){switch(s.label){case 0:return J(de(le,e)).throw(A.invalidParameters),t=F.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new It({userId:n.userId,pushTriggerOption:e}),[4,r.send(i)];case 1:return[2,s.sent().as(Ct).pushTriggerOption]}}))}))},n.prototype.getPushTemplate=function(){return s(this,void 0,void 0,(function(){var e,t,n,r;return a(this,(function(i){switch(i.label){case 0:return e=F.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new St({userId:t.userId}),[4,n.send(r)];case 1:return[2,i.sent().as(Tt).name]}}))}))},n.prototype.setPushTemplate=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i;return a(this,(function(s){switch(s.label){case 0:return J(de(he,e)).throw(A.invalidParameters),t=F.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Pt({userId:n.userId,templateName:e}),[4,r.send(i)];case 1:return[2,s.sent().as(Et).name]}}))}))},n.prototype.blockUser=function(e){return s(this,void 0,void 0,(function(){var n,r,i,s;return a(this,(function(o){switch(o.label){case 0:return J(e instanceof _||t("string",e)).throw(A.invalidParameters),n=F.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new bt({userId:r.userId,blockedUserId:e instanceof _?e.userId:e}),[4,i.send(s)];case 1:return o.sent(),[2]}}))}))},n.prototype.blockUserWithUserId=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.blockUser(e)]}))}))},n.prototype.unblockUser=function(e){return s(this,void 0,void 0,(function(){var n,r,i,s;return a(this,(function(o){switch(o.label){case 0:return J(e instanceof _||t("string",e)).throw(A.invalidParameters),n=F.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new yt({userId:r.userId,unblockedUserId:e instanceof _?e.userId:e}),[4,i.send(s)];case 1:return o.sent(),[2]}}))}))},n.prototype.unblockUserWithUserId=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.unblockUser(e)]}))}))},n.prototype.getFriendChangeLogsByToken=function(e){return s(this,void 0,void 0,(function(){var n,r,i,s,o;return a(this,(function(a){switch(a.label){case 0:return J(t("string",e)).throw(A.invalidParameters),n=F.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new Dt({userId:r.userId,token:e}),[4,i.send(s)];case 1:return o=a.sent(),[2,o.as(Ut).changelogs]}}))}))},n.prototype.getAllowFriendDiscovery=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i;return a(this,(function(s){switch(s.label){case 0:return e=F.of(this._iid),t=e.sdkState,n=e.requestQueue,r=new Ft({userId:t.userId}),[4,n.send(r)];case 1:return i=s.sent(),[2,i.as(jt).allowFriendDiscovery]}}))}))},n.prototype.setAllowFriendDiscovery=function(e){return s(this,void 0,void 0,(function(){var n,r,i,s;return a(this,(function(o){switch(o.label){case 0:return J(t("boolean",e)).throw(A.invalidParameters),n=F.of(this._iid),r=n.sdkState,i=n.requestQueue,s=new qt({userId:r.userId,allowFriendDiscovery:e}),[4,i.send(s)];case 1:return o.sent(),[2,e]}}))}))},n.prototype.uploadFriendDiscoveries=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,s;return a(this,(function(o){switch(o.label){case 0:return t=F.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Ot({userId:n.userId,discoveries:e}),[4,r.send(i)];case 1:return s=o.sent(),[2,s.as(Lt).friendDiscoveryRequestId]}}))}))},n.prototype.deleteFriendDiscovery=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.deleteFriendDiscoveries([e])]}))}))},n.prototype.deleteFriendDiscoveries=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i;return a(this,(function(s){switch(s.label){case 0:return J(E("string",e)).throw(A.invalidParameters),t=F.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Nt({userId:n.userId,discoveryKeys:e}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},n.prototype.addFriends=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,s;return a(this,(function(o){switch(o.label){case 0:return J(E("string",e)).throw(A.invalidParameters),t=F.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new At({userId:n.userId,userIds:e}),[4,r.send(i)];case 1:return s=o.sent(),[2,s.as(Mt).users]}}))}))},n.prototype.deleteFriend=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.deleteFriends([e])]}))}))},n.prototype.deleteFriends=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i;return a(this,(function(s){switch(s.label){case 0:return J(E("string",e)).throw(A.invalidParameters),t=F.of(this._iid),n=t.sdkState,r=t.requestQueue,i=new Rt({userId:n.userId,userIds:e}),[4,r.send(i)];case 1:return s.sent(),[2]}}))}))},n.prototype.getAllEmoji=function(){return s(this,void 0,void 0,(function(){var e,t,n;return a(this,(function(r){switch(r.label){case 0:return e=F.of(this._iid).requestQueue,t=new Ht,[4,e.send(t)];case 1:return n=r.sent(),[2,n.as(Gt).emojiContainer]}}))}))},n.prototype.getEmojiCategory=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(i){switch(i.label){case 0:return t=F.of(this._iid).requestQueue,n=new Wt({categoryId:e}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(Kt).emojiCategory]}}))}))},n.prototype.getEmoji=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(i){switch(i.label){case 0:return t=F.of(this._iid).requestQueue,n=new Vt({key:e}),[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(Bt).emoji]}}))}))},n.prototype.getUIKitConfiguration=function(){return s(this,void 0,void 0,(function(){var e,t,n,r;return a(this,(function(i){switch(i.label){case 0:return e=F.of(this._iid),J(e.hasExtension("sb_uikit")).throw(A.notSupportedError),t=e.requestQueue,n=new Jt,[4,t.send(n)];case 1:return r=i.sent(),[2,r.as(Xt).uikitConfiguration]}}))}))},n}();export{$t as ApplicationUserListQuery,nn as BlockedUserListQuery,We as ConnectionHandler,zt as Emoji,Qt as EmojiCategory,xt as EmojiContainer,on as FriendListQuery,Ge as SessionHandler,Ke as UserEventHandler,un as default};
