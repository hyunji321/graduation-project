{"version":3,"file":"ContextMenu.js","sources":["../../src/ui/ContextMenu/MenuItems.tsx","../../src/ui/ContextMenu/EmojiListItems.tsx","../../src/ui/ContextMenu/index.tsx"],"sourcesContent":["import React, { ReactElement } from 'react';\nimport { createPortal } from 'react-dom';\n\ninterface MenuItemsProps {\n  className?: string;\n  style?: Record<string, string>;\n  openLeft?: boolean;\n  children: React.ReactElement | Array<React.ReactElement> | React.ReactNode;\n  parentRef: React.RefObject<HTMLElement>;\n  parentContainRef: React.RefObject<HTMLElement>;\n  closeDropdown: () => void;\n}\n\ntype MenuStyleType = { top?: number, left?: number };\ninterface MenuItemsState {\n  menuStyle: MenuStyleType;\n  handleClickOutside: (e: MouseEvent) => void;\n}\n\n// padding to handle height of last item in message-list\nconst HEIGHT_PADDING = 60;\n\nexport default class MenuItems extends React.Component<MenuItemsProps, MenuItemsState> {\n  constructor(props: MenuItemsProps) {\n    super(props);\n    this.state = {\n      menuStyle: {},\n      handleClickOutside: () => { /* noop */ },\n    };\n  }\n\n  menuRef: React.RefObject<HTMLUListElement> = React.createRef();\n\n  componentDidMount(): void {\n    this.setupEvents();\n    this.getMenuPosition();\n  }\n\n  componentWillUnmount(): void {\n    this.cleanUpEvents();\n  }\n\n  setupEvents = (): void => {\n    const { closeDropdown } = this.props;\n    const { menuRef } = this;\n    const handleClickOutside = (event) => {\n      if (menuRef?.current && !menuRef?.current?.contains?.(event.target)) {\n        closeDropdown?.();\n      }\n    };\n    this.setState({\n      handleClickOutside,\n    });\n\n    document.addEventListener('mousedown', handleClickOutside);\n  };\n\n  cleanUpEvents = (): void => {\n    const {\n      handleClickOutside,\n    } = this.state;\n    document.removeEventListener('mousedown', handleClickOutside);\n  };\n\n  getMenuPosition = (): MenuStyleType => {\n    const { parentRef, openLeft } = this.props;\n    const parentRect = parentRef?.current?.getBoundingClientRect?.();\n    const x = parentRect?.x || parentRect?.left || 0;\n    const y = parentRect?.y || parentRect?.top || 0;\n    const menuStyle = {\n      top: y,\n      left: x,\n    };\n    if (!this.menuRef.current) return menuStyle;\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menuRef.current.getBoundingClientRect();\n    if (y + rect.height + HEIGHT_PADDING > innerHeight) {\n      menuStyle.top -= rect.height;\n    }\n    if (x + rect.width > innerWidth && !openLeft) {\n      menuStyle.left -= rect.width;\n    }\n    if (menuStyle.top < 0) {\n      menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n    menuStyle.top += 32;\n    if (openLeft) {\n      const padding = Number.isNaN(rect.width - 30)\n        ? 108 // default\n        : rect.width - 30;\n      menuStyle.left -= padding;\n    }\n    // warning: this section has to be executed after the openLeft is calculated\n    // menu is outside viewport\n    if (menuStyle.left < 0) {\n      menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    this.setState({ menuStyle });\n    return menuStyle;\n  };\n\n  render(): ReactElement {\n    const { menuStyle } = this.state;\n    const { children, style, className = '' } = this.props;\n    return (\n      createPortal(\n        (\n          <div className={this.props?.className}>\n            <div className=\"sendbird-dropdown__menu-backdrop\" />\n            <ul\n              className={`${className} sendbird-dropdown__menu`}\n              ref={this.menuRef}\n              style={{\n                display: 'inline-block',\n                position: 'fixed',\n                left: `${Math.round(menuStyle.left)}px`,\n                top: `${Math.round(menuStyle.top)}px`,\n                ...style,\n              }}\n            >\n              {children}\n            </ul>\n          </div>\n        ),\n        document.getElementById('sendbird-dropdown-portal'),\n      )\n    );\n  }\n}\n","import React, { ReactElement, ReactNode, RefObject, useEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport SortByRow from '../SortByRow';\nimport { Nullable } from '../../types';\n\nconst defaultParentRect = { x: 0, y: 0, left: 0, top: 0, height: 0 };\ntype SpaceFromTrigger = { x: number, y: number };\ntype ReactionStyle = { left: number, top: number };\nexport interface EmojiListItemsProps {\n  closeDropdown: () => void;\n  children: ReactNode;\n  parentRef: RefObject<HTMLDivElement>;\n  parentContainRef: RefObject<HTMLDivElement>;\n  spaceFromTrigger?: SpaceFromTrigger;\n}\n\nexport const EmojiListItems = ({\n  children,\n  parentRef,\n  parentContainRef,\n  spaceFromTrigger = { x: 0, y: 0 },\n  closeDropdown,\n}: EmojiListItemsProps): Nullable<ReactElement> => {\n  const [reactionStyle, setReactionStyle] = useState<ReactionStyle>({ left: 0, top: 0 });\n  const reactionRef: RefObject<HTMLUListElement> = useRef(null);\n\n  /* showParent & hideParent */\n  useEffect(() => {\n    if (parentContainRef && parentContainRef?.current) {\n      parentContainRef.current.classList.add('sendbird-reactions--pressed');\n    }\n    return () => {\n      if (parentContainRef && parentContainRef?.current) {\n        parentContainRef.current.classList.remove('sendbird-reactions--pressed');\n      }\n    };\n  }, []);\n\n  /* setupEvents & cleanupEvents */\n  useEffect(() => {\n    const handleClickOutSide = (event) => {\n      if (reactionRef?.current && !reactionRef?.current?.contains?.(event.target)) {\n        closeDropdown();\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutSide);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutSide);\n    };\n  }, []);\n\n  /* getBarPosition */\n  useEffect(() => {\n    const spaceFromTriggerX = spaceFromTrigger?.x || 0;\n    const spaceFromTriggerY = spaceFromTrigger?.y || 0;\n    const parentRect = parentRef?.current?.getBoundingClientRect() ?? defaultParentRect;\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n    const reactionStyle = {\n      top: y,\n      left: x,\n    };\n    if (!reactionRef?.current) {\n      setReactionStyle(reactionStyle);\n    } else {\n      const rect = reactionRef?.current?.getBoundingClientRect();\n      if (reactionStyle.top < rect.height) {\n        reactionStyle.top += parentRect.height;\n        reactionStyle.top += spaceFromTriggerY;\n      } else {\n        reactionStyle.top -= rect.height;\n        reactionStyle.top -= spaceFromTriggerY;\n      }\n      reactionStyle.left -= rect.width / 2;\n      reactionStyle.left += (parentRect.height / 2) - 2;\n      reactionStyle.left += spaceFromTriggerX;\n      const maximumLeft = window.innerWidth - rect.width;\n      if (maximumLeft < reactionStyle.left) {\n        reactionStyle.left = maximumLeft;\n      }\n      if (reactionStyle.left < 0) {\n        reactionStyle.left = 0;\n      }\n      setReactionStyle(reactionStyle);\n    }\n  }, []);\n\n  const rootElement = document.getElementById('sendbird-emoji-list-portal');\n  if (rootElement) {\n    return (\n      createPortal(\n        <>\n          <div className=\"sendbird-dropdown__menu-backdrop\" />\n          <ul\n            className=\"sendbird-dropdown__reaction-bar\"\n            ref={reactionRef}\n            style={{\n              display: 'inline-block',\n              position: 'fixed',\n              left: `${Math.round(reactionStyle.left)}px`,\n              top: `${Math.round(reactionStyle.top)}px`,\n            }}\n          >\n            <SortByRow\n              className=\"sendbird-dropdown__reaction-bar__row\"\n              maxItemCount={8}\n              itemWidth={44}\n              itemHeight={40}\n            >\n              {children}\n            </SortByRow>\n          </ul>\n        </>,\n        rootElement,\n      )\n    );\n  }\n  return null;\n};\n\nexport default EmojiListItems;\n","import React, { ReactElement, MouseEvent, useState, ReactNode } from 'react';\nimport './index.scss';\n\nimport _MenuItems from './MenuItems';\nimport _EmojiListItems from './EmojiListItems';\n\nimport { getClassName } from '../../utils';\nimport Label, { LabelTypography, LabelColors } from '../Label';\n\nconst ENTER_KEY = 13;\n\nexport const MenuItems = _MenuItems;\nexport const EmojiListItems = _EmojiListItems;\n\nexport interface MenuItemProps {\n  className?: string | Array<string>;\n  children: ReactElement | ReactElement[] | ReactNode;\n  onClick?: (e: MouseEvent<HTMLLIElement>) => void;\n  disable?: boolean;\n  dataSbId?: string;\n}\nexport const MenuItem = ({\n  className = '',\n  children,\n  onClick,\n  disable = false,\n  dataSbId = '',\n}: MenuItemProps): ReactElement => {\n  const handleClickEvent = (e) => {\n    if (!disable && onClick) {\n      onClick?.(e);\n    }\n  };\n  return (\n    <li\n      className={getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : ''])}\n      role=\"menuitem\"\n      aria-disabled={disable ? true : false}\n      onClick={handleClickEvent}\n      onKeyPress={(e) => { if (e.keyCode === ENTER_KEY) handleClickEvent(e); }}\n      tabIndex={0}\n      data-sb-id={dataSbId}\n    >\n      <Label\n        className=\"sendbird-dropdown__menu-item__text\"\n        type={LabelTypography.SUBTITLE_2}\n        color={disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1}\n      >\n        {children}\n      </Label>\n    </li>\n  );\n};\n\nexport const MenuRoot = (): ReactElement => (\n  <div\n    id=\"sendbird-dropdown-portal\"\n    className=\"sendbird-dropdown-portal\"\n  />\n);\n\n// For the test environment\nexport const EmojiReactionListRoot = (): ReactElement => <div id=\"sendbird-emoji-list-portal\" />;\n\ntype MenuDisplayingFunc = () => void;\nexport interface ContextMenuProps {\n  menuTrigger?: (func: MenuDisplayingFunc) => ReactElement;\n  menuItems: (func: MenuDisplayingFunc) => ReactElement;\n  isOpen?: boolean;\n}\nexport default function ContextMenu({\n  menuTrigger,\n  menuItems,\n  isOpen,\n}: ContextMenuProps): ReactElement {\n  const [showMenu, setShowMenu] = useState(false);\n  return (\n    <div\n      className=\"sendbird-context-menu\"\n      style={{ display: 'inline' }}\n    >\n      {menuTrigger?.(() => setShowMenu(!showMenu))}\n      {(showMenu || isOpen) && menuItems(() => setShowMenu(false))}\n    </div>\n  );\n}\n"],"names":["HEIGHT_PADDING","MenuItems","React","Component","constructor","props","_defineProperty","createRef","closeDropdown","menuRef","handleClickOutside","event","_menuRef$current","_menuRef$current$cont","current","contains","call","target","setState","document","addEventListener","state","removeEventListener","_parentRef$current","_parentRef$current$ge","parentRef","openLeft","parentRect","getBoundingClientRect","x","left","y","top","menuStyle","innerWidth","innerHeight","window","rect","height","width","padding","Number","isNaN","componentDidMount","setupEvents","getMenuPosition","componentWillUnmount","cleanUpEvents","render","_this$props","children","style","className","createPortal","createElement","ref","_objectSpread","display","position","Math","round","getElementById","defaultParentRect","EmojiListItems","_ref","parentContainRef","spaceFromTrigger","reactionStyle","setReactionStyle","useState","reactionRef","useRef","useEffect","classList","add","remove","handleClickOutSide","_reactionRef$current","_reactionRef$current$","spaceFromTriggerX","spaceFromTriggerY","_reactionRef$current2","maximumLeft","rootElement","Fragment","SortByRow","maxItemCount","itemWidth","itemHeight","ENTER_KEY","_MenuItems","_EmojiListItems","MenuItem","onClick","disable","dataSbId","handleClickEvent","e","getClassName","role","onKeyPress","keyCode","tabIndex","Label","type","LabelTypography","SUBTITLE_2","color","LabelColors","ONBACKGROUND_4","ONBACKGROUND_1","MenuRoot","id","EmojiReactionListRoot","ContextMenu","_ref2","menuTrigger","menuItems","isOpen","showMenu","setShowMenu"],"mappings":";;;;;;;;;;;AAmBA;AACA,MAAMA,cAAc,GAAG,EAAE,CAAA;AAEV,MAAMC,WAAS,SAASC,cAAK,CAACC,SAAS,CAAiC;EACrFC,WAAWA,CAACC,KAAqB,EAAE;IACjC,KAAK,CAACA,KAAK,CAAC,CAAA;AAACC,IAAAA,eAAA,CAO8BJ,IAAAA,EAAAA,SAAAA,eAAAA,cAAK,CAACK,SAAS,EAAE,CAAA,CAAA;AAAAD,IAAAA,eAAA,sBAWhD,MAAY;MACxB,MAAM;AAAEE,QAAAA,aAAAA;OAAe,GAAG,IAAI,CAACH,KAAK,CAAA;MACpC,MAAM;AAAEI,QAAAA,OAAAA;AAAQ,OAAC,GAAG,IAAI,CAAA;MACxB,MAAMC,kBAAkB,GAAIC,KAAK,IAAK;QAAA,IAAAC,gBAAA,EAAAC,qBAAA,CAAA;AACpC,QAAA,IAAIJ,OAAO,KAAPA,IAAAA,IAAAA,OAAO,KAAPA,KAAAA,CAAAA,IAAAA,OAAO,CAAEK,OAAO,IAAI,EAACL,OAAO,aAAPA,OAAO,KAAA,KAAA,CAAA,IAAA,CAAAG,gBAAA,GAAPH,OAAO,CAAEK,OAAO,MAAA,IAAA,IAAAF,gBAAA,KAAA,KAAA,CAAA,IAAA,CAAAC,qBAAA,GAAhBD,gBAAA,CAAkBG,QAAQ,MAAA,IAAA,IAAAF,qBAAA,KAA1BA,KAAAA,CAAAA,IAAAA,qBAAA,CAAAG,IAAA,CAAAJ,gBAAA,EAA6BD,KAAK,CAACM,MAAM,CAAC,CAAE,EAAA;AACnET,UAAAA,aAAa,KAAbA,IAAAA,IAAAA,aAAa,KAAbA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,aAAa,EAAI,CAAA;AACnB,SAAA;OACD,CAAA;MACD,IAAI,CAACU,QAAQ,CAAC;AACZR,QAAAA,kBAAAA;AACF,OAAC,CAAC,CAAA;AAEFS,MAAAA,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEV,kBAAkB,CAAC,CAAA;KAC3D,CAAA,CAAA;AAAAJ,IAAAA,eAAA,wBAEe,MAAY;MAC1B,MAAM;AACJI,QAAAA,kBAAAA;OACD,GAAG,IAAI,CAACW,KAAK,CAAA;AACdF,MAAAA,QAAQ,CAACG,mBAAmB,CAAC,WAAW,EAAEZ,kBAAkB,CAAC,CAAA;KAC9D,CAAA,CAAA;AAAAJ,IAAAA,eAAA,0BAEiB,MAAqB;MAAA,IAAAiB,kBAAA,EAAAC,qBAAA,CAAA;MACrC,MAAM;QAAEC,SAAS;AAAEC,QAAAA,QAAAA;OAAU,GAAG,IAAI,CAACrB,KAAK,CAAA;MAC1C,MAAMsB,UAAU,GAAGF,SAAS,KAATA,IAAAA,IAAAA,SAAS,KAAAF,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,kBAAA,GAATE,SAAS,CAAEX,OAAO,MAAAS,IAAAA,IAAAA,kBAAA,KAAAC,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,qBAAA,GAAlBD,kBAAA,CAAoBK,qBAAqB,MAAAJ,IAAAA,IAAAA,qBAAA,KAAzCA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,qBAAA,CAAAR,IAAA,CAAAO,kBAAA,CAA6C,CAAA;AAChE,MAAA,MAAMM,CAAC,GAAG,CAAAF,UAAU,KAAVA,IAAAA,IAAAA,UAAU,uBAAVA,UAAU,CAAEE,CAAC,MAAIF,UAAU,aAAVA,UAAU,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAVA,UAAU,CAAEG,IAAI,KAAI,CAAC,CAAA;AAChD,MAAA,MAAMC,CAAC,GAAG,CAAAJ,UAAU,KAAVA,IAAAA,IAAAA,UAAU,uBAAVA,UAAU,CAAEI,CAAC,MAAIJ,UAAU,aAAVA,UAAU,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAVA,UAAU,CAAEK,GAAG,KAAI,CAAC,CAAA;AAC/C,MAAA,MAAMC,SAAS,GAAG;AAChBD,QAAAA,GAAG,EAAED,CAAC;AACND,QAAAA,IAAI,EAAED,CAAAA;OACP,CAAA;MACD,IAAI,CAAC,IAAI,CAACpB,OAAO,CAACK,OAAO,EAAE,OAAOmB,SAAS,CAAA;MAC3C,MAAM;QAAEC,UAAU;AAAEC,QAAAA,WAAAA;AAAY,OAAC,GAAGC,MAAM,CAAA;MAC1C,MAAMC,IAAI,GAAG,IAAI,CAAC5B,OAAO,CAACK,OAAO,CAACc,qBAAqB,EAAE,CAAA;MACzD,IAAIG,CAAC,GAAGM,IAAI,CAACC,MAAM,GAAGtC,cAAc,GAAGmC,WAAW,EAAE;AAClDF,QAAAA,SAAS,CAACD,GAAG,IAAIK,IAAI,CAACC,MAAM,CAAA;AAC9B,OAAA;MACA,IAAIT,CAAC,GAAGQ,IAAI,CAACE,KAAK,GAAGL,UAAU,IAAI,CAACR,QAAQ,EAAE;AAC5CO,QAAAA,SAAS,CAACH,IAAI,IAAIO,IAAI,CAACE,KAAK,CAAA;AAC9B,OAAA;AACA,MAAA,IAAIN,SAAS,CAACD,GAAG,GAAG,CAAC,EAAE;AACrBC,QAAAA,SAAS,CAACD,GAAG,GAAGK,IAAI,CAACC,MAAM,GAAGH,WAAW,GAAG,CAACA,WAAW,GAAGE,IAAI,CAACC,MAAM,IAAI,CAAC,GAAG,CAAC,CAAA;AACjF,OAAA;MACAL,SAAS,CAACD,GAAG,IAAI,EAAE,CAAA;AACnB,MAAA,IAAIN,QAAQ,EAAE;AACZ,QAAA,MAAMc,OAAO,GAAGC,MAAM,CAACC,KAAK,CAACL,IAAI,CAACE,KAAK,GAAG,EAAE,CAAC,GACzC,GAAG;AAAC,UACJF,IAAI,CAACE,KAAK,GAAG,EAAE,CAAA;QACnBN,SAAS,CAACH,IAAI,IAAIU,OAAO,CAAA;AAC3B,OAAA;AACA;AACA;AACA,MAAA,IAAIP,SAAS,CAACH,IAAI,GAAG,CAAC,EAAE;AACtBG,QAAAA,SAAS,CAACH,IAAI,GAAGO,IAAI,CAACE,KAAK,GAAGL,UAAU,GAAG,CAACA,UAAU,GAAGG,IAAI,CAACE,KAAK,IAAI,CAAC,GAAG,CAAC,CAAA;AAC9E,OAAA;MAEA,IAAI,CAACrB,QAAQ,CAAC;AAAEe,QAAAA,SAAAA;AAAU,OAAC,CAAC,CAAA;AAC5B,MAAA,OAAOA,SAAS,CAAA;KACjB,CAAA,CAAA;IA3EC,IAAI,CAACZ,KAAK,GAAG;MACXY,SAAS,EAAE,EAAE;MACbvB,kBAAkB,EAAEA,MAAM,YAAE;KAC7B,CAAA;AACH,GAAA;AAIAiC,EAAAA,iBAAiBA,GAAS;IACxB,IAAI,CAACC,WAAW,EAAE,CAAA;IAClB,IAAI,CAACC,eAAe,EAAE,CAAA;AACxB,GAAA;AAEAC,EAAAA,oBAAoBA,GAAS;IAC3B,IAAI,CAACC,aAAa,EAAE,CAAA;AACtB,GAAA;AA8DAC,EAAAA,MAAMA,GAAiB;AAAA,IAAA,IAAAC,WAAA,CAAA;IACrB,MAAM;AAAEhB,MAAAA,SAAAA;KAAW,GAAG,IAAI,CAACZ,KAAK,CAAA;IAChC,MAAM;MAAE6B,QAAQ;MAAEC,KAAK;AAAEC,MAAAA,SAAS,GAAG,EAAA;KAAI,GAAG,IAAI,CAAC/C,KAAK,CAAA;AACtD,IAAA,oBACEgD,YAAY,eAERnD,cAAA,CAAAoD,aAAA,CAAA,KAAA,EAAA;MAAKF,SAAS,EAAA,CAAAH,WAAA,GAAE,IAAI,CAAC5C,KAAK,MAAA4C,IAAAA,IAAAA,WAAA,KAAVA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,WAAA,CAAYG,SAAAA;KAC1BlD,eAAAA,cAAA,CAAAoD,aAAA,CAAA,KAAA,EAAA;AAAKF,MAAAA,SAAS,EAAC,kCAAA;KAAqC,CAAA,eACpDlD,cAAA,CAAAoD,aAAA,CAAA,IAAA,EAAA;MACEF,SAAS,EAAG,CAAEA,EAAAA,SAAU,CAA0B,wBAAA,CAAA;MAClDG,GAAG,EAAE,IAAI,CAAC9C,OAAQ;AAClB0C,MAAAA,KAAK,EAAAK,cAAA,CAAA;AACHC,QAAAA,OAAO,EAAE,cAAc;AACvBC,QAAAA,QAAQ,EAAE,OAAO;QACjB5B,IAAI,EAAG,CAAE6B,EAAAA,IAAI,CAACC,KAAK,CAAC3B,SAAS,CAACH,IAAI,CAAE,CAAG,EAAA,CAAA;QACvCE,GAAG,EAAG,GAAE2B,IAAI,CAACC,KAAK,CAAC3B,SAAS,CAACD,GAAG,CAAE,CAAA,EAAA,CAAA;AAAG,OAAA,EAClCmB,KAAK,CAAA;KAGTD,EAAAA,QAAQ,CACN,CACD,EAER/B,QAAQ,CAAC0C,cAAc,CAAC,0BAA0B,CAAC,CACpD,CAAA;AAEL,GAAA;AACF;;AC3HA,MAAMC,iBAAiB,GAAG;AAAEjC,EAAAA,CAAC,EAAE,CAAC;AAAEE,EAAAA,CAAC,EAAE,CAAC;AAAED,EAAAA,IAAI,EAAE,CAAC;AAAEE,EAAAA,GAAG,EAAE,CAAC;AAAEM,EAAAA,MAAM,EAAE,CAAA;AAAE,CAAC,CAAA;AAW7D,MAAMyB,gBAAc,GAAGC,IAAA,IAMqB;EAAA,IANpB;IAC7Bd,QAAQ;IACRzB,SAAS;IACTwC,gBAAgB;AAChBC,IAAAA,gBAAgB,GAAG;AAAErC,MAAAA,CAAC,EAAE,CAAC;AAAEE,MAAAA,CAAC,EAAE,CAAA;KAAG;AACjCvB,IAAAA,aAAAA;AACmB,GAAC,GAAAwD,IAAA,CAAA;AACpB,EAAA,MAAM,CAACG,aAAa,EAAEC,gBAAgB,CAAC,GAAGC,QAAQ,CAAgB;AAAEvC,IAAAA,IAAI,EAAE,CAAC;AAAEE,IAAAA,GAAG,EAAE,CAAA;AAAE,GAAC,CAAC,CAAA;AACtF,EAAA,MAAMsC,WAAwC,GAAGC,MAAM,CAAC,IAAI,CAAC,CAAA;;AAE7D;AACAC,EAAAA,SAAS,CAAC,MAAM;IACd,IAAIP,gBAAgB,IAAIA,gBAAgB,KAAA,IAAA,IAAhBA,gBAAgB,KAAhBA,KAAAA,CAAAA,IAAAA,gBAAgB,CAAEnD,OAAO,EAAE;MACjDmD,gBAAgB,CAACnD,OAAO,CAAC2D,SAAS,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAAA;AACvE,KAAA;AACA,IAAA,OAAO,MAAM;MACX,IAAIT,gBAAgB,IAAIA,gBAAgB,KAAA,IAAA,IAAhBA,gBAAgB,KAAhBA,KAAAA,CAAAA,IAAAA,gBAAgB,CAAEnD,OAAO,EAAE;QACjDmD,gBAAgB,CAACnD,OAAO,CAAC2D,SAAS,CAACE,MAAM,CAAC,6BAA6B,CAAC,CAAA;AAC1E,OAAA;KACD,CAAA;GACF,EAAE,EAAE,CAAC,CAAA;;AAEN;AACAH,EAAAA,SAAS,CAAC,MAAM;IACd,MAAMI,kBAAkB,GAAIjE,KAAK,IAAK;MAAA,IAAAkE,oBAAA,EAAAC,qBAAA,CAAA;AACpC,MAAA,IAAIR,WAAW,KAAXA,IAAAA,IAAAA,WAAW,KAAXA,KAAAA,CAAAA,IAAAA,WAAW,CAAExD,OAAO,IAAI,EAACwD,WAAW,aAAXA,WAAW,KAAA,KAAA,CAAA,IAAA,CAAAO,oBAAA,GAAXP,WAAW,CAAExD,OAAO,MAAA,IAAA,IAAA+D,oBAAA,KAAA,KAAA,CAAA,IAAA,CAAAC,qBAAA,GAApBD,oBAAA,CAAsB9D,QAAQ,MAAA,IAAA,IAAA+D,qBAAA,KAA9BA,KAAAA,CAAAA,IAAAA,qBAAA,CAAA9D,IAAA,CAAA6D,oBAAA,EAAiClE,KAAK,CAACM,MAAM,CAAC,CAAE,EAAA;AAC3ET,QAAAA,aAAa,EAAE,CAAA;AACjB,OAAA;KACD,CAAA;AACDW,IAAAA,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEwD,kBAAkB,CAAC,CAAA;AAC1D,IAAA,OAAO,MAAM;AACXzD,MAAAA,QAAQ,CAACG,mBAAmB,CAAC,WAAW,EAAEsD,kBAAkB,CAAC,CAAA;KAC9D,CAAA;GACF,EAAE,EAAE,CAAC,CAAA;;AAEN;AACAJ,EAAAA,SAAS,CAAC,MAAM;IAAA,IAAAhD,qBAAA,EAAAD,kBAAA,CAAA;IACd,MAAMwD,iBAAiB,GAAG,CAAAb,gBAAgB,KAAA,IAAA,IAAhBA,gBAAgB,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAhBA,gBAAgB,CAAErC,CAAC,KAAI,CAAC,CAAA;IAClD,MAAMmD,iBAAiB,GAAG,CAAAd,gBAAgB,KAAA,IAAA,IAAhBA,gBAAgB,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAhBA,gBAAgB,CAAEnC,CAAC,KAAI,CAAC,CAAA;IAClD,MAAMJ,UAAU,GAAAH,CAAAA,qBAAA,GAAGC,SAAS,aAATA,SAAS,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,CAAAF,kBAAA,GAATE,SAAS,CAAEX,OAAO,MAAAS,IAAAA,IAAAA,kBAAA,KAAlBA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,kBAAA,CAAoBK,qBAAqB,EAAE,MAAA,IAAA,IAAAJ,qBAAA,KAAA,KAAA,CAAA,GAAAA,qBAAA,GAAIsC,iBAAiB,CAAA;IACnF,MAAMjC,CAAC,GAAGF,UAAU,CAACE,CAAC,IAAIF,UAAU,CAACG,IAAI,CAAA;IACzC,MAAMC,CAAC,GAAGJ,UAAU,CAACI,CAAC,IAAIJ,UAAU,CAACK,GAAG,CAAA;AACxC,IAAA,MAAMmC,aAAa,GAAG;AACpBnC,MAAAA,GAAG,EAAED,CAAC;AACND,MAAAA,IAAI,EAAED,CAAAA;KACP,CAAA;IACD,IAAI,EAACyC,WAAW,KAAXA,IAAAA,IAAAA,WAAW,eAAXA,WAAW,CAAExD,OAAO,CAAE,EAAA;MACzBsD,gBAAgB,CAACD,aAAa,CAAC,CAAA;AACjC,KAAC,MAAM;AAAA,MAAA,IAAAc,qBAAA,CAAA;AACL,MAAA,MAAM5C,IAAI,GAAGiC,WAAW,KAAXA,IAAAA,IAAAA,WAAW,wBAAAW,qBAAA,GAAXX,WAAW,CAAExD,OAAO,MAAAmE,IAAAA,IAAAA,qBAAA,uBAApBA,qBAAA,CAAsBrD,qBAAqB,EAAE,CAAA;AAC1D,MAAA,IAAIuC,aAAa,CAACnC,GAAG,GAAGK,IAAI,CAACC,MAAM,EAAE;AACnC6B,QAAAA,aAAa,CAACnC,GAAG,IAAIL,UAAU,CAACW,MAAM,CAAA;QACtC6B,aAAa,CAACnC,GAAG,IAAIgD,iBAAiB,CAAA;AACxC,OAAC,MAAM;AACLb,QAAAA,aAAa,CAACnC,GAAG,IAAIK,IAAI,CAACC,MAAM,CAAA;QAChC6B,aAAa,CAACnC,GAAG,IAAIgD,iBAAiB,CAAA;AACxC,OAAA;AACAb,MAAAA,aAAa,CAACrC,IAAI,IAAIO,IAAI,CAACE,KAAK,GAAG,CAAC,CAAA;MACpC4B,aAAa,CAACrC,IAAI,IAAKH,UAAU,CAACW,MAAM,GAAG,CAAC,GAAI,CAAC,CAAA;MACjD6B,aAAa,CAACrC,IAAI,IAAIiD,iBAAiB,CAAA;MACvC,MAAMG,WAAW,GAAG9C,MAAM,CAACF,UAAU,GAAGG,IAAI,CAACE,KAAK,CAAA;AAClD,MAAA,IAAI2C,WAAW,GAAGf,aAAa,CAACrC,IAAI,EAAE;QACpCqC,aAAa,CAACrC,IAAI,GAAGoD,WAAW,CAAA;AAClC,OAAA;AACA,MAAA,IAAIf,aAAa,CAACrC,IAAI,GAAG,CAAC,EAAE;QAC1BqC,aAAa,CAACrC,IAAI,GAAG,CAAC,CAAA;AACxB,OAAA;MACAsC,gBAAgB,CAACD,aAAa,CAAC,CAAA;AACjC,KAAA;GACD,EAAE,EAAE,CAAC,CAAA;AAEN,EAAA,MAAMgB,WAAW,GAAGhE,QAAQ,CAAC0C,cAAc,CAAC,4BAA4B,CAAC,CAAA;AACzE,EAAA,IAAIsB,WAAW,EAAE;AACf,IAAA,oBACE9B,YAAY,eACVnD,cAAA,CAAAoD,aAAA,CAAApD,cAAA,CAAAkF,QAAA,EAAA,IAAA,eACElF,cAAA,CAAAoD,aAAA,CAAA,KAAA,EAAA;AAAKF,MAAAA,SAAS,EAAC,kCAAA;KAAqC,CAAA,eACpDlD,cAAA,CAAAoD,aAAA,CAAA,IAAA,EAAA;AACEF,MAAAA,SAAS,EAAC,iCAAiC;AAC3CG,MAAAA,GAAG,EAAEe,WAAY;AACjBnB,MAAAA,KAAK,EAAE;AACLM,QAAAA,OAAO,EAAE,cAAc;AACvBC,QAAAA,QAAQ,EAAE,OAAO;QACjB5B,IAAI,EAAG,CAAE6B,EAAAA,IAAI,CAACC,KAAK,CAACO,aAAa,CAACrC,IAAI,CAAE,CAAG,EAAA,CAAA;QAC3CE,GAAG,EAAG,GAAE2B,IAAI,CAACC,KAAK,CAACO,aAAa,CAACnC,GAAG,CAAE,CAAA,EAAA,CAAA;AACxC,OAAA;AAAE,KAAA,eAEF9B,cAAA,CAAAoD,aAAA,CAAC+B,SAAS,EAAA;AACRjC,MAAAA,SAAS,EAAC,sCAAsC;AAChDkC,MAAAA,YAAY,EAAE,CAAE;AAChBC,MAAAA,SAAS,EAAE,EAAG;AACdC,MAAAA,UAAU,EAAE,EAAA;AAAG,KAAA,EAEdtC,QAAQ,CACC,CACT,CACJ,EACHiC,WAAW,CACZ,CAAA;AAEL,GAAA;AACA,EAAA,OAAO,IAAI,CAAA;AACb,CAAC;;AC9GD,MAAMM,SAAS,GAAG,EAAE,CAAA;AAEb,MAAMxF,SAAS,GAAGyF,YAAU;AAC5B,MAAM3B,cAAc,GAAG4B,iBAAe;AAShCC,MAAAA,QAAQ,GAAG5B,IAAA,IAMW;EAAA,IANV;AACvBZ,IAAAA,SAAS,GAAG,EAAE;IACdF,QAAQ;IACR2C,OAAO;AACPC,IAAAA,OAAO,GAAG,KAAK;AACfC,IAAAA,QAAQ,GAAG,EAAA;AACE,GAAC,GAAA/B,IAAA,CAAA;EACd,MAAMgC,gBAAgB,GAAIC,CAAC,IAAK;AAC9B,IAAA,IAAI,CAACH,OAAO,IAAID,OAAO,EAAE;AACvBA,MAAAA,OAAO,aAAPA,OAAO,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAPA,OAAO,CAAGI,CAAC,CAAC,CAAA;AACd,KAAA;GACD,CAAA;EACD,oBACE/F,cAAA,CAAAoD,aAAA,CAAA,IAAA,EAAA;AACEF,IAAAA,SAAS,EAAE8C,YAAY,CAAC,CAAC9C,SAAS,EAAE,8BAA8B,EAAE0C,OAAO,GAAG,SAAS,GAAG,EAAE,CAAC,CAAE;AAC/FK,IAAAA,IAAI,EAAC,UAAU;AACf,IAAA,eAAA,EAAeL,OAAO,GAAG,IAAI,GAAG,KAAM;AACtCD,IAAAA,OAAO,EAAEG,gBAAiB;IAC1BI,UAAU,EAAGH,CAAC,IAAK;MAAE,IAAIA,CAAC,CAACI,OAAO,KAAKZ,SAAS,EAAEO,gBAAgB,CAACC,CAAC,CAAC,CAAA;KAAI;AACzEK,IAAAA,QAAQ,EAAE,CAAE;IACZ,YAAYP,EAAAA,QAAAA;AAAS,GAAA,eAErB7F,cAAA,CAAAoD,aAAA,CAACiD,KAAK,EAAA;AACJnD,IAAAA,SAAS,EAAC,oCAAoC;IAC9CoD,IAAI,EAAEC,eAAe,CAACC,UAAW;IACjCC,KAAK,EAAEb,OAAO,GAAGc,WAAW,CAACC,cAAc,GAAGD,WAAW,CAACE,cAAAA;GAEzD5D,EAAAA,QAAQ,CACH,CACL,CAAA;AAET,EAAC;MAEY6D,QAAQ,GAAGA,mBACtB7G,cAAA,CAAAoD,aAAA,CAAA,KAAA,EAAA;AACE0D,EAAAA,EAAE,EAAC,0BAA0B;AAC7B5D,EAAAA,SAAS,EAAC,0BAAA;AAA0B,CAEvC,EAAA;;AAED;MACa6D,qBAAqB,GAAGA,mBAAoB/G,cAAA,CAAAoD,aAAA,CAAA,KAAA,EAAA;AAAK0D,EAAAA,EAAE,EAAC,4BAAA;AAA4B,CAAG,EAAA;AAQjF,SAASE,WAAWA,CAAAC,KAAA,EAIA;EAAA,IAJC;IAClCC,WAAW;IACXC,SAAS;AACTC,IAAAA,MAAAA;AACgB,GAAC,GAAAH,KAAA,CAAA;EACjB,MAAM,CAACI,QAAQ,EAAEC,WAAW,CAAC,GAAGnD,QAAQ,CAAC,KAAK,CAAC,CAAA;EAC/C,oBACEnE,cAAA,CAAAoD,aAAA,CAAA,KAAA,EAAA;AACEF,IAAAA,SAAS,EAAC,uBAAuB;AACjCD,IAAAA,KAAK,EAAE;AAAEM,MAAAA,OAAO,EAAE,QAAA;AAAS,KAAA;GAE1B2D,EAAAA,WAAW,KAAXA,IAAAA,IAAAA,WAAW,KAAXA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,WAAW,CAAG,MAAMI,WAAW,CAAC,CAACD,QAAQ,CAAC,CAAC,EAC3C,CAACA,QAAQ,IAAID,MAAM,KAAKD,SAAS,CAAC,MAAMG,WAAW,CAAC,KAAK,CAAC,CAAC,CACxD,CAAA;AAEV;;;;"}