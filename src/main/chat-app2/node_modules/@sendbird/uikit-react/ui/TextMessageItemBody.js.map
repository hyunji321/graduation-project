{"version":3,"file":"TextMessageItemBody.js","sources":["../../src/ui/TextMessageItemBody/index.tsx"],"sourcesContent":["import './index.scss';\nimport React, { ReactElement, useContext, useMemo } from 'react';\nimport type { UserMessage } from '@sendbird/chat/message';\n\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { getClassName, isEditedMessage } from '../../utils';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { tokenizeMessage } from '../../modules/Message/utils/tokens/tokenize';\nimport TextFragment from '../../modules/Message/components/TextFragment';\nimport { TEXT_MESSAGE_BODY_CLASSNAME } from './consts';\n\ninterface Props {\n  className?: string | Array<string>;\n  message: UserMessage;\n  isByMe?: boolean;\n  mouseHover?: boolean;\n  isMentionEnabled?: boolean;\n  isReactionEnabled?: boolean;\n}\n\nexport default function TextMessageItemBody({\n  className = '',\n  message,\n  isByMe = false,\n  mouseHover = false,\n  isMentionEnabled = false,\n  isReactionEnabled = false,\n}: Props): ReactElement {\n  const { stringSet } = useContext(LocalizationContext);\n  const isMessageMentioned = isMentionEnabled\n    && message?.mentionedMessageTemplate?.length > 0\n    && message?.mentionedUsers?.length > 0;\n  const tokens = useMemo(() => {\n    if (isMessageMentioned) {\n      return tokenizeMessage({\n        mentionedUsers: message?.mentionedUsers,\n        messageText: message?.mentionedMessageTemplate,\n      });\n    }\n    return tokenizeMessage({\n      messageText: message?.message,\n    });\n  }, [message?.updatedAt]);\n  return (\n    <Label\n      type={LabelTypography.BODY_1}\n      color={isByMe ? LabelColors.ONCONTENT_1 : LabelColors.ONBACKGROUND_1}\n    >\n      <div className={getClassName([\n        className,\n        TEXT_MESSAGE_BODY_CLASSNAME,\n        isByMe ? 'outgoing' : 'incoming',\n        mouseHover ? 'mouse-hover' : '',\n        (isReactionEnabled && message?.reactions?.length > 0) ? 'reactions' : '',\n      ])}>\n        <TextFragment tokens={tokens} />\n        {\n          isEditedMessage(message) && (\n            <Label\n              className=\"sendbird-text-message-item-body__message edited\"\n              type={LabelTypography.BODY_1}\n              color={isByMe ? LabelColors.ONCONTENT_2 : LabelColors.ONBACKGROUND_2}\n            >\n              {` ${stringSet.MESSAGE_EDITED} `}\n            </Label>\n          )\n        }\n      </div>\n    </Label>\n  );\n}\n"],"names":["TextMessageItemBody","_ref","_message$mentionedMes","_message$mentionedUse","_message$reactions","className","message","isByMe","mouseHover","isMentionEnabled","isReactionEnabled","stringSet","useContext","LocalizationContext","isMessageMentioned","mentionedMessageTemplate","length","mentionedUsers","tokens","useMemo","tokenizeMessage","messageText","updatedAt","React","createElement","Label","type","LabelTypography","BODY_1","color","LabelColors","ONCONTENT_1","ONBACKGROUND_1","getClassName","TEXT_MESSAGE_BODY_CLASSNAME","reactions","TextFragment","isEditedMessage","ONCONTENT_2","ONBACKGROUND_2","MESSAGE_EDITED"],"mappings":"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"}