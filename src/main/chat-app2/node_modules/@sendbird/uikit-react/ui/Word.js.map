{"version":3,"file":"Word.js","sources":["../../src/ui/Word/index.tsx"],"sourcesContent":["/**\n * @deprecated  This component is deprecated and will be removed in the next major version.\n * Use TextFragment instead.\n */\nimport './index.scss';\nimport React from 'react';\nimport type { UserMessage } from '@sendbird/chat/message';\n\nimport { LabelTypography } from '../Label';\nimport LinkLabel from '../LinkLabel';\nimport uuidv4 from '../../utils/uuid';\nimport { convertWordToStringObj, StringObjType, StringObj } from '../../utils';\nimport MentionLabel from '../MentionLabel';\n\ninterface WordProps {\n  word: string;\n  message: UserMessage;\n  isByMe?: boolean;\n  mentionTemplate?: string;\n  renderString?: (stringObj: StringObj) => JSX.Element;\n}\n\n// Word and StringObj will include types: normal, mention, url\nexport default function Word(props: WordProps): JSX.Element {\n  const {\n    word,\n    message,\n    isByMe = false,\n    mentionTemplate = '@',\n    renderString = null,\n  } = props;\n  if (word === '') {\n    return null;\n  }\n  return (\n    <span className=\"sendbird-word\">\n      {\n        convertWordToStringObj(word, message?.mentionedUsers).map((stringObj) => {\n          const type = stringObj?.type || '';\n          const value = stringObj?.value || '';\n          const userId = stringObj?.userId || '';\n          if (renderString && typeof renderString === 'function') {\n            return renderString(stringObj);\n          }\n          if (type === StringObjType.mention) {\n            return (\n              <MentionLabel\n                mentionTemplate={mentionTemplate}\n                mentionedUserId={userId}\n                mentionedUserNickname={value}\n                key={uuidv4()}\n                isByMe={isByMe}\n              />\n            );\n          } else if (type === StringObjType.url) {\n            const urlRegex = /([a-zA-Z0-9]+:\\/\\/)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})(:[0-9]+)?(\\/.*)?/;\n            const targetUrl = value.match(urlRegex)?.[0];\n            const stringUrl = { front: '', url: '', back: '' };\n            if (targetUrl) {\n              const targetUrlIndex = value.indexOf(targetUrl);\n              if (targetUrlIndex > 0) {\n                stringUrl.front = value.slice(0, targetUrlIndex);\n              }\n              stringUrl.url = value.slice(targetUrlIndex, targetUrlIndex + targetUrl.length);\n              if (targetUrlIndex + targetUrl.length < value.length) {\n                stringUrl.back = value.slice(targetUrlIndex + targetUrl.length);\n              }\n            }\n            if (targetUrl) {\n              return [\n                stringUrl.front ? stringUrl.front : '',\n                stringUrl.url ? (\n                  <LinkLabel\n                    className=\"sendbird-word__url\"\n                    key={uuidv4()}\n                    src={stringUrl.url}\n                    type={LabelTypography.BODY_1}\n                  >\n                    {stringUrl.url}\n                  </LinkLabel>\n                ) : null,\n                stringUrl.back ? stringUrl.back : '',\n              ];\n            }\n            return (\n              <LinkLabel\n                className=\"sendbird-word__url\"\n                key={uuidv4()}\n                src={word}\n                type={LabelTypography.BODY_1}\n              >\n                {value}\n              </LinkLabel>\n            );\n          } else {\n            return value;\n          }\n        })\n      }\n    </span>\n  );\n}\n"],"names":["Word","props","word","message","isByMe","mentionTemplate","renderString","React","createElement","className","convertWordToStringObj","mentionedUsers","map","stringObj","type","value","userId","StringObjType","mention","MentionLabel","mentionedUserId","mentionedUserNickname","key","uuidv4","url","_value$match","urlRegex","targetUrl","match","stringUrl","front","back","targetUrlIndex","indexOf","slice","length","LinkLabel","src","LabelTypography","BODY_1"],"mappings":"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"}