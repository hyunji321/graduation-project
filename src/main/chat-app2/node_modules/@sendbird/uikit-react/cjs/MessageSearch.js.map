{"version":3,"file":"MessageSearch.js","sources":["../../src/modules/MessageSearch/index.tsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport './index.scss';\n\nimport MessageSearch, { MessageSearchUIProps } from './components/MessageSearchUI';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport Icon, { IconTypes, IconColors } from '../../ui/Icon';\nimport IconButton from '../../ui/IconButton';\nimport Label, { LabelTypography, LabelColors } from '../../ui/Label';\nimport Loader from '../../ui/Loader';\nimport { MessageSearchProvider, MessageSearchProviderProps } from './context/MessageSearchProvider';\n\nexport interface MessageSearchPannelProps extends\n  MessageSearchUIProps, MessageSearchProviderProps {\n  onResultClick?: (message) => void;\n  onCloseClick?: () => void;\n}\n\nconst COMPONENT_CLASS_NAME = 'sendbird-message-search-pannel';\n\nfunction MessageSearchPannel(props: MessageSearchPannelProps): JSX.Element {\n  const {\n    channelUrl,\n    onResultClick,\n    onCloseClick,\n    messageSearchQuery,\n    renderPlaceHolderError,\n    renderPlaceHolderLoading,\n    renderPlaceHolderNoString,\n    renderPlaceHolderEmptyList,\n    renderSearchItem,\n  } = props;\n\n  const [searchString, setSearchString] = useState('');\n  const [inputString, setInputString] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  let timeout: any = null;\n  useEffect(() => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      setSearchString(inputString);\n      setLoading(true);\n      timeout = null;\n    }, 500);\n  }, [inputString]);\n\n  const handleOnChangeInputString = (e) => {\n    setInputString(e.target.value);\n  };\n\n  const handleOnResultLoaded = () => {\n    setLoading(false);\n  };\n\n  const handleOnClickResetStringButton = (e) => {\n    e.stopPropagation();\n    setInputString('');\n    setSearchString('');\n  };\n\n  return (\n    <div className={COMPONENT_CLASS_NAME}>\n      <div className={`${COMPONENT_CLASS_NAME}__header`}>\n        <Label\n          className={`${COMPONENT_CLASS_NAME}__header__title`}\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {stringSet.SEARCH_IN_CHANNEL}\n        </Label>\n        <IconButton\n          className={`${COMPONENT_CLASS_NAME}__header__close-button`}\n          width=\"32px\"\n          height=\"32px\"\n          onClick={onCloseClick}\n        >\n          <Icon\n            type={IconTypes.CLOSE}\n            fillColor={IconColors.ON_BACKGROUND_1}\n            width=\"22px\"\n            height=\"22px\"\n          />\n        </IconButton>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__input`}>\n        <div className={`${COMPONENT_CLASS_NAME}__input__container`}>\n            <Icon\n              className={`${COMPONENT_CLASS_NAME}__input__container__search-icon`}\n              type={IconTypes.SEARCH}\n              fillColor={IconColors.ON_BACKGROUND_3}\n              width=\"24px\"\n              height=\"24px\"\n            />\n            <input\n              className={`${COMPONENT_CLASS_NAME}__input__container__input-area`}\n              placeholder={stringSet.SEARCH}\n              value={inputString}\n              onChange={handleOnChangeInputString}\n            />\n            {\n              inputString && loading && (\n                <Loader\n                  className={`${COMPONENT_CLASS_NAME}__input__container__spinner`}\n                  width=\"20px\"\n                  height=\"20px\"\n                >\n                  <Icon\n                    type={IconTypes.SPINNER}\n                    fillColor={IconColors.PRIMARY}\n                    width=\"20px\"\n                    height=\"20px\"\n                  />\n                </Loader>\n              )\n            }\n            {\n              !loading && inputString && (\n                <Icon\n                  className={`${COMPONENT_CLASS_NAME}__input__container__reset-input-button`}\n                  type={IconTypes.REMOVE}\n                  fillColor={IconColors.ON_BACKGROUND_3}\n                  width=\"20px\"\n                  height=\"20px\"\n                  onClick={handleOnClickResetStringButton}\n                />\n              )\n            }\n        </div>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__message-search`}>\n        <MessageSearchProvider\n          channelUrl={channelUrl}\n          searchString={searchString}\n          onResultClick={onResultClick}\n          onResultLoaded={handleOnResultLoaded}\n          messageSearchQuery={messageSearchQuery}\n        >\n          <MessageSearch\n            renderPlaceHolderError={renderPlaceHolderError}\n            renderPlaceHolderLoading={renderPlaceHolderLoading}\n            renderPlaceHolderNoString={renderPlaceHolderNoString}\n            renderPlaceHolderEmptyList={renderPlaceHolderEmptyList}\n            renderSearchItem={renderSearchItem}\n          />\n        </MessageSearchProvider>\n      </div>\n    </div>\n  );\n}\n\nexport default MessageSearchPannel;\n"],"names":["COMPONENT_CLASS_NAME","MessageSearchPannel","props","channelUrl","onResultClick","onCloseClick","messageSearchQuery","renderPlaceHolderError","renderPlaceHolderLoading","renderPlaceHolderNoString","renderPlaceHolderEmptyList","renderSearchItem","searchString","setSearchString","useState","inputString","setInputString","loading","setLoading","stringSet","useContext","LocalizationContext","timeout","useEffect","clearTimeout","setTimeout","handleOnChangeInputString","e","target","value","handleOnResultLoaded","handleOnClickResetStringButton","stopPropagation","React","createElement","className","Label","type","LabelTypography","H_2","color","LabelColors","ONBACKGROUND_1","SEARCH_IN_CHANNEL","IconButton","width","height","onClick","Icon","IconTypes","CLOSE","fillColor","IconColors","ON_BACKGROUND_1","SEARCH","ON_BACKGROUND_3","placeholder","onChange","Loader","SPINNER","PRIMARY","REMOVE","MessageSearchProvider","onResultLoaded","MessageSearch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBA,MAAMA,oBAAoB,GAAG,gCAAgC,CAAA;AAE7D,SAASC,mBAAmBA,CAACC,KAA+B,EAAe;EACzE,MAAM;IACJC,UAAU;IACVC,aAAa;IACbC,YAAY;IACZC,kBAAkB;IAClBC,sBAAsB;IACtBC,wBAAwB;IACxBC,yBAAyB;IACzBC,0BAA0B;AAC1BC,IAAAA,gBAAAA;AACF,GAAC,GAAGT,KAAK,CAAA;EAET,MAAM,CAACU,YAAY,EAAEC,eAAe,CAAC,GAAGC,cAAQ,CAAC,EAAE,CAAC,CAAA;EACpD,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGF,cAAQ,CAAC,EAAE,CAAC,CAAA;EAClD,MAAM,CAACG,OAAO,EAAEC,UAAU,CAAC,GAAGJ,cAAQ,CAAC,KAAK,CAAC,CAAA;EAC7C,MAAM;AAAEK,IAAAA,SAAAA;AAAU,GAAC,GAAGC,gBAAU,CAACC,uCAAmB,CAAC,CAAA;EAErD,IAAIC,OAAY,GAAG,IAAI,CAAA;AACvBC,EAAAA,eAAS,CAAC,MAAM;AACd,IAAA,IAAID,OAAO,EAAE;MACXE,YAAY,CAACF,OAAO,CAAC,CAAA;AACvB,KAAA;IACAA,OAAO,GAAGG,UAAU,CAAC,MAAM;MACzBZ,eAAe,CAACE,WAAW,CAAC,CAAA;MAC5BG,UAAU,CAAC,IAAI,CAAC,CAAA;AAChBI,MAAAA,OAAO,GAAG,IAAI,CAAA;KACf,EAAE,GAAG,CAAC,CAAA;AACT,GAAC,EAAE,CAACP,WAAW,CAAC,CAAC,CAAA;EAEjB,MAAMW,yBAAyB,GAAIC,CAAC,IAAK;AACvCX,IAAAA,cAAc,CAACW,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAA;GAC/B,CAAA;EAED,MAAMC,oBAAoB,GAAGA,MAAM;IACjCZ,UAAU,CAAC,KAAK,CAAC,CAAA;GAClB,CAAA;EAED,MAAMa,8BAA8B,GAAIJ,CAAC,IAAK;IAC5CA,CAAC,CAACK,eAAe,EAAE,CAAA;IACnBhB,cAAc,CAAC,EAAE,CAAC,CAAA;IAClBH,eAAe,CAAC,EAAE,CAAC,CAAA;GACpB,CAAA;EAED,oBACEoB,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKC,IAAAA,SAAS,EAAEnC,oBAAAA;GACdiC,eAAAA,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAKC,SAAS,EAAG,GAAEnC,oBAAqB,CAAA,QAAA,CAAA;AAAU,GAAA,eAChDiC,yBAAA,CAAAC,aAAA,CAACE,cAAK,EAAA;IACJD,SAAS,EAAG,CAAEnC,EAAAA,oBAAqB,CAAiB,eAAA,CAAA;IACpDqC,IAAI,EAAEC,wBAAe,CAACC,GAAI;IAC1BC,KAAK,EAAEC,oBAAW,CAACC,cAAAA;GAElBvB,EAAAA,SAAS,CAACwB,iBAAiB,CACtB,eACRV,yBAAA,CAAAC,aAAA,CAACU,aAAU,EAAA;IACTT,SAAS,EAAG,CAAEnC,EAAAA,oBAAqB,CAAwB,sBAAA,CAAA;AAC3D6C,IAAAA,KAAK,EAAC,MAAM;AACZC,IAAAA,MAAM,EAAC,MAAM;AACbC,IAAAA,OAAO,EAAE1C,YAAAA;AAAa,GAAA,eAEtB4B,yBAAA,CAAAC,aAAA,CAACc,kBAAI,EAAA;IACHX,IAAI,EAAEY,iBAAS,CAACC,KAAM;IACtBC,SAAS,EAAEC,kBAAU,CAACC,eAAgB;AACtCR,IAAAA,KAAK,EAAC,MAAM;AACZC,IAAAA,MAAM,EAAC,MAAA;AAAM,GAAA,CACb,CACS,CACT,eACNb,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAKC,SAAS,EAAG,GAAEnC,oBAAqB,CAAA,OAAA,CAAA;GACtCiC,eAAAA,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAKC,SAAS,EAAG,GAAEnC,oBAAqB,CAAA,kBAAA,CAAA;AAAoB,GAAA,eACxDiC,yBAAA,CAAAC,aAAA,CAACc,kBAAI,EAAA;IACHb,SAAS,EAAG,CAAEnC,EAAAA,oBAAqB,CAAiC,+BAAA,CAAA;IACpEqC,IAAI,EAAEY,iBAAS,CAACK,MAAO;IACvBH,SAAS,EAAEC,kBAAU,CAACG,eAAgB;AACtCV,IAAAA,KAAK,EAAC,MAAM;AACZC,IAAAA,MAAM,EAAC,MAAA;GACP,CAAA,eACFb,yBAAA,CAAAC,aAAA,CAAA,OAAA,EAAA;IACEC,SAAS,EAAG,CAAEnC,EAAAA,oBAAqB,CAAgC,8BAAA,CAAA;IACnEwD,WAAW,EAAErC,SAAS,CAACmC,MAAO;AAC9BzB,IAAAA,KAAK,EAAEd,WAAY;AACnB0C,IAAAA,QAAQ,EAAE/B,yBAAAA;GACV,CAAA,EAEAX,WAAW,IAAIE,OAAO,iBACpBgB,yBAAA,CAAAC,aAAA,CAACwB,SAAM,EAAA;IACLvB,SAAS,EAAG,CAAEnC,EAAAA,oBAAqB,CAA6B,2BAAA,CAAA;AAChE6C,IAAAA,KAAK,EAAC,MAAM;AACZC,IAAAA,MAAM,EAAC,MAAA;AAAM,GAAA,eAEbb,yBAAA,CAAAC,aAAA,CAACc,kBAAI,EAAA;IACHX,IAAI,EAAEY,iBAAS,CAACU,OAAQ;IACxBR,SAAS,EAAEC,kBAAU,CAACQ,OAAQ;AAC9Bf,IAAAA,KAAK,EAAC,MAAM;AACZC,IAAAA,MAAM,EAAC,MAAA;GACP,CAAA,CAEL,EAGD,CAAC7B,OAAO,IAAIF,WAAW,iBACrBkB,yBAAA,CAAAC,aAAA,CAACc,kBAAI,EAAA;IACHb,SAAS,EAAG,CAAEnC,EAAAA,oBAAqB,CAAwC,sCAAA,CAAA;IAC3EqC,IAAI,EAAEY,iBAAS,CAACY,MAAO;IACvBV,SAAS,EAAEC,kBAAU,CAACG,eAAgB;AACtCV,IAAAA,KAAK,EAAC,MAAM;AACZC,IAAAA,MAAM,EAAC,MAAM;AACbC,IAAAA,OAAO,EAAEhB,8BAAAA;AAA+B,GAAA,CAE3C,CAED,CACF,eACNE,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;IAAKC,SAAS,EAAG,GAAEnC,oBAAqB,CAAA,gBAAA,CAAA;AAAkB,GAAA,eACxDiC,yBAAA,CAAAC,aAAA,CAAC4B,2CAAqB,EAAA;AACpB3D,IAAAA,UAAU,EAAEA,UAAW;AACvBS,IAAAA,YAAY,EAAEA,YAAa;AAC3BR,IAAAA,aAAa,EAAEA,aAAc;AAC7B2D,IAAAA,cAAc,EAAEjC,oBAAqB;AACrCxB,IAAAA,kBAAkB,EAAEA,kBAAAA;AAAmB,GAAA,eAEvC2B,yBAAA,CAAAC,aAAA,CAAC8B,wDAAa,EAAA;AACZzD,IAAAA,sBAAsB,EAAEA,sBAAuB;AAC/CC,IAAAA,wBAAwB,EAAEA,wBAAyB;AACnDC,IAAAA,yBAAyB,EAAEA,yBAA0B;AACrDC,IAAAA,0BAA0B,EAAEA,0BAA2B;AACvDC,IAAAA,gBAAgB,EAAEA,gBAAAA;GAClB,CAAA,CACoB,CACpB,CACF,CAAA;AAEV;;;;"}