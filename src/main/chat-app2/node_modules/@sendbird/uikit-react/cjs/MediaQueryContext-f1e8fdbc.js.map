{"version":3,"file":"MediaQueryContext-f1e8fdbc.js","sources":["../../src/lib/MediaQueryContext.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport type { Logger } from './SendbirdState';\n\nconst DEFAULT_MOBILE = false;\n// const DEFAULT_MOBILE = '768px';\nconst MOBILE_CLASSNAME = 'sendbird--mobile-mode';\n\nconst MediaQueryContext = React.createContext({\n  breakpoint: DEFAULT_MOBILE,\n  isMobile: false,\n});\n\nexport interface MediaQueryProviderProps {\n  children: React.ReactElement;\n  breakpoint?: string | boolean;\n  logger?: Logger;\n}\n\nconst addClassNameToBody = () => {\n  try {\n    const body = document.querySelector('body');\n    body?.classList.add(MOBILE_CLASSNAME);\n  } catch {\n    // noop\n  }\n};\n\nconst removeClassNameFromBody = () => {\n  try {\n    const body = document.querySelector('body');\n    body?.classList.remove(MOBILE_CLASSNAME);\n  } catch {\n    // noop\n  }\n};\n\nconst MediaQueryProvider = (props: MediaQueryProviderProps): React.ReactElement => {\n  const {\n    children,\n    logger,\n  } = props;\n  const breakpoint = props?.breakpoint || DEFAULT_MOBILE;\n  const [isMobile, setIsMobile] = useState(false);\n  useEffect(() => {\n    const updateSize = () => {\n      if (typeof breakpoint === 'boolean') {\n        setIsMobile(breakpoint);\n        if (breakpoint) {\n          logger?.info?.('MediaQueryProvider: isMobile: true');\n          addClassNameToBody();\n        } else {\n          logger?.info?.('MediaQueryProvider: isMobile: false');\n          removeClassNameFromBody();\n        }\n      } else {\n        const mq = window.matchMedia(`(max-width: ${breakpoint})`);\n        logger?.info?.(`MediaQueryProvider: Screensize updated to ${breakpoint}`);\n        if (mq.matches) {\n          setIsMobile(true);\n          addClassNameToBody();\n          logger?.info?.('MediaQueryProvider: isMobile: true');\n        } else {\n          setIsMobile(false);\n          removeClassNameFromBody();\n          logger?.info?.('MediaQueryProvider: isMobile: false');\n        }\n      }\n    };\n    updateSize();\n    window.addEventListener('resize', updateSize);\n    logger?.info?.('MediaQueryProvider: addEventListener', { updateSize });\n    return () => {\n      window.removeEventListener('resize', updateSize);\n      logger?.info?.('MediaQueryProvider: removeEventListener', { updateSize });\n    };\n  }, [breakpoint]);\n  return (\n    <MediaQueryContext.Provider value={{ breakpoint, isMobile }}>\n      {children}\n    </MediaQueryContext.Provider>\n  );\n};\n\nexport type useMediaQueryContextType = () => ({\n  breakpoint: string | boolean;\n  isMobile: boolean;\n});\n\nconst useMediaQueryContext: useMediaQueryContextType = () => React.useContext(MediaQueryContext);\n\nexport { MediaQueryProvider, useMediaQueryContext };\n"],"names":["DEFAULT_MOBILE","MOBILE_CLASSNAME","MediaQueryContext","React","createContext","breakpoint","isMobile","addClassNameToBody","body","document","querySelector","classList","add","_unused","removeClassNameFromBody","remove","_unused2","MediaQueryProvider","props","children","logger","setIsMobile","useState","useEffect","_logger$info6","updateSize","_logger$info","info","call","_logger$info2","_logger$info3","mq","window","matchMedia","matches","_logger$info4","_logger$info5","addEventListener","_logger$info7","removeEventListener","createElement","Provider","value","useMediaQueryContext","useContext"],"mappings":"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"}