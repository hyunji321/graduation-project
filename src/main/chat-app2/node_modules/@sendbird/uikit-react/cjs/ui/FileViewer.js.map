{"version":3,"file":"FileViewer.js","sources":["../../../src/ui/FileViewer/index.tsx"],"sourcesContent":["import React, { MouseEvent, ReactElement, useContext } from 'react';\nimport { FileMessage } from '@sendbird/chat/message';\nimport { createPortal } from 'react-dom';\n\nimport './index.scss';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { MODAL_ROOT } from '../../hooks/useModal/ModalRoot';\nimport { isImage, isVideo, isSupportedFileView } from '../../utils';\n\nimport Avatar from '../Avatar/index';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Icon, { IconColors, IconTypes } from '../Icon';\n\ninterface SenderInfo {\n  profileUrl: string;\n  nickname: string;\n}\ninterface FileInfo {\n  name: string;\n  type: string;\n  url: string;\n}\nexport interface FileViewerComponentProps extends SenderInfo, FileInfo {\n  isByMe?: boolean;\n  disableDelete?: boolean;\n  onClose: (e: MouseEvent<HTMLDivElement>) => void;\n  onDelete: (e: MouseEvent<HTMLDivElement>) => void;\n}\n\nexport const FileViewerComponent = ({\n  profileUrl,\n  nickname,\n  name,\n  type,\n  url,\n  isByMe = true,\n  disableDelete = false,\n  onClose,\n  onDelete,\n}: FileViewerComponentProps): ReactElement => {\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div className=\"sendbird-fileviewer\">\n      <div className=\"sendbird-fileviewer__header\">\n        <div className=\"sendbird-fileviewer__header__left\">\n          <div className=\"sendbird-fileviewer__header__left__avatar\">\n            <Avatar height=\"32px\" width=\"32px\" src={profileUrl} />\n          </div>\n          <Label\n            className=\"sendbird-fileviewer__header__left__filename\"\n            type={LabelTypography.H_2}\n            color={LabelColors.ONBACKGROUND_1}\n          >\n            {name}\n          </Label>\n          <Label\n            className=\"sendbird-fileviewer__header__left__sender-name\"\n            type={LabelTypography.BODY_1}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {nickname}\n          </Label>\n        </div>\n        <div\n          className=\"sendbird-fileviewer__header__right\"\n        >\n          {\n            isSupportedFileView(type) && (\n              <div className=\"sendbird-fileviewer__header__right__actions\" >\n                <a\n                  className=\"sendbird-fileviewer__header__right__actions__download\"\n                  rel=\"noopener noreferrer\"\n                  href={url}\n                  target=\"_blank\"\n                >\n                  <Icon\n                    type={IconTypes.DOWNLOAD}\n                    fillColor={IconColors.ON_BACKGROUND_1}\n                    height=\"24px\"\n                    width=\"24px\"\n                  />\n                </a>\n                {\n                  onDelete && isByMe && (\n                    <div className=\"sendbird-fileviewer__header__right__actions__delete\">\n                      <Icon\n                        className={disableDelete ? 'disabled' : ''}\n                        type={IconTypes.DELETE}\n                        fillColor={disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1}\n                        height=\"24px\"\n                        width=\"24px\"\n                        onClick={(e) => { if (!disableDelete) { onDelete?.(e); } }}\n                      />\n                    </div>\n                  )\n                }\n              </div>\n            )\n          }\n          <div className=\"sendbird-fileviewer__header__right__actions__close\">\n            <Icon\n              type={IconTypes.CLOSE}\n              fillColor={IconColors.ON_BACKGROUND_1}\n              height=\"24px\"\n              width=\"24px\"\n              onClick={(e) => onClose?.(e)}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"sendbird-fileviewer__content\">\n        {isVideo(type) && (\n          <video\n            controls\n            className=\"sendbird-fileviewer__content__video\"\n          >\n            <source src={url} type={type} />\n          </video>\n        )}\n        {\n          isImage(type) && (\n            <img\n              src={url}\n              alt={name}\n              className=\"sendbird-fileviewer__content__img\"\n            />\n          )\n        }\n        {\n          !isSupportedFileView(type) && (\n            <div\n              className=\"sendbird-fileviewer__content__unsupported\"\n            >\n              <Label type={LabelTypography.H_1} color={LabelColors.ONBACKGROUND_1}>\n                {stringSet?.UI__FILE_VIEWER__UNSUPPORT || 'Unsupported message'}\n              </Label>\n            </div>\n          )\n        }\n      </div>\n    </div>\n  );\n};\n\nexport interface FileViewerProps {\n  message: FileMessage;\n  isByMe?: boolean;\n  onClose: (e: MouseEvent<HTMLDivElement>) => void;\n  onDelete: (e: MouseEvent<HTMLDivElement>) => void;\n}\n\nexport default function FileViewer({\n  message,\n  isByMe = false,\n  onClose,\n  onDelete,\n}: FileViewerProps): ReactElement {\n  return createPortal(\n    (\n      <FileViewerComponent\n        profileUrl={message?.sender?.profileUrl}\n        nickname={message?.sender?.nickname}\n        name={message?.name}\n        type={message?.type}\n        url={message?.url}\n        isByMe={isByMe}\n        disableDelete={message?.threadInfo?.replyCount > 0}\n        onClose={onClose}\n        onDelete={onDelete}\n      />\n    ),\n    document.getElementById(MODAL_ROOT),\n  );\n}\n"],"names":["FileViewerComponent","_ref","profileUrl","nickname","name","type","url","isByMe","disableDelete","onClose","onDelete","stringSet","useContext","LocalizationContext","React","createElement","className","Avatar","height","width","src","Label","LabelTypography","H_2","color","LabelColors","ONBACKGROUND_1","BODY_1","ONBACKGROUND_2","isSupportedFileView","rel","href","target","Icon","IconTypes","DOWNLOAD","fillColor","IconColors","ON_BACKGROUND_1","DELETE","GRAY","onClick","e","CLOSE","isVideo","controls","isImage","alt","H_1","UI__FILE_VIEWER__UNSUPPORT","FileViewer","_ref2","_message$sender","_message$sender2","_message$threadInfo","message","createPortal","sender","threadInfo","replyCount","document","getElementById","MODAL_ROOT"],"mappings":"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"}