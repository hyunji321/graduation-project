{"version":3,"file":"OpenchannelOGMessage.js","sources":["../../../src/ui/OpenchannelOGMessage/utils.ts","../../../src/ui/OpenchannelOGMessage/index.tsx"],"sourcesContent":["import type { UserMessage } from '@sendbird/chat/message';\n\nexport const URL_REG = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\nexport const createUrlTester = (regexp: RegExp) => (text: string): boolean => regexp.test(text);\nexport const checkOGIsEnalbed = (message: UserMessage): boolean => {\n  const { ogMetaData } = message;\n  if (!ogMetaData) {\n    return false;\n  }\n  const { url } = ogMetaData;\n  if (!url) {\n    return false;\n  }\n  return true;\n};\n","import React, { useState, useContext, useMemo, useRef, useEffect } from 'react';\nimport { UserMessage } from '@sendbird/chat/message';\nimport format from 'date-fns/format';\nimport './index.scss';\n\nimport Avatar from '../Avatar';\nimport ContextMenu, { MenuItems, MenuItem } from '../ContextMenu';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport IconButton from '../IconButton';\nimport ImageRenderer from '../ImageRenderer';\nimport LinkLabel from '../LinkLabel';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Loader from '../Loader';\nimport UserProfile from '../UserProfile';\nimport { UserProfileContext } from '../../lib/UserProfileContext';\n\nimport uuidv4 from '../../utils/uuid';\nimport { copyToClipboard } from '../OpenchannelUserMessage/utils';\nimport { useLocalization } from '../../lib/LocalizationContext';\nimport { checkOGIsEnalbed } from './utils';\nimport {\n  checkIsPending,\n  checkIsFailed,\n  isFineCopy,\n  isFineEdit,\n  isFineResend,\n  isFineDelete,\n  showMenuTrigger,\n  getSenderFromMessage,\n} from '../../utils/openChannelUtils';\nimport { useMediaQueryContext } from '../../lib/MediaQueryContext';\nimport useLongPress from '../../hooks/useLongPress';\nimport OpenChannelMobileMenu from '../OpenChannelMobileMenu';\nimport TextFragment from '../../modules/Message/components/TextFragment';\nimport { tokenizeMessage } from '../../modules/Message/utils/tokens/tokenize';\n\ninterface OpenChannelOGMessageProps {\n  message: UserMessage;\n  isOperator?: boolean;\n  isEphemeral?: boolean;\n  className?: string | Array<string>;\n  disabled?: boolean;\n  showEdit(bool: boolean): void;\n  showRemove(bool: boolean): void;\n  resendMessage(message: UserMessage): void;\n  chainTop?: boolean;\n  chainBottom?: boolean;\n  userId: string;\n}\n\nexport default function OpenchannelOGMessage({\n  message,\n  isOperator,\n  isEphemeral = false,\n  className,\n  disabled,\n  showEdit,\n  showRemove,\n  resendMessage,\n  chainTop,\n  userId,\n}: OpenChannelOGMessageProps): JSX.Element {\n  const status = message?.sendingStatus;\n  const ogMetaData = message.ogMetaData ?? null;\n  const defaultImage = ogMetaData?.defaultImage;\n  const { stringSet, dateLocale } = useLocalization();\n  const { isMobile } = useMediaQueryContext();\n\n  const { disableUserProfile, renderUserProfile } = useContext<UserProfileContext>(UserProfileContext);\n  const [contextStyle, setContextStyle] = useState({});\n  const [showContextMenu, setShowContextMenu] = useState(false);\n\n  const openLink = () => {\n    if (checkOGIsEnalbed(message) && ogMetaData?.url) {\n      window.open(ogMetaData.url);\n    }\n  };\n\n  const onLongPress = useLongPress({\n    onLongPress: () => setShowContextMenu(true),\n    onClick: openLink,\n  }, {\n    delay: 300,\n  });\n\n  const messageComponentRef = useRef(null);\n  const contextMenuRef = useRef(null);\n  const mobileMenuRef = useRef(null);\n  const avatarRef = useRef(null);\n\n  const isPending = checkIsPending(status);\n  const isFailed = checkIsFailed(status);\n  const sender = getSenderFromMessage(message);\n\n  const tokens = useMemo(() => {\n    return tokenizeMessage({\n      messageText: message.message,\n    });\n  }, [message?.updatedAt]);\n\n  // place conxt menu top depending clientHeight of message component\n  useEffect(() => {\n    if (messageComponentRef?.current?.clientHeight > 36) {\n      setContextStyle({ top: '8px ' });\n    } else {\n      setContextStyle({ top: '2px' });\n    }\n  }, [window.innerWidth]);\n\n  if (!message || message.messageType !== 'user') {\n    return <></>;\n  }\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-openchannel-og-message',\n      ].join(' ')}\n      ref={messageComponentRef}\n      {...(isMobile ? { ...onLongPress } : {})}\n    >\n      <div\n        className=\"sendbird-openchannel-og-message__top\"\n      >\n        <div className=\"sendbird-openchannel-og-message__top__left\">\n          {\n            !chainTop && (\n              <ContextMenu\n                menuTrigger={(toggleDropdown) => (\n                  <Avatar\n                    className=\"sendbird-openchannel-og-message__top__left__avatar\"\n                    src={sender.profileUrl || ''}\n                    ref={avatarRef}\n                    width=\"28px\"\n                    height=\"28px\"\n                    onClick={() => {\n                      if (!disableUserProfile) {\n                        toggleDropdown();\n                      }\n                    }}\n                  />\n                )}\n                menuItems={(closeDropdown) => (\n                  <MenuItems\n                    parentRef={avatarRef}\n                    parentContainRef={avatarRef}\n                    closeDropdown={closeDropdown}\n                    style={{ paddingTop: '0px', paddingBottom: '0px' }}\n                  >\n                    {\n                      renderUserProfile\n                        ? (\n                          renderUserProfile({\n                            user: sender,\n                            close: closeDropdown,\n                          })\n                        )\n                        : (\n                          <UserProfile\n                            user={sender}\n                            onSuccess={closeDropdown}\n                            disableMessaging\n                          />\n                        )\n                    }\n                  </MenuItems>\n                )}\n              />\n            )\n          }\n        </div>\n        <div className=\"sendbird-openchannel-og-message__top__right\">\n          {\n            !chainTop && (\n              <div className=\"sendbird-openchannel-og-message__top__right__title\">\n                <Label\n                  className=\"sendbird-openchannel-og-message__top__right__title__sender-name\"\n                  type={LabelTypography.CAPTION_2}\n                  color={isOperator ? LabelColors.SECONDARY_3 : LabelColors.ONBACKGROUND_2}\n                >\n                  {\n                    sender && (\n                      sender.friendName\n                      || sender.nickname\n                      || sender.userId\n                    )\n                  }\n                </Label>\n                <Label\n                  className=\"sendbird-openchannel-og-message__top__right__title__sent-at\"\n                  type={LabelTypography.CAPTION_3}\n                  color={LabelColors.ONBACKGROUND_3}\n                >\n                  {\n                    message?.createdAt && (\n                      format(message?.createdAt, 'p', {\n                        locale: dateLocale,\n                      })\n                    )\n                  }\n                </Label>\n              </div>\n            )\n          }\n          <div className=\"sendbird-openchannel-og-message__top__right__description\">\n            <Label\n              className=\"sendbird-openchannel-og-message__top__right__description__message\"\n              type={LabelTypography.BODY_1}\n              color={LabelColors.ONBACKGROUND_1}\n            >\n              <TextFragment tokens={tokens} />\n              {\n                ((message?.updatedAt ?? 0) > 0) && (\n                  <Label\n                    key={uuidv4()}\n                    className='sendbird-openchannel-og-message--word'\n                    type={LabelTypography.BODY_1}\n                    color={LabelColors.ONBACKGROUND_2}\n                  >\n                    {stringSet.MESSAGE_EDITED}\n                  </Label>\n                )\n              }\n            </Label>\n          </div>\n        </div>\n        {\n          !isMobile && (\n            <div\n              className=\"sendbird-openchannel-og-message__top__context-menu\"\n              ref={contextMenuRef}\n              style={contextStyle}\n            >\n              <ContextMenu\n                menuTrigger={(toggleDropdown) => (\n                  showMenuTrigger({ message: message, userId: userId, status: status }) && (\n                    <IconButton\n                      className=\"sendbird-openchannel-og-message__top__context-menu--icon\"\n                      width=\"32px\"\n                      height=\"32px\"\n                      onClick={() => {\n                        toggleDropdown();\n                      }}\n                    >\n                      <Icon\n                        type={IconTypes.MORE}\n                        fillColor={IconColors.CONTENT_INVERSE}\n                        width=\"24px\"\n                        height=\"24px\"\n                      />\n                    </IconButton>\n                  )\n                )}\n                menuItems={(closeDropdown) => (\n                  <MenuItems\n                    parentRef={contextMenuRef}\n                    parentContainRef={contextMenuRef}\n                    closeDropdown={closeDropdown}\n                    openLeft\n                  >\n                    {\n                      isFineCopy({ message, userId, status }) && (\n                        <MenuItem\n                          className=\"sendbird-openchannel-og-message__top__context-menu__copy\"\n                          onClick={() => {\n                            copyToClipboard(message.message);\n                            closeDropdown();\n                          }}\n                          dataSbId=\"open_channel_og_message_menu_copy\"\n                        >\n                          {stringSet.CONTEXT_MENU_DROPDOWN__COPY}\n                        </MenuItem>\n                      )\n                    }\n                    {\n                      (!isEphemeral && isFineEdit({ message, userId, status })) && (\n                        <MenuItem\n                          className=\"sendbird-openchannel-og-message__top__context-menu__edit\"\n                          onClick={() => {\n                            if (disabled) {\n                              return;\n                            }\n                            showEdit(true);\n                            closeDropdown();\n                          }}\n                          dataSbId=\"open_channel_og_message_menu_edit\"\n                        >\n                          {stringSet.CONTEXT_MENU_DROPDOWN__EDIT}\n                        </MenuItem>\n                      )\n                    }\n                    {\n                      isFineResend({ message, userId, status }) && (\n                        <MenuItem\n                          className=\"sendbird-openchannel-og-message__top__context-menu__resend\"\n                          onClick={() => {\n                            resendMessage(message);\n                            closeDropdown();\n                          }}\n                          dataSbId=\"open_channel_og_message_menu_resend\"\n                        >\n                          {stringSet.CONTEXT_MENU_DROPDOWN__RESEND}\n                        </MenuItem>\n                      )\n                    }\n                    {\n                      (!isEphemeral && isFineDelete({ message, userId, status })) && (\n                        <MenuItem\n                          className=\"sendbird-openchannel-og-message__top__context-menu__delete\"\n                          onClick={() => {\n                            if (disabled) {\n                              return;\n                            }\n                            showRemove(true);\n                            closeDropdown();\n                          }}\n                          dataSbId=\"open_channel_og_message_menu_delete\"\n                        >\n                          {stringSet.CONTEXT_MENU_DROPDOWN__DELETE}\n                        </MenuItem>\n                      )\n                    }\n                  </MenuItems>\n                )}\n              />\n            </div>\n          )\n        }\n      </div>\n      <div className=\"sendbird-openchannel-og-message__bottom\">\n        <div className=\"sendbird-openchannel-og-message__bottom__og-tag\" ref={mobileMenuRef}>\n          {\n            ogMetaData.url && (\n              <Label\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__url\"\n                type={LabelTypography.CAPTION_3}\n                color={LabelColors.ONBACKGROUND_2}\n              >\n                {ogMetaData.url}\n              </Label>\n            )\n          }\n          {\n            ogMetaData.title && (\n              <LinkLabel\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__title\"\n                src={ogMetaData.url}\n                type={LabelTypography.SUBTITLE_2}\n                color={LabelColors.PRIMARY}\n              >\n                {\n                  ogMetaData.title\n                }\n              </LinkLabel>\n            )\n          }\n          {\n            ogMetaData.description && (\n              <Label\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__description\"\n                type={LabelTypography.BODY_2}\n                color={LabelColors.ONBACKGROUND_1}\n              >\n                {ogMetaData.description}\n              </Label>\n            )\n          }\n          {\n            ogMetaData.url && (\n              <div\n                className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail\"\n                role=\"button\"\n                onClick={openLink}\n                onKeyDown={openLink}\n                tabIndex={0}\n              >\n                {\n                  defaultImage && (\n                    <ImageRenderer\n                      className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image\"\n                      url={defaultImage.url || ''}\n                      alt={defaultImage.alt || ''}\n                      height=\"189px\"\n                      defaultComponent={(\n                        <div className=\"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder\">\n                          <Icon\n                            type={IconTypes.THUMBNAIL_NONE}\n                            width=\"56px\"\n                            height=\"56px\"\n                          />\n                        </div>\n                      )}\n                    />\n                  )\n                }\n              </div>\n            )\n          }\n        </div>\n        {\n          (isPending || isFailed) && (\n            <div className=\"sendbird-openchannel-og-message__top__right__tail\">\n              {\n                isPending && (\n                  <Loader\n                    width=\"16px\"\n                    height=\"16px\"\n                  >\n                    <Icon\n                      className=\"sendbird-openchannel-og-message__top__right__tail__pending\"\n                      type={IconTypes.SPINNER}\n                      fillColor={IconColors.PRIMARY}\n                      width=\"16px\"\n                      height=\"16px\"\n                    />\n                  </Loader>\n                )\n              }\n              {\n                isFailed && (\n                  <Icon\n                    className=\"sendbird-openchannel-og-message__top__right__tail__failed\"\n                    type={IconTypes.ERROR}\n                    fillColor={IconColors.ERROR}\n                    width=\"16px\"\n                    height=\"16px\"\n                  />\n                )\n              }\n            </div>\n          )\n        }\n      </div>\n      {\n        showContextMenu && (\n          <OpenChannelMobileMenu\n            message={message}\n            parentRef={mobileMenuRef}\n            hideMenu={() => {\n              setShowContextMenu(false);\n            }}\n            showRemove={() => {\n              setShowContextMenu(false);\n              showRemove(true);\n            }}\n            showEdit={() => {\n              setShowContextMenu(false);\n              showEdit(true);\n            }}\n            copyToClipboard={() => {\n              setShowContextMenu(false);\n              copyToClipboard(message?.message);\n            }}\n            resendMessage={() => {\n              setShowContextMenu(false);\n              resendMessage(message);\n            }}\n          />\n        )\n      }\n    </div>\n  );\n}\n"],"names":["checkOGIsEnalbed","message","ogMetaData","url","OpenchannelOGMessage","_ref","_message$ogMetaData","_message$updatedAt","isOperator","isEphemeral","className","disabled","showEdit","showRemove","resendMessage","chainTop","userId","status","sendingStatus","defaultImage","stringSet","dateLocale","useLocalization","isMobile","useMediaQueryContext","disableUserProfile","renderUserProfile","useContext","UserProfileContext","contextStyle","setContextStyle","useState","showContextMenu","setShowContextMenu","openLink","window","open","onLongPress","useLongPress","onClick","delay","messageComponentRef","useRef","contextMenuRef","mobileMenuRef","avatarRef","isPending","checkIsPending","isFailed","checkIsFailed","sender","getSenderFromMessage","tokens","useMemo","tokenizeMessage","messageText","updatedAt","useEffect","_messageComponentRef$","current","clientHeight","top","innerWidth","messageType","React","createElement","Fragment","_extends","Array","isArray","join","ref","_objectSpread","ContextMenu","menuTrigger","toggleDropdown","Avatar","src","profileUrl","width","height","menuItems","closeDropdown","MenuItems","parentRef","parentContainRef","style","paddingTop","paddingBottom","user","close","UserProfile","onSuccess","disableMessaging","Label","type","LabelTypography","CAPTION_2","color","LabelColors","SECONDARY_3","ONBACKGROUND_2","friendName","nickname","CAPTION_3","ONBACKGROUND_3","createdAt","format","locale","BODY_1","ONBACKGROUND_1","TextFragment","key","uuidv4","MESSAGE_EDITED","showMenuTrigger","IconButton","Icon","IconTypes","MORE","fillColor","IconColors","CONTENT_INVERSE","openLeft","isFineCopy","MenuItem","copyToClipboard","dataSbId","CONTEXT_MENU_DROPDOWN__COPY","isFineEdit","CONTEXT_MENU_DROPDOWN__EDIT","isFineResend","CONTEXT_MENU_DROPDOWN__RESEND","isFineDelete","CONTEXT_MENU_DROPDOWN__DELETE","title","LinkLabel","SUBTITLE_2","PRIMARY","description","BODY_2","role","onKeyDown","tabIndex","ImageRenderer","alt","defaultComponent","THUMBNAIL_NONE","Loader","SPINNER","ERROR","OpenChannelMobileMenu","hideMenu"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIO,MAAMA,gBAAgB,GAAIC,OAAoB,IAAc;EACjE,MAAM;AAAEC,IAAAA,UAAAA;AAAW,GAAC,GAAGD,OAAO,CAAA;EAC9B,IAAI,CAACC,UAAU,EAAE;AACf,IAAA,OAAO,KAAK,CAAA;AACd,GAAA;EACA,MAAM;AAAEC,IAAAA,GAAAA;AAAI,GAAC,GAAGD,UAAU,CAAA;EAC1B,IAAI,CAACC,GAAG,EAAE;AACR,IAAA,OAAO,KAAK,CAAA;AACd,GAAA;AACA,EAAA,OAAO,IAAI,CAAA;AACb,CAAC;;ACoCc,SAASC,oBAAoBA,CAAAC,IAAA,EAWD;EAAA,IAAAC,mBAAA,EAAAC,kBAAA,CAAA;EAAA,IAXE;IAC3CN,OAAO;IACPO,UAAU;AACVC,IAAAA,WAAW,GAAG,KAAK;IACnBC,SAAS;IACTC,QAAQ;IACRC,QAAQ;IACRC,UAAU;IACVC,aAAa;IACbC,QAAQ;AACRC,IAAAA,MAAAA;AACyB,GAAC,GAAAX,IAAA,CAAA;EAC1B,MAAMY,MAAM,GAAGhB,OAAO,KAAA,IAAA,IAAPA,OAAO,KAAPA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,OAAO,CAAEiB,aAAa,CAAA;AACrC,EAAA,MAAMhB,UAAU,GAAA,CAAAI,mBAAA,GAAGL,OAAO,CAACC,UAAU,MAAA,IAAA,IAAAI,mBAAA,KAAA,KAAA,CAAA,GAAAA,mBAAA,GAAI,IAAI,CAAA;EAC7C,MAAMa,YAAY,GAAGjB,UAAU,KAAA,IAAA,IAAVA,UAAU,KAAVA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,UAAU,CAAEiB,YAAY,CAAA;EAC7C,MAAM;IAAEC,SAAS;AAAEC,IAAAA,UAAAA;GAAY,GAAGC,mCAAe,EAAE,CAAA;EACnD,MAAM;AAAEC,IAAAA,QAAAA;GAAU,GAAGC,sCAAoB,EAAE,CAAA;EAE3C,MAAM;IAAEC,kBAAkB;AAAEC,IAAAA,iBAAAA;AAAkB,GAAC,GAAGC,gBAAU,CAAqBC,qCAAkB,CAAC,CAAA;EACpG,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGC,cAAQ,CAAC,EAAE,CAAC,CAAA;EACpD,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGF,cAAQ,CAAC,KAAK,CAAC,CAAA;EAE7D,MAAMG,QAAQ,GAAGA,MAAM;AACrB,IAAA,IAAIlC,gBAAgB,CAACC,OAAO,CAAC,IAAIC,UAAU,KAAVA,IAAAA,IAAAA,UAAU,KAAVA,KAAAA,CAAAA,IAAAA,UAAU,CAAEC,GAAG,EAAE;AAChDgC,MAAAA,MAAM,CAACC,IAAI,CAAClC,UAAU,CAACC,GAAG,CAAC,CAAA;AAC7B,KAAA;GACD,CAAA;EAED,MAAMkC,WAAW,GAAGC,yBAAY,CAAC;AAC/BD,IAAAA,WAAW,EAAEA,MAAMJ,kBAAkB,CAAC,IAAI,CAAC;AAC3CM,IAAAA,OAAO,EAAEL,QAAAA;AACX,GAAC,EAAE;AACDM,IAAAA,KAAK,EAAE,GAAA;AACT,GAAC,CAAC,CAAA;AAEF,EAAA,MAAMC,mBAAmB,GAAGC,YAAM,CAAC,IAAI,CAAC,CAAA;AACxC,EAAA,MAAMC,cAAc,GAAGD,YAAM,CAAC,IAAI,CAAC,CAAA;AACnC,EAAA,MAAME,aAAa,GAAGF,YAAM,CAAC,IAAI,CAAC,CAAA;AAClC,EAAA,MAAMG,SAAS,GAAGH,YAAM,CAAC,IAAI,CAAC,CAAA;AAE9B,EAAA,MAAMI,SAAS,GAAGC,oBAAc,CAAC9B,MAAM,CAAC,CAAA;AACxC,EAAA,MAAM+B,QAAQ,GAAGC,mBAAa,CAAChC,MAAM,CAAC,CAAA;AACtC,EAAA,MAAMiC,MAAM,GAAGC,0BAAoB,CAAClD,OAAO,CAAC,CAAA;AAE5C,EAAA,MAAMmD,MAAM,GAAGC,aAAO,CAAC,MAAM;AAC3B,IAAA,OAAOC,wBAAe,CAAC;MACrBC,WAAW,EAAEtD,OAAO,CAACA,OAAAA;AACvB,KAAC,CAAC,CAAA;GACH,EAAE,CAACA,OAAO,KAAPA,IAAAA,IAAAA,OAAO,uBAAPA,OAAO,CAAEuD,SAAS,CAAC,CAAC,CAAA;;AAExB;AACAC,EAAAA,eAAS,CAAC,MAAM;AAAA,IAAA,IAAAC,qBAAA,CAAA;AACd,IAAA,IAAI,CAAAjB,mBAAmB,KAAA,IAAA,IAAnBA,mBAAmB,KAAAiB,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,qBAAA,GAAnBjB,mBAAmB,CAAEkB,OAAO,MAAA,IAAA,IAAAD,qBAAA,KAA5BA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,qBAAA,CAA8BE,YAAY,IAAG,EAAE,EAAE;AACnD9B,MAAAA,eAAe,CAAC;AAAE+B,QAAAA,GAAG,EAAE,MAAA;AAAO,OAAC,CAAC,CAAA;AAClC,KAAC,MAAM;AACL/B,MAAAA,eAAe,CAAC;AAAE+B,QAAAA,GAAG,EAAE,KAAA;AAAM,OAAC,CAAC,CAAA;AACjC,KAAA;AACF,GAAC,EAAE,CAAC1B,MAAM,CAAC2B,UAAU,CAAC,CAAC,CAAA;EAEvB,IAAI,CAAC7D,OAAO,IAAIA,OAAO,CAAC8D,WAAW,KAAK,MAAM,EAAE;AAC9C,IAAA,oBAAOC,yBAAA,CAAAC,aAAA,CAAAD,yBAAA,CAAAE,QAAA,EAAK,IAAA,CAAA,CAAA;AACd,GAAA;AAEA,EAAA,oBACEF,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAAE,kCAAA,CAAA;IACEzD,SAAS,EAAE,CACT,IAAI0D,KAAK,CAACC,OAAO,CAAC3D,SAAS,CAAC,GAAGA,SAAS,GAAG,CAACA,SAAS,CAAC,CAAC,EACvD,iCAAiC,CAClC,CAAC4D,IAAI,CAAC,GAAG,CAAE;AACZC,IAAAA,GAAG,EAAE9B,mBAAAA;GACAlB,EAAAA,QAAQ,GAAAiD,wCAAA,CAAQnC,EAAAA,EAAAA,WAAW,CAAK,GAAA,EAAE,CAAA,eAEvC2B,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACEvD,IAAAA,SAAS,EAAC,sCAAA;GAEVsD,eAAAA,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKvD,IAAAA,SAAS,EAAC,4CAAA;AAA4C,GAAA,EAEvD,CAACK,QAAQ,iBACPiD,yBAAA,CAAAC,aAAA,CAACQ,yBAAW,EAAA;AACVC,IAAAA,WAAW,EAAGC,cAAc,iBAC1BX,yBAAA,CAAAC,aAAA,CAACW,oBAAM,EAAA;AACLlE,MAAAA,SAAS,EAAC,oDAAoD;AAC9DmE,MAAAA,GAAG,EAAE3B,MAAM,CAAC4B,UAAU,IAAI,EAAG;AAC7BP,MAAAA,GAAG,EAAE1B,SAAU;AACfkC,MAAAA,KAAK,EAAC,MAAM;AACZC,MAAAA,MAAM,EAAC,MAAM;MACbzC,OAAO,EAAEA,MAAM;QACb,IAAI,CAACd,kBAAkB,EAAE;AACvBkD,UAAAA,cAAc,EAAE,CAAA;AAClB,SAAA;AACF,OAAA;KAEF,CAAA;AACFM,IAAAA,SAAS,EAAGC,aAAa,iBACvBlB,yBAAA,CAAAC,aAAA,CAACkB,wBAAS,EAAA;AACRC,MAAAA,SAAS,EAAEvC,SAAU;AACrBwC,MAAAA,gBAAgB,EAAExC,SAAU;AAC5BqC,MAAAA,aAAa,EAAEA,aAAc;AAC7BI,MAAAA,KAAK,EAAE;AAAEC,QAAAA,UAAU,EAAE,KAAK;AAAEC,QAAAA,aAAa,EAAE,KAAA;AAAM,OAAA;KAG/C9D,EAAAA,iBAAiB,GAEbA,iBAAiB,CAAC;AAChB+D,MAAAA,IAAI,EAAEvC,MAAM;AACZwC,MAAAA,KAAK,EAAER,aAAAA;AACT,KAAC,CAAC,gBAGFlB,yBAAA,CAAAC,aAAA,CAAC0B,cAAW,EAAA;AACVF,MAAAA,IAAI,EAAEvC,MAAO;AACb0C,MAAAA,SAAS,EAAEV,aAAc;MACzBW,gBAAgB,EAAA,IAAA;KAEnB,CAAA,CAAA;AAGP,GAAA,CAEL,CAEC,eACN7B,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKvD,IAAAA,SAAS,EAAC,6CAAA;AAA6C,GAAA,EAExD,CAACK,QAAQ,iBACPiD,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKvD,IAAAA,SAAS,EAAC,oDAAA;AAAoD,GAAA,eACjEsD,yBAAA,CAAAC,aAAA,CAAC6B,cAAK,EAAA;AACJpF,IAAAA,SAAS,EAAC,iEAAiE;IAC3EqF,IAAI,EAAEC,wBAAe,CAACC,SAAU;IAChCC,KAAK,EAAE1F,UAAU,GAAG2F,oBAAW,CAACC,WAAW,GAAGD,oBAAW,CAACE,cAAAA;GAGxDnD,EAAAA,MAAM,KACJA,MAAM,CAACoD,UAAU,IACdpD,MAAM,CAACqD,QAAQ,IACfrD,MAAM,CAAClC,MAAM,CACjB,CAEG,eACRgD,yBAAA,CAAAC,aAAA,CAAC6B,cAAK,EAAA;AACJpF,IAAAA,SAAS,EAAC,6DAA6D;IACvEqF,IAAI,EAAEC,wBAAe,CAACQ,SAAU;IAChCN,KAAK,EAAEC,oBAAW,CAACM,cAAAA;GAGjB,EAAA,CAAAxG,OAAO,KAAPA,IAAAA,IAAAA,OAAO,uBAAPA,OAAO,CAAEyG,SAAS,KAChBC,cAAM,CAAC1G,OAAO,KAAA,IAAA,IAAPA,OAAO,KAAPA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,OAAO,CAAEyG,SAAS,EAAE,GAAG,EAAE;AAC9BE,IAAAA,MAAM,EAAEvF,UAAAA;AACV,GAAC,CACF,CAEG,CAEX,eAEH2C,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKvD,IAAAA,SAAS,EAAC,0DAAA;AAA0D,GAAA,eACvEsD,yBAAA,CAAAC,aAAA,CAAC6B,cAAK,EAAA;AACJpF,IAAAA,SAAS,EAAC,mEAAmE;IAC7EqF,IAAI,EAAEC,wBAAe,CAACa,MAAO;IAC7BX,KAAK,EAAEC,oBAAW,CAACW,cAAAA;AAAe,GAAA,eAElC9C,yBAAA,CAAAC,aAAA,CAAC8C,oBAAY,EAAA;AAAC3D,IAAAA,MAAM,EAAEA,MAAAA;GAAU,CAAA,EAE7B,CAAA7C,CAAAA,kBAAA,GAACN,OAAO,aAAPA,OAAO,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAPA,OAAO,CAAEuD,SAAS,MAAA,IAAA,IAAAjD,kBAAA,KAAAA,KAAAA,CAAAA,GAAAA,kBAAA,GAAI,CAAC,IAAI,CAAC,iBAC5ByD,yBAAA,CAAAC,aAAA,CAAC6B,cAAK,EAAA;IACJkB,GAAG,EAAEC,WAAM,EAAG;AACdvG,IAAAA,SAAS,EAAC,uCAAuC;IACjDqF,IAAI,EAAEC,wBAAe,CAACa,MAAO;IAC7BX,KAAK,EAAEC,oBAAW,CAACE,cAAAA;AAAe,GAAA,EAEjCjF,SAAS,CAAC8F,cAAc,CAE5B,CAEG,CACJ,CACF,EAEJ,CAAC3F,QAAQ,iBACPyC,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACEvD,IAAAA,SAAS,EAAC,oDAAoD;AAC9D6D,IAAAA,GAAG,EAAE5B,cAAe;AACpB2C,IAAAA,KAAK,EAAEzD,YAAAA;AAAa,GAAA,eAEpBmC,yBAAA,CAAAC,aAAA,CAACQ,yBAAW,EAAA;AACVC,IAAAA,WAAW,EAAGC,cAAc,IAC1BwC,qBAAe,CAAC;AAAElH,MAAAA,OAAO,EAAEA,OAAO;AAAEe,MAAAA,MAAM,EAAEA,MAAM;AAAEC,MAAAA,MAAM,EAAEA,MAAAA;AAAO,KAAC,CAAC,iBACnE+C,yBAAA,CAAAC,aAAA,CAACmD,aAAU,EAAA;AACT1G,MAAAA,SAAS,EAAC,0DAA0D;AACpEqE,MAAAA,KAAK,EAAC,MAAM;AACZC,MAAAA,MAAM,EAAC,MAAM;MACbzC,OAAO,EAAEA,MAAM;AACboC,QAAAA,cAAc,EAAE,CAAA;AAClB,OAAA;AAAE,KAAA,eAEFX,yBAAA,CAAAC,aAAA,CAACoD,kBAAI,EAAA;MACHtB,IAAI,EAAEuB,iBAAS,CAACC,IAAK;MACrBC,SAAS,EAAEC,kBAAU,CAACC,eAAgB;AACtC3C,MAAAA,KAAK,EAAC,MAAM;AACZC,MAAAA,MAAM,EAAC,MAAA;AAAM,KAAA,CACb,CAGN;AACFC,IAAAA,SAAS,EAAGC,aAAa,iBACvBlB,yBAAA,CAAAC,aAAA,CAACkB,wBAAS,EAAA;AACRC,MAAAA,SAAS,EAAEzC,cAAe;AAC1B0C,MAAAA,gBAAgB,EAAE1C,cAAe;AACjCuC,MAAAA,aAAa,EAAEA,aAAc;MAC7ByC,QAAQ,EAAA,IAAA;AAAA,KAAA,EAGNC,gBAAU,CAAC;MAAE3H,OAAO;MAAEe,MAAM;AAAEC,MAAAA,MAAAA;AAAO,KAAC,CAAC,iBACrC+C,yBAAA,CAAAC,aAAA,CAAC4D,uBAAQ,EAAA;AACPnH,MAAAA,SAAS,EAAC,0DAA0D;MACpE6B,OAAO,EAAEA,MAAM;AACbuF,QAAAA,qBAAe,CAAC7H,OAAO,CAACA,OAAO,CAAC,CAAA;AAChCiF,QAAAA,aAAa,EAAE,CAAA;OACf;AACF6C,MAAAA,QAAQ,EAAC,mCAAA;KAER3G,EAAAA,SAAS,CAAC4G,2BAA2B,CAEzC,EAGA,CAACvH,WAAW,IAAIwH,gBAAU,CAAC;MAAEhI,OAAO;MAAEe,MAAM;AAAEC,MAAAA,MAAAA;AAAO,KAAC,CAAC,iBACtD+C,yBAAA,CAAAC,aAAA,CAAC4D,uBAAQ,EAAA;AACPnH,MAAAA,SAAS,EAAC,0DAA0D;MACpE6B,OAAO,EAAEA,MAAM;AACb,QAAA,IAAI5B,QAAQ,EAAE;AACZ,UAAA,OAAA;AACF,SAAA;QACAC,QAAQ,CAAC,IAAI,CAAC,CAAA;AACdsE,QAAAA,aAAa,EAAE,CAAA;OACf;AACF6C,MAAAA,QAAQ,EAAC,mCAAA;AAAmC,KAAA,EAE3C3G,SAAS,CAAC8G,2BAA2B,CAEzC,EAGDC,kBAAY,CAAC;MAAElI,OAAO;MAAEe,MAAM;AAAEC,MAAAA,MAAAA;AAAO,KAAC,CAAC,iBACvC+C,yBAAA,CAAAC,aAAA,CAAC4D,uBAAQ,EAAA;AACPnH,MAAAA,SAAS,EAAC,4DAA4D;MACtE6B,OAAO,EAAEA,MAAM;QACbzB,aAAa,CAACb,OAAO,CAAC,CAAA;AACtBiF,QAAAA,aAAa,EAAE,CAAA;OACf;AACF6C,MAAAA,QAAQ,EAAC,qCAAA;KAER3G,EAAAA,SAAS,CAACgH,6BAA6B,CAE3C,EAGA,CAAC3H,WAAW,IAAI4H,kBAAY,CAAC;MAAEpI,OAAO;MAAEe,MAAM;AAAEC,MAAAA,MAAAA;AAAO,KAAC,CAAC,iBACxD+C,yBAAA,CAAAC,aAAA,CAAC4D,uBAAQ,EAAA;AACPnH,MAAAA,SAAS,EAAC,4DAA4D;MACtE6B,OAAO,EAAEA,MAAM;AACb,QAAA,IAAI5B,QAAQ,EAAE;AACZ,UAAA,OAAA;AACF,SAAA;QACAE,UAAU,CAAC,IAAI,CAAC,CAAA;AAChBqE,QAAAA,aAAa,EAAE,CAAA;OACf;AACF6C,MAAAA,QAAQ,EAAC,qCAAA;KAER3G,EAAAA,SAAS,CAACkH,6BAA6B,CAE3C,CAAA;AAGL,GAAA,CACF,CAEL,CAEC,eACNtE,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKvD,IAAAA,SAAS,EAAC,yCAAA;GACbsD,eAAAA,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKvD,IAAAA,SAAS,EAAC,iDAAiD;AAAC6D,IAAAA,GAAG,EAAE3B,aAAAA;GAElE1C,EAAAA,UAAU,CAACC,GAAG,iBACZ6D,yBAAA,CAAAC,aAAA,CAAC6B,cAAK,EAAA;AACJpF,IAAAA,SAAS,EAAC,sDAAsD;IAChEqF,IAAI,EAAEC,wBAAe,CAACQ,SAAU;IAChCN,KAAK,EAAEC,oBAAW,CAACE,cAAAA;AAAe,GAAA,EAEjCnG,UAAU,CAACC,GAAG,CAElB,EAGDD,UAAU,CAACqI,KAAK,iBACdvE,yBAAA,CAAAC,aAAA,CAACuE,uBAAS,EAAA;AACR9H,IAAAA,SAAS,EAAC,wDAAwD;IAClEmE,GAAG,EAAE3E,UAAU,CAACC,GAAI;IACpB4F,IAAI,EAAEC,wBAAe,CAACyC,UAAW;IACjCvC,KAAK,EAAEC,oBAAW,CAACuC,OAAAA;AAAQ,GAAA,EAGzBxI,UAAU,CAACqI,KAAK,CAGrB,EAGDrI,UAAU,CAACyI,WAAW,iBACpB3E,yBAAA,CAAAC,aAAA,CAAC6B,cAAK,EAAA;AACJpF,IAAAA,SAAS,EAAC,8DAA8D;IACxEqF,IAAI,EAAEC,wBAAe,CAAC4C,MAAO;IAC7B1C,KAAK,EAAEC,oBAAW,CAACW,cAAAA;GAElB5G,EAAAA,UAAU,CAACyI,WAAW,CAE1B,EAGDzI,UAAU,CAACC,GAAG,iBACZ6D,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AACEvD,IAAAA,SAAS,EAAC,4DAA4D;AACtEmI,IAAAA,IAAI,EAAC,QAAQ;AACbtG,IAAAA,OAAO,EAAEL,QAAS;AAClB4G,IAAAA,SAAS,EAAE5G,QAAS;AACpB6G,IAAAA,QAAQ,EAAE,CAAA;AAAE,GAAA,EAGV5H,YAAY,iBACV6C,yBAAA,CAAAC,aAAA,CAAC+E,gBAAa,EAAA;AACZtI,IAAAA,SAAS,EAAC,mEAAmE;AAC7EP,IAAAA,GAAG,EAAEgB,YAAY,CAAChB,GAAG,IAAI,EAAG;AAC5B8I,IAAAA,GAAG,EAAE9H,YAAY,CAAC8H,GAAG,IAAI,EAAG;AAC5BjE,IAAAA,MAAM,EAAC,OAAO;IACdkE,gBAAgB,eACdlF,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKvD,MAAAA,SAAS,EAAC,gFAAA;AAAgF,KAAA,eAC7FsD,yBAAA,CAAAC,aAAA,CAACoD,kBAAI,EAAA;MACHtB,IAAI,EAAEuB,iBAAS,CAAC6B,cAAe;AAC/BpE,MAAAA,KAAK,EAAC,MAAM;AACZC,MAAAA,MAAM,EAAC,MAAA;KACP,CAAA,CAAA;GAIT,CAAA,CAGN,CAEC,EAEJ,CAAClC,SAAS,IAAIE,QAAQ,kBACpBgB,yBAAA,CAAAC,aAAA,CAAA,KAAA,EAAA;AAAKvD,IAAAA,SAAS,EAAC,mDAAA;AAAmD,GAAA,EAE9DoC,SAAS,iBACPkB,yBAAA,CAAAC,aAAA,CAACmF,SAAM,EAAA;AACLrE,IAAAA,KAAK,EAAC,MAAM;AACZC,IAAAA,MAAM,EAAC,MAAA;AAAM,GAAA,eAEbhB,yBAAA,CAAAC,aAAA,CAACoD,kBAAI,EAAA;AACH3G,IAAAA,SAAS,EAAC,4DAA4D;IACtEqF,IAAI,EAAEuB,iBAAS,CAAC+B,OAAQ;IACxB7B,SAAS,EAAEC,kBAAU,CAACiB,OAAQ;AAC9B3D,IAAAA,KAAK,EAAC,MAAM;AACZC,IAAAA,MAAM,EAAC,MAAA;GACP,CAAA,CAEL,EAGDhC,QAAQ,iBACNgB,yBAAA,CAAAC,aAAA,CAACoD,kBAAI,EAAA;AACH3G,IAAAA,SAAS,EAAC,2DAA2D;IACrEqF,IAAI,EAAEuB,iBAAS,CAACgC,KAAM;IACtB9B,SAAS,EAAEC,kBAAU,CAAC6B,KAAM;AAC5BvE,IAAAA,KAAK,EAAC,MAAM;AACZC,IAAAA,MAAM,EAAC,MAAA;GAEV,CAAA,CAGN,CAEC,EAEJhD,eAAe,iBACbgC,yBAAA,CAAAC,aAAA,CAACsF,2BAAqB,EAAA;AACpBtJ,IAAAA,OAAO,EAAEA,OAAQ;AACjBmF,IAAAA,SAAS,EAAExC,aAAc;IACzB4G,QAAQ,EAAEA,MAAM;MACdvH,kBAAkB,CAAC,KAAK,CAAC,CAAA;KACzB;IACFpB,UAAU,EAAEA,MAAM;MAChBoB,kBAAkB,CAAC,KAAK,CAAC,CAAA;MACzBpB,UAAU,CAAC,IAAI,CAAC,CAAA;KAChB;IACFD,QAAQ,EAAEA,MAAM;MACdqB,kBAAkB,CAAC,KAAK,CAAC,CAAA;MACzBrB,QAAQ,CAAC,IAAI,CAAC,CAAA;KACd;IACFkH,eAAe,EAAEA,MAAM;MACrB7F,kBAAkB,CAAC,KAAK,CAAC,CAAA;MACzB6F,qBAAe,CAAC7H,OAAO,KAAPA,IAAAA,IAAAA,OAAO,uBAAPA,OAAO,CAAEA,OAAO,CAAC,CAAA;KACjC;IACFa,aAAa,EAAEA,MAAM;MACnBmB,kBAAkB,CAAC,KAAK,CAAC,CAAA;MACzBnB,aAAa,CAACb,OAAO,CAAC,CAAA;AACxB,KAAA;AAAE,GAAA,CAEL,CAEC,CAAA;AAEV;;;;"}