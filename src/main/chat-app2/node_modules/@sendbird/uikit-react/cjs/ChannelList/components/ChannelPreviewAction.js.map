{"version":3,"file":"ChannelPreviewAction.js","sources":["../../../../src/modules/ChannelList/components/LeaveChannel/index.tsx","../../../../src/modules/ChannelList/components/ChannelPreviewAction.jsx"],"sourcesContent":["import React from 'react';\n\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { noop } from '../../../../utils/utils';\n\nimport Modal from '../../../../ui/Modal';\nimport { useChannelListContext } from '../../context/ChannelListProvider';\nimport { useLocalization } from '../../../../lib/LocalizationContext';\nimport { GroupChannel } from '@sendbird/chat/groupChannel';\n\nexport type LeaveChannelProps = {\n  channel?: GroupChannel;\n  onSubmit: () => void;\n  onCancel: () => void;\n};\n\nconst LeaveChannel: React.FC<LeaveChannelProps> = (props: LeaveChannelProps) => {\n  const {\n    channel = null,\n    onSubmit = noop,\n    onCancel = noop,\n  } = props;\n\n  const channelFromContext = useChannelListContext()?.currentChannel;\n  const leavingChannel = channel || channelFromContext;\n  const state = useSendbirdStateContext();\n  const { stringSet } = useLocalization();\n\n  const logger = state?.config?.logger;\n  const isOnline = state?.config?.isOnline;\n  if (leavingChannel) {\n    return (\n      <Modal\n        disabled={!isOnline}\n        onCancel={onCancel}\n        onSubmit={() => {\n          logger.info('ChannelSettings: Leaving channel', leavingChannel);\n          leavingChannel?.leave()\n            .then(() => {\n              logger.info('ChannelSettings: Leaving channel successful!', leavingChannel);\n              onSubmit();\n            });\n        }}\n        submitText={stringSet.MODAL__LEAVE_CHANNEL__FOOTER}\n        titleText={stringSet.MODAL__LEAVE_CHANNEL__TITLE}\n      />\n    );\n  }\n};\n\nexport default LeaveChannel;\n","import React, {\n  useState,\n  useRef,\n  useContext,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LocalizationContext } from '../../../lib/LocalizationContext';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../ui/ContextMenu';\nimport IconButton from '../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../ui/Icon';\nimport LeaveChannelModal from './LeaveChannel';\n\nexport default function ChannelPreviewAction({\n  channel,\n  disabled,\n  onLeaveChannel,\n}) {\n  const parentRef = useRef(null);\n  const parentContainerRef = useRef(null);\n  const [showModal, setShowModal] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <div\n      role=\"button\"\n      style={{ display: 'inline-block' }}\n      onKeyDown={(e) => { e.stopPropagation(); }}\n      tabIndex={0}\n      onClick={(e) => { e.stopPropagation(); }}\n      ref={parentContainerRef}\n    >\n      <ContextMenu\n      /* eslint-disable react/no-unstable-nested-components */\n        menuTrigger={(toggleDropdown) => (\n          <IconButton\n            ref={parentRef}\n            onClick={toggleDropdown}\n            height=\"32px\"\n            width=\"32px\"\n          >\n            <Icon\n              type={IconTypes.MORE}\n              fillColor={IconColors.PRIMARY}\n              width=\"24px\"\n              height=\"24px\"\n            />\n          </IconButton>\n        )}\n        /* eslint-disable react/no-unstable-nested-components */\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            parentRef={parentRef}\n            parentContainRef={parentContainerRef}\n            closeDropdown={closeDropdown}\n          >\n            <MenuItem\n              onClick={() => {\n                if (disabled) { return; }\n                setShowModal(true);\n                closeDropdown();\n              }}\n              dataSbId=\"channel_list_item_context_menu_leave_channel\"\n            >\n              {stringSet.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE}\n            </MenuItem>\n          </MenuItems>\n        )}\n      />\n      {\n        showModal && (\n          <LeaveChannelModal\n            channel={channel}\n            onSubmit={() => {\n              setShowModal(false);\n              onLeaveChannel();\n            }}\n            onCancel={() => setShowModal(false)}\n          />\n        )\n      }\n    </div>\n  );\n}\n\nChannelPreviewAction.propTypes = {\n  disabled: PropTypes.bool,\n  onLeaveChannel: PropTypes.func.isRequired,\n  channel: PropTypes.shape({}),\n};\n\nChannelPreviewAction.defaultProps = {\n  disabled: false,\n  channel: null,\n};\n"],"names":["LeaveChannel","props","_useChannelListContex","_state$config","_state$config2","channel","onSubmit","noop","onCancel","channelFromContext","useChannelListContext","currentChannel","leavingChannel","state","useSendbirdStateContext","stringSet","useLocalization","logger","config","isOnline","React","createElement","Modal","disabled","info","leave","then","submitText","MODAL__LEAVE_CHANNEL__FOOTER","titleText","MODAL__LEAVE_CHANNEL__TITLE","ChannelPreviewAction","_ref","onLeaveChannel","parentRef","useRef","parentContainerRef","showModal","setShowModal","useState","useContext","LocalizationContext","role","style","display","onKeyDown","e","stopPropagation","tabIndex","onClick","ref","ContextMenu","menuTrigger","toggleDropdown","IconButton","height","width","Icon","type","IconTypes","MORE","fillColor","IconColors","PRIMARY","menuItems","closeDropdown","MenuItems","parentContainRef","MenuItem","dataSbId","CHANNEL_SETTING__LEAVE_CHANNEL__TITLE","LeaveChannelModal","propTypes","PropTypes","bool","func","isRequired","shape","defaultProps"],"mappings":"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"}