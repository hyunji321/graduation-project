{"version":3,"file":"LeaveChannel.js","sources":["../../../../src/modules/ChannelSettings/components/LeaveChannel/index.tsx"],"sourcesContent":["import './leave-channel.scss';\n\nimport React from 'react';\nimport type { GroupChannel } from '@sendbird/chat/groupChannel';\n\nimport useSendbirdStateContext from '../../../../hooks/useSendbirdStateContext';\nimport { useChannelSettingsContext } from '../../context/ChannelSettingsProvider';\nimport { noop } from '../../../../utils/utils';\n\nimport Modal from '../../../../ui/Modal';\nimport { useLocalization } from '../../../../lib/LocalizationContext';\nimport { useMediaQueryContext } from '../../../../lib/MediaQueryContext';\nimport TextButton from '../../../../ui/TextButton';\nimport Label, {\n  LabelTypography,\n  LabelColors,\n} from '../../../../ui/Label';\n\nexport type LeaveChannelProps = {\n  onSubmit: () => void;\n  onCancel: () => void;\n};\n\nconst LeaveChannel: React.FC<LeaveChannelProps> = (props: LeaveChannelProps) => {\n  const {\n    onSubmit = noop,\n    onCancel = noop,\n  } = props;\n\n  const { channel, onLeaveChannel } = useChannelSettingsContext();\n  const { stringSet } = useLocalization();\n  const state = useSendbirdStateContext();\n  const logger = state?.config?.logger;\n  const isOnline = state?.config?.isOnline;\n  const { isMobile } = useMediaQueryContext();\n  const getChannelName = (channel: GroupChannel) => {\n    if (channel?.name && channel?.name !== 'Group Channel') {\n      return channel.name;\n    }\n    if (channel?.name === 'Group Channel' || !channel?.name) {\n      return (channel?.members || []).map((member) => member.nickname || stringSet.NO_NAME).join(', ');\n    }\n\n    return stringSet.NO_TITLE;\n  };\n  if (isMobile) {\n    return (\n      <Modal\n        className=\"sendbird-channel-settings__leave--mobile\"\n        titleText={getChannelName(channel)}\n        hideFooter\n        isCloseOnClickOutside\n        onCancel={onCancel}\n      >\n        <TextButton\n          onClick={() => {\n            logger.info('ChannelSettings: Leaving channel', channel);\n            channel?.leave()\n              .then(() => {\n                logger.info('ChannelSettings: Leaving channel successful!', channel);\n                onLeaveChannel();\n              });\n          }}\n          className=\"sendbird-channel-settings__leave-label--mobile\"\n        >\n          <Label\n            type={LabelTypography.SUBTITLE_1}\n            color={LabelColors.ONBACKGROUND_1}\n          >\n            {stringSet.CHANNEL_PREVIEW_MOBILE_LEAVE}\n          </Label>\n        </TextButton>\n      </Modal>\n    );\n  }\n  return (\n    <Modal\n      isFullScreenOnMobile\n      disabled={!isOnline}\n      onCancel={onCancel}\n      onSubmit={() => {\n        logger.info('ChannelSettings: Leaving channel', channel);\n        channel?.leave()\n          .then(() => {\n            logger.info('ChannelSettings: Leaving channel successful!', channel);\n            // is for backward compactability\n            if (onLeaveChannel) {\n              onLeaveChannel();\n            } else {\n              onSubmit();\n            }\n          });\n      }}\n      submitText={stringSet.MODAL__LEAVE_CHANNEL__FOOTER}\n      titleText={stringSet.MODAL__LEAVE_CHANNEL__TITLE}\n    />\n  );\n};\n\nexport default LeaveChannel;\n"],"names":["LeaveChannel","props","_state$config","_state$config2","onSubmit","noop","onCancel","channel","onLeaveChannel","useChannelSettingsContext","stringSet","useLocalization","state","useSendbirdStateContext","logger","config","isOnline","isMobile","useMediaQueryContext","getChannelName","name","members","map","member","nickname","NO_NAME","join","NO_TITLE","React","createElement","Modal","className","titleText","hideFooter","isCloseOnClickOutside","TextButton","onClick","info","leave","then","Label","type","LabelTypography","SUBTITLE_1","color","LabelColors","ONBACKGROUND_1","CHANNEL_PREVIEW_MOBILE_LEAVE","isFullScreenOnMobile","disabled","submitText","MODAL__LEAVE_CHANNEL__FOOTER","MODAL__LEAVE_CHANNEL__TITLE"],"mappings":"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"}