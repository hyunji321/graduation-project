{"version":3,"file":"sendbirdSelectors.js","sources":["../../src/lib/selectors.ts"],"sourcesContent":["import topics from './pubSub/topics';\nimport type {\n  User,\n  UserUpdateParams,\n} from '@sendbird/chat';\n\nimport { FailedMessageHandler, MessageHandler, UserMessage, UserMessageCreateParams } from '@sendbird/chat/message';\nimport { GroupChannel, GroupChannelCreateParams, SendbirdGroupChat } from '@sendbird/chat/groupChannel';\nimport { OpenChannel, OpenChannelCreateParams, SendbirdOpenChat } from '@sendbird/chat/openChannel';\nimport { FileMessage, FileMessageCreateParams, SendableMessage, UserMessageUpdateParams } from '@sendbird/chat/lib/__definition';\n\nimport {\n  SdkStore,\n  SendBirdState,\n  SendBirdStateConfig,\n  SendBirdStateStore,\n} from './types';\nimport { noop } from '../utils/utils';\n\n/**\n * 1. UIKit Instances\n *    a. getSdk\n *    b. getPubSub\n * 2. Chat & Connection\n *    a. getConnect\n *    b. getDisconnect\n *    c. getUpdateUserInfo\n * 3. Channel\n *    a. getCreateGroupChannel\n *    b. getCreateOpenChannel\n *    c. getGetGroupChannel\n *    d. getGetOpenChannel\n *    e. getLeaveGroupChannel\n *    f. getEnterOpenChannel\n *    g. getExitOpenChannel\n *    h. getFreezeChannel\n *    i. getUnfreezeChannel\n * 4. Message\n *    a. getSendUserMessage\n *    b. getSendFileMessage\n *    c. getUpdateUserMessage\n *    d. x - getUpdateFileMessage\n *    e. getDeleteMessage\n *    f. getResendUserMessage\n *    g. getResendFileMessage\n */\n\n/**\n * import useSendbirdStateContext from '@sendbird-uikit/useSendbirdStateContext'\n * import selectors from '@sendbird-uikit/send'\n * const state = useSendbirdStateContext();\n */\n\n// 1. UIKit Instances\n\n/**\n * const sdk = selectors.getSdk(state);\n */\nexport const getSdk = (state: SendBirdState): SendbirdGroupChat & SendbirdOpenChat => {\n  const { stores = {} } = state;\n  const { sdkStore = {} } = stores as SendBirdStateStore;\n  const { sdk } = sdkStore as SdkStore;\n  return sdk;\n};\n\n/**\n * const pubSub = selectors.getPubSub(state);\n */\nexport const getPubSub = (state: SendBirdState): any => {\n  const { config = {} } = state;\n  const { pubSub } = config as SendBirdStateConfig;\n  return pubSub;\n};\n\n// 2. Chat & Connection\n\n/**\n * const connect = selectors.getConnect(state);\n * connect('user-id-sendbirdian', 'access-token-0000')\n *  .then((user) => {})\n *  .catch((error) => {})\n */\nexport const getConnect = (state: SendBirdState) => (\n  (userId: string, accessToken?: string): Promise<User> => (\n    new Promise((resolve, reject) => {\n      const sdk = getSdk(state);\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n      if (!(sdk?.connect && typeof sdk.connect === 'function')) {\n        reject(new Error('Not found the function \"connect'));\n      }\n      if (!accessToken) {\n        sdk.connect(userId)\n          .then((res) => resolve(res))\n          .catch((err) => reject(err));\n      } else {\n        sdk.connect(userId, accessToken)\n          .then((res) => resolve(res))\n          .catch((err) => reject(err));\n      }\n    })\n  )\n);\n\n/**\n * const disconnect = selectors.getDisconnect(state);\n * disconnect()\n *  .then(() => {})\n *  .catch((error) => {})\n */\nexport const getDisconnect = (state: SendBirdState) => (\n  (): Promise<void> => (\n    new Promise((resolve, reject) => {\n      const sdk = getSdk(state);\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n      if (!(sdk.disconnect && typeof sdk.disconnect === 'function')) {\n        reject(new Error('Not found the function \"disconnect'));\n      }\n      sdk.disconnect()\n        .then((res) => resolve(res))\n        .catch((err) => reject(err));\n    })\n  )\n);\n\n/**\n * const updateUserInfo = selectors.getUpdateUserInfo(state);\n * updateUserInfo('new-nickname', 'new-profile-url')\n *  .then((user) => {})\n *  .catch((error) => {})\n */\nexport const getUpdateUserInfo = (state: SendBirdState) => (\n  (nickname: string, profileUrl?: string): Promise<User> => (\n    new Promise((resolve, reject) => {\n      const sdk = getSdk(state);\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n      if (!(sdk.updateCurrentUserInfo && typeof sdk.updateCurrentUserInfo === 'function')) {\n        reject(new Error('Not found the function \"updateCurrentUserInfo\"'));\n      }\n      const userParams: UserUpdateParams = { nickname };\n      if (profileUrl) {\n        userParams.profileUrl = profileUrl;\n      }\n      sdk.updateCurrentUserInfo(userParams)\n        .then((res) => resolve(res))\n        .catch((err) => reject(err));\n    })\n  )\n);\n\n// 3. Channel\n\n/**\n * const createGroupChannel = selectors.getCreateGroupChannel(state);\n * createGroupChannel(channelParams: GroupChannelCreateParams)\n *  .then((channel) => {})\n *  .catch((error) => {})\n */\nexport const getCreateGroupChannel = (state: SendBirdState) => (\n  (params: GroupChannelCreateParams): Promise<GroupChannel> => (\n    new Promise((resolve, reject) => {\n      const sdk = getSdk(state);\n      const pubSub = getPubSub(state);\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n      if (!sdk.groupChannel) {\n        reject(new Error('Not found GroupChannelModule'));\n      }\n      if (!(sdk.groupChannel.createChannel && typeof sdk.groupChannel.createChannel === 'function')) {\n        reject(new Error('Not found the function \"createChannel\"'));\n      }\n      sdk.groupChannel.createChannel(params)\n        .then((channel) => {\n          resolve(channel);\n          pubSub.publish(\n            topics.CREATE_CHANNEL,\n            { channel },\n          );\n        })\n        .catch(reject);\n    })\n  )\n);\n\n/**\n * const createOpenChannel = selectors.getCreateOpenChannel(state);\n * createOpenChannel(channelParams: OpenChannelCreateParams)\n *  .then((channel) => {})\n *  .catch((error) => {})\n */\nexport const getCreateOpenChannel = (state: SendBirdState) => (\n  (params: OpenChannelCreateParams): Promise<OpenChannel> => (\n    new Promise((resolve, reject) => {\n      const sdk = getSdk(state);\n      // const pubSub = getPubSub(state);\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n      if (!sdk.openChannel) {\n        reject(new Error('Not found OpenChannelModule'));\n      }\n      if (!(sdk.openChannel.createChannel && typeof sdk.openChannel.createChannel === 'function')) {\n        reject(new Error('Not found the function \"createChannel\"'));\n      }\n      sdk.openChannel.createChannel(params)\n        .then((channel) => {\n          resolve(channel);\n          // Consider pubSub process\n        })\n        .catch(reject);\n    })\n  )\n);\n\n/**\n * const getGroupChannel = selectors.getGetGroupChannel(state);\n * getGroupChannel('channel-url-1234', isSelected)\n *  .then((channel) => {\n *    // groupChannel = channel;\n *    // or\n *    // setCurrentChannel(channel);\n *  })\n *  .catch((error) => {})\n */\nexport const getGetGroupChannel = (state: SendBirdState) => (\n  (channelUrl: string): Promise<GroupChannel> => (\n    new Promise((resolve, reject) => {\n      const sdk = getSdk(state);\n      // const pubSub = getPubSub(state);\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n      if (!sdk.groupChannel) {\n        reject(new Error('Not found GroupChannelModule'));\n      }\n      if (!(sdk.groupChannel.getChannel && typeof sdk.groupChannel.getChannel === 'function')) {\n        reject(new Error('Not found the function \"getChannel\"'));\n      }\n      sdk.groupChannel.getChannel(channelUrl)\n        .then((channel) => {\n          resolve(channel);\n          // Add pubSub with isSelected\n        })\n        .catch(reject);\n    })\n  )\n);\n\n/**\n * const getOpenChannel = selectors.getGetOpenChannel(state);\n * getOpenChannel('channel-url-12345')\n *  .then((channel) => {\n *    // openChannel = channel;\n *    // or\n *    // setCurrentChannel(channel);\n *  })\n *  .catch((error) => {})\n */\nexport const getGetOpenChannel = (state: SendBirdState) => (\n  (channelUrl: string): Promise<OpenChannel> => (\n    new Promise((resolve, reject) => {\n      const sdk = getSdk(state);\n      // const pubSub = getPubSub(state);\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n      if (!sdk.openChannel) {\n        reject(new Error('Not found OpenChannelModule'));\n      }\n      if (!(sdk.openChannel.getChannel && typeof sdk.openChannel.getChannel === 'function')) {\n        reject(new Error('Not found the function \"getChannel\"'));\n      }\n      sdk.openChannel.getChannel(channelUrl)\n        .then((channel) => {\n          resolve(channel);\n          // Add pubSub with isSelected\n        })\n        .catch(reject);\n    })\n  )\n);\n\n/**\n * const leaveChannel = selectors.getLeaveGroupChannel(state);\n * leaveChannel('group-channel-url')\n *  .then((channel) => {})\n *  .catch((error) => {})\n */\nexport const getLeaveGroupChannel = (state: SendBirdState) => (\n  (channelUrl: string): Promise<void> => (\n    new Promise((resolve, reject) => {\n      getGetGroupChannel(state)?.(channelUrl)\n        .then((channel) => {\n          channel.leave()\n            .then(() => {\n              resolve();\n              // Add pubSub process\n            })\n            .catch(reject);\n        })\n        .catch(reject);\n    })\n  )\n);\n\n/**\n * const enterChannel = selectors.getEnterOpenChannel(state);\n * enterChannel('open-channel-url')\n *  .then((channel) => {})\n *  .catch((error) => {})\n */\nexport const getEnterOpenChannel = (state: SendBirdState) => (\n  (channelUrl: string): Promise<OpenChannel> => (\n    new Promise((resolve, reject) => {\n      getGetOpenChannel(state)?.(channelUrl)\n        .then((channel) => {\n          channel.enter()\n            .then(() => {\n              resolve(channel);\n              // Add pubSub process\n            })\n            .catch(reject);\n        })\n        .catch(reject);\n    })\n  )\n);\n\n/**\n * const exitChannel = selectors.getExitOpenChannel(state);\n * exitChannel('open-channel-url')\n *  .then((channel) => {})\n *  .catch((error) => {})\n */\nexport const getExitOpenChannel = (state: SendBirdState) => (\n  (channelUrl: string): Promise<OpenChannel> => (\n    new Promise((resolve, reject) => {\n      getGetOpenChannel(state)?.(channelUrl)\n        .then((channel) => {\n          channel.exit()\n            .then(() => {\n              resolve(channel);\n              // Add pubSub process\n            })\n            .catch(reject);\n        })\n        .catch(reject);\n    })\n  )\n);\n\n/**\n * const freezeChannel = selectors.getFreezeChannel(currentChannel);\n * freezeChannel()\n *  .then(() => {})\n *  .catch((error) => {})\n */\nexport const getFreezeChannel = () => (\n  (channel: GroupChannel | OpenChannel): Promise<void> => (\n    new Promise((resolve, reject) => {\n      if (!(channel.freeze && typeof channel?.freeze === 'function')) {\n        reject(new Error('Not found the function \"freeze\"'));\n      }\n      channel.freeze()\n        .then(() => {\n          resolve();\n          // Add pubSub process\n          /**\n           * consider divide the logic to\n           * _freezeGroupChannel and _freezeOpenChannel\n           */\n        })\n        .catch(reject);\n    })\n  )\n);\n\n/**\n * const unfreezeChannel = selectors.getUnfreezeChannel(currentChannel);\n * unfreezeChannel()\n *  .then((channel) => {})\n *  .catch((error) => {})\n */\nexport const getUnfreezeChannel = () => (\n  (channel: GroupChannel | OpenChannel): Promise<void> => (\n    new Promise((resolve, reject) => {\n      if (!(channel.unfreeze && typeof channel?.unfreeze === 'function')) {\n        reject(new Error('Not found the function \"unfreeze\"'));\n      }\n      channel.unfreeze()\n        .then(() => {\n          resolve();\n          // Add pubSub process\n          /**\n           * consider divide the logic to\n           * _unfreezeGroupChannel and _unfreezeOpenChannel\n           */\n        })\n        .catch(reject);\n    })\n  )\n);\n\n// 4. Message\nexport class UikitMessageHandler {\n  private _onPending: MessageHandler = noop;\n\n  private _onFailed: FailedMessageHandler = noop;\n\n  private _onSucceeded: MessageHandler = noop;\n\n  public triggerPending(message: SendableMessage): void {\n    this._onPending(message);\n  }\n\n  public triggerFailed(error: Error, message: SendableMessage): void {\n    this._onFailed(error, message.isResendable ? message : null);\n  }\n\n  public triggerSucceeded(message: SendableMessage): void {\n    this._onSucceeded(message);\n  }\n\n  public onPending(handler: MessageHandler): UikitMessageHandler {\n    if (typeof handler === 'function') {\n      this._onPending = handler;\n    }\n    return this;\n  }\n\n  public onFailed(handler: FailedMessageHandler): UikitMessageHandler {\n    if (typeof handler === 'function') {\n      this._onFailed = handler;\n    }\n    return this;\n  }\n\n  public onSucceeded(handler: MessageHandler): UikitMessageHandler {\n    if (typeof handler === 'function') {\n      this._onSucceeded = handler;\n    }\n    return this;\n  }\n}\n\n/**\n * const sendUserMessage = selectors.getSendUserMessage(state);\n * sendUserMessage(\n *  channel: GroupChannel | OpenChannel,\n *  params: UserMessageCreateParams,\n * )\n *  .onPending((message) => {})\n *  .onFailed((error, message) => {})\n *  .onSucceeded((message) => {})\n */\n\nexport const getSendUserMessage = (state: SendBirdState) => (\n  (channel: GroupChannel | OpenChannel, params: UserMessageCreateParams): UikitMessageHandler => {\n    const handler = new UikitMessageHandler();\n    const pubSub = getPubSub(state);\n    channel.sendUserMessage(params)\n      .onFailed((error, message) => handler.triggerFailed(error, message))\n      .onPending((message) => {\n        pubSub.publish(\n          topics.SEND_MESSAGE_START,\n          { message, channel },\n        );\n        handler.triggerPending(message);\n      })\n      .onSucceeded((message) => {\n        pubSub.publish(\n          topics.SEND_USER_MESSAGE,\n          { message, channel },\n        );\n        handler.triggerSucceeded(message);\n      });\n    return handler;\n  }\n);\n\n/**\n * const sendFileMessage = selectors.getSendFileMessage(state);\n * sendFileMessage(\n *  channel: GroupChannel | OpenChannel,\n *  params: FileMessageCreateParams,\n * )\n *  .onPending((message) => {})\n *  .onFailed((error, message) => {})\n *  .onSucceeded((message) => {})\n */\nexport const getSendFileMessage = (state: SendBirdState) => (\n  (channel: GroupChannel | OpenChannel, params: FileMessageCreateParams): UikitMessageHandler => {\n    const handler = new UikitMessageHandler();\n    const pubSub = getPubSub(state);\n    channel.sendFileMessage(params)\n      .onFailed((error, message) => handler.triggerFailed(error, message))\n      .onPending((message) => {\n        pubSub.publish(\n          topics.SEND_MESSAGE_START,\n          { message, channel },\n        );\n        handler.triggerPending(message);\n      })\n      .onSucceeded((message) => {\n        pubSub.publish(\n          topics.SEND_FILE_MESSAGE,\n          { message, channel },\n        );\n        handler.triggerSucceeded(message);\n      });\n    return handler;\n  }\n);\n\n/**\n * const updateUserMessage = selectors.getUpdateUserMessage(state);\n * updateUserMessage(\n *  channel: GroupChannel | OpenChannel,\n *  messageId: number,\n *  messageParams: UserMessageUpdateParams,\n * )\n *  .then((message) => {})\n *  .catch((error) => {})\n */\nexport const getUpdateUserMessage = (state: SendBirdState) => (\n  (channel: GroupChannel | OpenChannel, messageId: number, params: UserMessageUpdateParams): Promise<UserMessage> => (\n    new Promise((resolve, reject) => {\n      const pubSub = getPubSub(state);\n      channel.updateUserMessage(messageId, params)\n        .then((message) => {\n          pubSub.publish(\n            topics.UPDATE_USER_MESSAGE,\n            { message, channel, fromSelector: true },\n          );\n          resolve(message);\n        })\n        .catch(reject);\n    })\n  )\n);\n\n// TODO: We will provie this function in the future\n/**\n * const updateFileMessage = selectors.getUpdateFileMessage(state);\n * updateFileMessage(\n *  channel: GroupChannel | OpenChannel,\n *  messageId: number,\n *  params: FileMessageUpdateParams,\n * )\n *  .then((message) => {})\n *  .catch((error) => {})\n */\n// const getUpdateFileMessage = (state: SendBirdState) => (\n//   (channel: GroupChannel | OpenChannel, messageId: number, params: FileMessageUpdateParams) => (\n//     new Promise((resolve, reject) => {\n//       const pubSub = getPubSub(state);\n//       channel.updateFileMessage(messageId, params)\n//         .then((message) => {\n//           pubSub.publish(\n//             topics.UPDATE_USER_MESSAGE,\n//             { message, channel, fromSelector: true },\n//           );\n//           resolve(message);\n//         })\n//         .catch(reject);\n//     })\n//   )\n// );\n\n/**\n * const deleteMessage = selectors.getDeleteMessage(state);\n * deleteMessage(\n *  channel: GroupChannel | OpenChannel,\n *  message: SendableMessage,\n * )\n *  .then((deletedMessage) => {})\n *  .catch((error) => {})\n */\nexport const getDeleteMessage = (state: SendBirdState) => (\n  (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): Promise<UserMessage | FileMessage> => (\n    new Promise((resolve, reject) => {\n      const pubSub = getPubSub(state);\n      const { messageId } = message;\n      channel.deleteMessage(message)\n        .then(() => {\n          pubSub.publish(\n            topics.DELETE_MESSAGE,\n            { messageId, channel },\n          );\n          resolve(message);\n        })\n        .catch(reject);\n    })\n  )\n);\n\n/**\n * const resendUserMessage = selectors.getResendUserMessage(state);\n * resendUserMessage(\n *  channel: GroupChannel | OpenChannel,\n *  failedMessage: UserMessage,\n * )\n *  .then(() => {})\n *  .catch((error) => {})\n */\nexport const getResendUserMessage = (state: SendBirdState) => (\n  (channel: GroupChannel | OpenChannel, failedMessage: UserMessage): Promise<UserMessage> => (\n    new Promise((resolve, reject) => {\n      const pubSub = getPubSub(state);\n      channel.resendUserMessage(failedMessage)\n        .then((message) => {\n          pubSub.publish(\n            topics.SEND_USER_MESSAGE,\n            { message, channel },\n          );\n          resolve(message);\n        })\n        .catch(reject);\n    })\n  )\n);\n\n/**\n * const resendFileMessage = selectors.getResendFileMessage(state);\n * resendFileMessage(\n *  channel: GroupChannel | OpenChannel,\n *  failedMessage: FileMessage,\n *  blob: Blob,\n * )\n *  .then(() => {})\n *  .catch((error) => {})\n */\nexport const getResendFileMessage = (state: SendBirdState) => (\n  (channel: GroupChannel | OpenChannel, failedMessage: FileMessage, blob: Blob): Promise<FileMessage> => (\n    new Promise((resolve, reject) => {\n      const pubSub = getPubSub(state);\n      channel.resendFileMessage(failedMessage, blob)\n        .then((message) => {\n          pubSub.publish(\n            topics.SEND_FILE_MESSAGE,\n            { message, channel },\n          );\n          resolve(message);\n        })\n        .catch(reject);\n    })\n  )\n);\n\nconst sendbirdSelectors = {\n  getSdk,\n  getPubSub,\n  getConnect,\n  getDisconnect,\n  getUpdateUserInfo,\n  getCreateGroupChannel,\n  getCreateOpenChannel,\n  getGetGroupChannel,\n  getGetOpenChannel,\n  getLeaveGroupChannel,\n  getEnterOpenChannel,\n  getExitOpenChannel,\n  getFreezeChannel,\n  getUnfreezeChannel,\n  getSendUserMessage,\n  getSendFileMessage,\n  getUpdateUserMessage,\n  getDeleteMessage,\n  getResendUserMessage,\n  getResendFileMessage,\n};\n\nexport default sendbirdSelectors;\n"],"names":["getSdk","state","stores","sdkStore","sdk","getPubSub","config","pubSub","getConnect","userId","accessToken","Promise","resolve","reject","Error","connect","then","res","catch","err","getDisconnect","disconnect","getUpdateUserInfo","nickname","profileUrl","updateCurrentUserInfo","userParams","getCreateGroupChannel","params","groupChannel","createChannel","channel","publish","topics","CREATE_CHANNEL","getCreateOpenChannel","openChannel","getGetGroupChannel","channelUrl","getChannel","getGetOpenChannel","getLeaveGroupChannel","_getGetGroupChannel","leave","getEnterOpenChannel","_getGetOpenChannel","enter","getExitOpenChannel","_getGetOpenChannel2","exit","getFreezeChannel","freeze","getUnfreezeChannel","unfreeze","UikitMessageHandler","constructor","_defineProperty","noop","triggerPending","message","_onPending","triggerFailed","error","_onFailed","isResendable","triggerSucceeded","_onSucceeded","onPending","handler","onFailed","onSucceeded","getSendUserMessage","sendUserMessage","SEND_MESSAGE_START","SEND_USER_MESSAGE","getSendFileMessage","sendFileMessage","SEND_FILE_MESSAGE","getUpdateUserMessage","messageId","updateUserMessage","UPDATE_USER_MESSAGE","fromSelector","getDeleteMessage","deleteMessage","DELETE_MESSAGE","getResendUserMessage","failedMessage","resendUserMessage","getResendFileMessage","blob","resendFileMessage","sendbirdSelectors"],"mappings":"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"}